<!DOCTYPE html>
<html lang="zh-tw,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.rainvisitor.me","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="RainVisitor Blog">
<meta property="og:url" content="https://blog.rainvisitor.me/page/7/index.html">
<meta property="og:site_name" content="RainVisitor Blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Rainvisitor">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://blog.rainvisitor.me/page/7/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-tw'
  };
</script>

  <title>RainVisitor Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">RainVisitor Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">RainVisitor</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/cb368ef1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/cb368ef1.html" class="post-title-link" itemprop="url">【文章翻譯】Introducing Realm for Dart & Flutter</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-02-09 16:02:34" itemprop="dateCreated datePublished" datetime="2023-02-09T16:02:34+08:00">2023-02-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-12-18 15:24:22" itemprop="dateModified" datetime="2024-12-18T15:24:22+08:00">2024-12-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Dart/" itemprop="url" rel="index"><span itemprop="name">Dart</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="案例研究：使用-Dart-平台原生指令建立一個豐富的跨平台函式庫，支援-Dart-和-Flutter-應用程式"><a href="#案例研究：使用-Dart-平台原生指令建立一個豐富的跨平台函式庫，支援-Dart-和-Flutter-應用程式" class="headerlink" title="案例研究：使用 Dart 平台原生指令建立一個豐富的跨平台函式庫，支援 Dart 和 Flutter 應用程式"></a>案例研究：使用 Dart 平台原生指令建立一個豐富的跨平台函式庫，支援 Dart 和 Flutter 應用程式</h2><p>我們很興奮地看到 MongoDB 今天宣布 Realm for Dart 和 Flutter 的正式發佈！Realm 是一個反應式、面向物件的跨平台資料庫，在應用程式開發人員中很受歡迎。換句話說，它非常適合 Dart 和 Flutter。因此，在過去的一年中，我們與 MongoDB 合作將 Realm 帶到 Dart 和 Flutter。查看 MongoDB 發布的 <a href="https://www.mongodb.com/developer/products/realm/announcing-realm-flutter-sdk/">部落格文章</a>，了解 Realm 提供的功能、自早期預覽版以來的改進以及未來計畫。我們認為 Realm 將非常適合 Dart 和 Flutter 開發人員。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/530/1*cAi4WO4IfN5Sp6WE6Ex8Ig.png" />
<figcaption>使用 Dart 將書籍寫入 Realm 資料庫</figcaption>
</figure>

<p>在這篇伴隨文章中，我們將透過幕後一窺 Realm for Dart 和 Flutter 的建立過程，作為一個實際的範例，說明如何建立新的基於 Dart 的開發人員 SDK。</p>
<h3 id="Realm-範例"><a href="#Realm-範例" class="headerlink" title="Realm 範例"></a>Realm 範例</h3><p>在深入探討 Realm SDK 的實作之前，讓我們先從快速了解如何使用 SDK 作為在 Dart <a href="https://dart.dev/tutorials/server/cmdline">終端應用程式</a> 上工作的開發人員開始（<em>注意</em>：Flutter 應用程式的步驟略有不同；請參閱 <a href="https://www.mongodb.com/docs/realm/sdk/flutter/install/">文件</a> 以獲取詳細資訊）。</p>
<p>首先，您定義資料模型。這可以使用帶有額外 Realm 注解的普通 Dart 類別來完成。以下是一個書籍的範例資料類別：</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/ca8542a6b2438d675c7f3e20e8b3f36f/href">https://medium.com/media/ca8542a6b2438d675c7f3e20e8b3f36f/href</a></iframe>

<p>定義好模型，並完全生成資料模型（見下文）後，您可以開始將一些書籍寫入 Realm 資料庫：</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/e5eb95b84ad9ff3cb9e777f037b9135f/href">https://medium.com/media/e5eb95b84ad9ff3cb9e777f037b9135f/href</a></iframe>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/b25a09e353d2cdfa327fa45d7c3f1c4e/href">https://medium.com/media/b25a09e353d2cdfa327fa45d7c3f1c4e/href</a></iframe>

<h3 id="Realm-for-Dart-和-Flutter-是如何建立的"><a href="#Realm-for-Dart-和-Flutter-是如何建立的" class="headerlink" title="Realm for Dart 和 Flutter 是如何建立的"></a>Realm for Dart 和 Flutter 是如何建立的</h3><p>既然我們已經涵蓋了基本知識，讓我們看看 MongoDB 團隊是如何使用許多 Dart 函式庫和工具建立 Realm for Dart 和 Flutter。我們將看看在初始化 Realm SDK 時會發生什麼，Realm SDK 如何建立在一個共用原生 C++ 函式庫之上，Realm 終端工具是如何建立的，以及 Realm 模型是如何生成的。</p>
<h3 id="初始化-Realm-SDK"><a href="#初始化-Realm-SDK" class="headerlink" title="初始化 Realm SDK"></a>初始化 Realm SDK</h3><p>Dart 和 Flutter 開發人員將首先將 Realm 加入到他們現有的應用程式中，然後運行安裝程式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dart pub add realm_dart</span><br><span class="line">dart run realm_dart install</span><br></pre></td></tr></table></figure>

<p>第一步只是將 Realm SDK 加入到 <code>pubspec.yaml</code> 中，以 <a href="https://dart.dev/tools/pub/dependencies">註冊它作為應用程式的相依</a>。第二步運行 Realm 終端工具，要求它安裝 SDK。如果我們查看 <a href="https://github.com/realm/realm-dart/blob/main/lib/src/cli/install/install_command.dart">安裝指令的原始碼</a>，我們可以看到安裝會確定我們正在開發的作業系統，然後下載該作業系統的 Realm SDK 二進位檔案。</p>
<p>但是為什麼安裝指令要下載二進位檔案？Realm SDK 是一個非常全面的產品，可以在各種作業系統和開發人員框架上使用。為了避免必須建立大量 Realm SDK 的實例，Realm 團隊決定將核心 Realm SDK 實作為一個共用的 <a href="https://github.com/realm/realm-core">realm-core C++ 函式庫</a>。因此，安裝指令真正做的事情是下載這個核心函式庫的編譯版本，適用於應用程式支援的所有平台。</p>
<h3 id="調用-realm-core-SDK"><a href="#調用-realm-core-SDK" class="headerlink" title="調用 realm-core SDK"></a>調用 realm-core SDK</h3><p>使用 Realm SDK 撰寫 Dart 或 Flutter 應用程式的使用者可以獲得不錯的強類型 Dart API，如本文開頭所示。這些 API 如何與 <a href="https://github.com/realm/realm-core">realm-core</a> C++ 函式庫相對應？</p>
<p>如果我們瀏覽 Realm SDK 的 <code>lib</code> 目錄，我們會找到 <a href="https://github.com/realm/realm-dart/blob/main/lib/src/native/realm_bindings.dart">realm_bindings.dart</a>，它以以下內容開頭：</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/9354147dc5966ded3adbb95280d03a06/href">https://medium.com/media/9354147dc5966ded3adbb95280d03a06/href</a></iframe>

<p>謎團解開了：Realm SDK 使用 Dart 對原生 API 的互操作性支援（透過 <code>dart:ffi</code> 函式庫）來調用 realm-core。為了避免必須為大量可用的 Realm API 手動撰寫 FFI 綁定，這些綁定是使用 Dart 的 <a href="https://pub.dev/packages/ffigen">ffigen</a> 工具自動生成的。這是我們在 Dart 團隊中看到快速發展的模式。</p>
<h3 id="Realm-終端工具"><a href="#Realm-終端工具" class="headerlink" title="Realm 終端工具"></a>Realm 終端工具</h3><p>讓我們轉向 Realm 終端工具本身。在上面，我們運行了安裝指令，但我們也可以在沒有指定指令的情況下運行這個工具：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ dart run realm_dart</span><br><span class="line">Realm commands for working with Realm Flutter &amp; Dart SDKs.</span><br><span class="line"></span><br><span class="line">Usage: dart run realm|realm_dart &lt;command&gt; [arguments]</span><br><span class="line"></span><br><span class="line">Global options:</span><br><span class="line">-h, --help    Print this usage information.</span><br><span class="line"></span><br><span class="line">Available commands:</span><br><span class="line">  generate   Generate Realm objects from data model classes</span><br><span class="line">  install    Download &amp; install Realm native binaries into a Flutter or Dart project</span><br><span class="line">  metrics    Report anonymized builder metrics to Realm</span><br><span class="line"></span><br><span class="line">Run &quot;dart run realm|realm_dart help &lt;command&gt;&quot; for more information about a command.</span><br></pre></td></tr></table></figure>

<p>您可能會注意到這個輸出看起來很像核心 dart 和 flutter 工具的輸出。這不是巧合；所有三個工具都是使用相同的 Dart 基礎函式庫建立的，這些函式庫來自 <a href="https://pub.dev/packages/args">package:args</a>，專門用於終端工具：</p>
<ul>
<li><a href="https://pub.dev/documentation/args/latest/args/args-library.html">args</a> 函式庫對將原始命令列參數解析為選項和標誌有豐富的支援。</li>
<li><a href="https://pub.dev/documentation/args/latest/command_runner/command_runner-library.html">command_runner</a> 函式庫提供工具支援的指令結構（例如，安裝）。</li>
</ul>
<h3 id="生成-Realm-模型"><a href="#生成-Realm-模型" class="headerlink" title="生成 Realm 模型"></a>生成 Realm 模型</h3><p>生成指令特別有趣，因為它根據我們在「Realm 範例」章節中定義的帶有注解的 Dart 模型類別生成完整的 Realm 模型：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dart run realm_dart generate</span><br></pre></td></tr></table></figure>

<p>生成指令是如何工作的？它依賴於 Realm <a href="https://github.com/realm/realm-dart/blob/main/generator/README.md">生成器</a>，該生成器建立在 Dart 的 <a href="https://pub.dev/packages/build_runner">build_runner</a> 之上，這是一個用於生成器的框架，它接收一組輸入檔案，然後建立新的輸出檔案。通常 - 如 Realm 案例 - 輸入是帶有注解的 Dart 原始碼檔案，輸出檔案是額外的生成的 Dart 原始碼。</p>
<h3 id="結語"><a href="#結語" class="headerlink" title="結語"></a>結語</h3><p>希望您喜歡這次對大型開發人員框架如何從一組可重複使用的 Dart 函式庫中建立起來的幕後一窺。如果您是框架開發人員，希望這能为您提供一些靈感，激發您下一个基於 Dart 的框架的構思。</p>
<p>對於 Dart 和 Flutter 應用程式開發人員來說，Realm 是 MongoDB 團隊提供的一個很棒的新產品。我們邀請您查看 <a href="https://www.mongodb.com/docs/realm/sdk/flutter/">Realm SDK 文件</a> 以及今天的 <a href="https://www.mongodb.com/developer/products/realm/announcing-realm-flutter-sdk/">Realm 部落格文章</a>。</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=e30cb05eb313" width="1" height="1" alt=""><hr><p><a href="https://medium.com/dartlang/introducing-realm-for-dart-flutter-e30cb05eb313">介紹 Realm for Dart 和 Flutter</a> 最初發佈在 <a href="https://medium.com/dartlang">Dart</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p></p>
<p>undefined</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/601e9674.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/601e9674.html" class="post-title-link" itemprop="url">【文章翻譯】What’s next for Flutter</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-01-25 16:23:56" itemprop="dateCreated datePublished" datetime="2023-01-25T16:23:56+08:00">2023-01-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 16:55:14" itemprop="dateModified" datetime="2024-09-30T16:55:14+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="肯亞奈洛比-Flutter-Forward-活動上的願景分享"><a href="#肯亞奈洛比-Flutter-Forward-活動上的願景分享" class="headerlink" title="肯亞奈洛比 Flutter Forward 活動上的願景分享"></a>肯亞奈洛比 Flutter Forward 活動上的願景分享</h2><p>今天，我們很興奮能夠在 <a href="https://flutter.dev/events/flutter-forward">Flutter Forward</a> 上與大家分享我們對 Flutter 的願景。Flutter Forward 是我們的開發者活動，正在從肯亞奈洛比現場直播，來自世界各地的開發者們齊聚一堂，線上線下同步參與，了解 Flutter 未來的發展方向。</p>
<p>Flutter 是一個 UI 工具包，讓應用程式開發者能夠從單一程式碼庫為行動、網頁和桌面構建應用程式。Flutter 使您能夠構建 <strong>美麗</strong> 的應用程式，讓您能夠完全控制螢幕上的每個像素。它 <strong>速度快</strong>，利用手機或電腦的硬體，支援硬體加速圖形和原生編譯的機器碼。它 <strong>生產力高</strong>，擁有狀態熱重載等技術，讓您能夠立即在應用程式中看到程式碼變更。它的 <strong>可移植性</strong> 使您能夠使用相同的原始碼部署到各種平台，而且不會有任何意外。而且它完全 <strong>開源</strong>，不需要支付許可費，也不需要為開發工具付費。</p>
<p>Flutter 已證明其受歡迎程度，迄今已發佈超過 700,000 個應用程式：從具有 <strong>非凡想法的小型新創公司</strong> 到 <strong>具有關鍵需求的大型企業</strong>。在 Google，我們也發現 Flutter 是一個寶貴的工具，讓 Google Classroom 等團隊能夠為行動和網頁使用者提供高品質的解決方案；我們還在其他開發者工具中加入對它的支援，包括 <a href="https://developers.google.com/admob/flutter/quick-start">Google 廣告</a>、<a href="https://codelabs.developers.google.com/codelabs/google-maps-in-flutter#0">Google 地圖</a>、<a href="https://pub.dev/packages/pay">Google Pay</a>，當然還有 <a href="https://firebase.google.com/docs/flutter/setup?platform=ios">Firebase</a>。</p>
<iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FJVJF_M9bgj4%3Ffeature%3Doembed&amp;display_name=YouTube&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DJVJF_M9bgj4&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FJVJF_M9bgj4%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube" width="854" height="480" frameborder="0" scrolling="no"><a href="https://medium.com/media/3f3ea2554e92675ad5b80ec3b5300271/href">https://medium.com/media/3f3ea2554e92675ad5b80ec3b5300271/href</a></iframe>

<blockquote>“使用 Flutter，我們將相同功能的程式碼大小減少了 66%... 這意味著每個平台的錯誤更少，未來技術債務也更少。”（Kenechi Ufondu，Google Classroom 軟體工程師）</blockquote>

<p>Flutter 的第一個版本提供了一個 UI 工具包，用於在 Android 和 iOS 上構建行動應用程式，但隨著 Flutter 3 的推出，我們將生產支援擴展到包含 Windows、macOS、Linux 和網頁，同時也讓嵌入式平台能夠使用 Flutter。在此基礎上，<a href="https://medium.com/flutter/whats-new-in-flutter-3-7-38cbea71133c">本週我們發佈了最新的穩定版本 Flutter 3.7</a>，其中加入了一系列新功能，包括 iOS 上的新渲染引擎、增強對 Material 3 和 iOS 風格 Widget 的支援、改進的國際化支援、背景處理改進以及開發者工具更新。</p>
<p>但在這次活動中，我們將目光 <strong>展望未來</strong>，預覽我們在 Flutter 上的下一波投資：突破性的圖形效能、網頁和行動的無縫整合、對新興架構的早期支援，以及持續關注開發者體驗。我們將展示將在未來幾個月內逐步交付的工作，我們希望這能讓您對我們對 Flutter 的願景感到興奮，Flutter 將成為任何希望構建高品質、美麗使用者體驗的開發者的強大工具包，這些體驗可以應用在有像素的地方。</p>
<p><em>免責聲明：我們在此預覽的功能仍在開發中，可能會在未來幾個月內發生重大改變。在這個早期階段展示它們的目的是讓早期採用者有機會做出貢獻。</em></p>
<figure>
<img alt="四個主題：突破性的圖形效能、網頁和行動的無縫整合、對新興架構的早期支援，以及持續關注開發者體驗。" src="https://cdn-images-1.medium.com/max/1024/0*1m_CqCW7oMEoqPrl" />
</figure>

<h3 id="突破性的圖形效能"><a href="#突破性的圖形效能" class="headerlink" title="突破性的圖形效能"></a>突破性的圖形效能</h3><p>從歷史上看，跨平台框架需要在視覺效果上做出妥協，因為創建抽象層存在挑戰。Flutter 採用了與大多數框架不同的方法，它擁有自己的渲染層，提供硬體加速圖形，並在每台設備上呈現一致的視覺外觀。展望未來，我們將投資於 <em>突破性的圖形效能</em>，擴展 Flutter 在這個領域的既有優勢。</p>
<p>在 Flutter Forward 上，我們展示了在 <a href="https://github.com/flutter/flutter/wiki/Impeller">Impeller</a> 上的更多進展，Impeller 是 Flutter 的下一代渲染引擎。Impeller 針對 Flutter 優化，為我們提供了更大的靈活性，並能夠更好地控制圖形管道，為我們打開了新的機會。Impeller 提供更可預測的效能，使用預先編譯的著色器，消除由著色器編譯引起的運行時掉幀。它利用 Metal 和 Vulkan 中的基元，這些是 iOS 和 Android 中的現代低階 API。而且它有效利用併發性，將單一框架工作負載分配到各個執行緒。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/739/1*QrEupNb6Ebc5_4c0PW4fQw.jpeg" />
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/624/1*-DXiE7L987-q6zs8hczbOQ.jpeg" />
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*xoVH5v5x7znMLB6NTjcqCA.jpeg" />
<figcaption>Impeller 為 Wonderous 等需要大量圖形處理的應用程式提供絲般順滑的效能，Wonderous 是一個美麗的應用程式，帶領您遊覽世界奇觀。如圖所示：Wonderous 的最新版本，它調整 UI 以適應不同的設備和外觀比例，可在 [https://wonderous.app](https://wonderous.app.) 上使用。</figcaption>
</figure>

<p>除了提供絲般順滑的 UI 之外，Impeller 還可以在某些情況下顯著提高效能。一個示範（如下所示）展示了這個最佳案例。左側是一個使用 SVG 剪裁的萬花筒應用程式，使用當前的預設渲染器構建。向下捲軸頁面時，效能下降，渲染時間超過每幀預算，導致幀速率為 7-10 fps。右側顯示了在 Impeller 下運行的相同應用程式，以無卡頓的 60 fps 渲染。</p>
<iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FZ7v-YRdHusM%3Ffeature%3Doembed&amp;display_name=YouTube&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DZ7v-YRdHusM&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FZ7v-YRdHusM%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube" width="854" height="480" frameborder="0" scrolling="no"><a href="https://medium.com/media/e6f4fd96384182e61b27a738d6c6e787/href">https://medium.com/media/e6f4fd96384182e61b27a738d6c6e787/href</a></iframe>

<p>從零開始構建的一個優勢是架構可以支援全新的用例。新引入的 <strong>對自訂著色器的支援</strong> 已經導致了一些 <a href="https://twitter.com/reNotANumber/status/1599717360096620544">令人驚嘆的新示範</a>，展示了與 Flutter Widget 階層的無縫整合。但是，我們在此的工作不僅限於行動設備：我們現在也對網頁上的自訂著色器提供了早期支援，相同的程式碼現在為 iOS、Android 和瀏覽器提供硬體加速的體驗。</p>
<figure>
<img alt="Chrome 網頁瀏覽器的螢幕截圖，顯示 Flutter 像素著色器示範。有一個 Flutter 吉祥物 Dash 的圖片，但它有一個馬賽克風格的效果，可以使用滑動控制調節。" src="https://cdn-images-1.medium.com/max/1024/0*aS5btwRMIK-AkltC" />
<figcaption>Flutter 現在支援網頁上的像素著色器，能夠實現各種很酷的視覺效果。（作者： [Erick Ghaumez](https://medium.com/u/21767146c3d4)。）</figcaption>
</figure>

<p>現在，我們開始了對 <strong>使用 Flutter 支援 3D</strong> 的早期工作。在主題演講中，我們展示了您可以匯入使用 <a href="https://www.blender.org/">Blender</a> 創建的模型，甚至可以使用熱重載來與 Blender 實時互動，并在正在執行的應用程式中查看結果。這還處於起步階段，但我們對初始性能感到興奮，以及將 3D 整合到其他 Flutter 體驗的潛力。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/750/1*ZaldnkdSaQZqWX5LKWB5Ig.png" />
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/750/1*MdyKANeEPV0iIQTTwOBGog.png" />
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/750/1*R-Lktrjfd8lLirhC_BBg5Q.png" />
<figcaption>Impeller 使 Flutter 能够渲染 3D 图形，如 Dash 的这个有趣演示所示。</figcaption>
</figure>

<p>在可移植的 UI 工具包中加入 3D 和自訂著色器，將圖形效能提升到一個新的水平。我們非常期待您在這些新功能可用後使用它們做出的成果。</p>
<h3 id="網頁和行動的無縫整合"><a href="#網頁和行動的無縫整合" class="headerlink" title="網頁和行動的無縫整合"></a>網頁和行動的無縫整合</h3><p>雖然您可以完全使用 Flutter 和 Dart 撰寫應用程式，但幾乎任何非微不足道的專案都需要與其他程式碼連接。在網頁上，Flutter 可以作為較大應用程式中的嵌入式組件使用；在行動裝置上，應用程式可能需要呼叫系統 API 或其他使用其他語言編寫的程式碼。因此，我們投資的第二個主要主題是 <em>網頁和行動的無縫整合</em>。</p>
<p>在網頁上，我們正在預覽一個我們稱之為 <strong>元素嵌入</strong> 的新功能，它允許將 Flutter 內容新增到任何標準網頁 <code>&lt;div&gt;</code>。以這種方式嵌入時，Flutter 只是一個網頁組件，可以與網頁 DOM 整合，甚至可以允許使用 CSS 選擇器和轉換來設定父 Flutter 物件的樣式。</p>
<p>我們還在對 <a href="http://pub.dev/packages/js">js</a> 套件做出一些重大改變，以實現 JavaScript 和 Dart 程式碼之間的無縫 <strong>互操作性</strong>。使用 js，您可以在 Dart 程式碼中使用 <code>@JSExport</code> 屬性對任何函數進行註釋，然後從 JavaScript 程式碼中呼叫它。</p>
<p>結合這兩個新功能，為在網頁上使用 Flutter 開啟了一些令人興奮的新場景。在我們在 Flutter Forward 上展示的 <a href="https://flutter-forward-demos.web.app/#/">概念驗證示範</a> 中，您可以看到一個嵌入在基於 HTML 的網頁中的簡單 Flutter 應用程式。使用 CSS，我們應用了一個動畫旋轉效果；即使在旋轉時，Flutter 內容仍然可以互動。示範還顯示，您可以使用 HTML 按鈕和 JavaScript 事件處理程式來更改 Flutter 狀態，反之亦然。當這項工作完成後，我們認為這將為使用 Flutter 將互動性加入到現有的 Web 應用程式中開啟許多新的機會。</p>
<figure>
<img alt="Flutter 網頁示範的螢幕截圖。顯示了傳統的 Flutter 計數器應用程式，但它被 CSS 扭曲和轉換，看起來像是照片的一部分，照片中一位女性拿著一部 iPhone。" src="https://cdn-images-1.medium.com/max/1024/1*QjyV-g_N50iwOVNSGglxxA.png" />
<figcaption>使用元素嵌入，您可以在 `<div>` 元素中嵌入 Flutter，並使用 CSS 為其設定樣式。</figcaption>
</figure>

<p>轉向 Android 和 iOS，Flutter 已經長期支援使用平台通道與系統 API 整合，平台通道為使用 Kotlin 或 Swift 等語言編寫的程式碼提供了基於訊息的通訊方式。雖然這解鎖了對這些函式庫的存取，但它需要應用程式作者熟悉多種語言，並且需要大量的樣板程式碼。</p>
<p>我們現在開始了 <strong>針對系統互操作性的新方法</strong> 的工作，允許直接呼叫函式庫。在 iOS 上，我們正在建立在 FFI 用於 C 互操作性的工作基礎之上，加入對 Swift 和 Objective-C 函式庫的支援。在 Android 上，我們正在使用 JNI 來橋接到用 Kotlin 編寫的 Jetpack 函式庫。使用新命令，Dart 會自動為跨語言互操作創建綁定，並適當轉換資料類別。完成後，我們希望這項工作能夠讓 Flutter 開發者能夠呼叫新的 Jetpack 或 iOS 函式庫，而無需使用外掛或學習不同的 API 語法，同時也能大大減輕外掛作者的工作。<a href="https://github.com/flutter/samples/tree/main/experimental/pedometer">查看我們的範例</a> 了解更多！</p>
<h3 id="對新興架構的早期支援"><a href="#對新興架構的早期支援" class="headerlink" title="對新興架構的早期支援"></a>對新興架構的早期支援</h3><p>由於 Dart 廣泛支援各種處理器架構，以及它高度優化的 JavaScript 編譯器，Flutter 已經可以在各種設備和外觀比例上執行。但隨著一些令人興奮的新選項即將出現，我們第三个主題是 <em>對新興架構的早期支援</em>。</p>
<p><a href="https://webassembly.org/">WebAssembly</a> 作為一種平台中立的二進制指令格式，已日漸成熟，在現代瀏覽器上獲得了 <a href="https://caniuse.com/wasm">越來越多的支援</a>。令人興奮的是，WebAssembly 為網頁平台打開了除了 JavaScript 之外的其他語言的大門。在最近幾個月裡，我們一直在與 Chrome 團隊和其他 WebAssembly 合作夥伴合作，為 <a href="https://github.com/WebAssembly/gc">垃圾回收語言</a>（如 Dart）提供 <a href="https://github.com/WebAssembly/gc">早期支援</a>。此 WebAssembly 的新擴展現在使用最新開發版本的 Chrome 中的旗標支援。在 Flutter Forward 上，我們正在揭示對 <strong>Flutter 編譯為 WebAssembly</strong> 的早期支援，這將為我們的 Web 支援帶來更快的速度和更小的佔位空間優化。</p>
<p>另一個引發越來越多人興趣的平台架構是 <a href="https://en.wikipedia.org/wiki/RISC-V">RISC-V</a>，這是一種開放標準指令集架構 (ISA)，旨在廣泛使用。Android 團隊最近發表了關於 <a href="https://www.youtube.com/watch?v=70O_RmTWP58">他們支援 RISC-V 的工作</a> 的演講，我們很高興地宣布 <strong>Dart 現在也支援 RISC-V</strong>，作為了我們自己的旅程的一部分，讓 Flutter 能夠在 RISC-V 設備可用時在其上執行。生產 RISC-V 硬體仍處於起步階段，但在 Flutter Forward 上，我們展示了迄今在 <a href="https://www.clockworkpi.com/product-page/devterm-kit-r01">ClockworkPi DevTerm Kit R-01</a> 上取得的進展，這是一款運行 Linux 的自組裝便攜式終端機。我們相信 RISC-V 支援將特別適用於嵌入式方案，Flutter 可以為各種需求提供強大的 UI 工具包。</p>
<figure>
<img alt="ClockworkPi RISC-V 便攜式終端的圖片。這是一個大約與 iPad 大小相同的設備，但帶有微型鍵盤、軌跡球滑鼠和終端機顯示器。" src="https://cdn-images-1.medium.com/max/1024/1*LfW_XnTVxV1dL1CLT7iAWQ.jpeg" />
<figcaption>ClockworkPi DevTerm R-01，一款實驗性的 RISC-V 電腦，運行 Dart 主控台應用程式。</figcaption>
</figure>

<h3 id="持续关注开发者体验"><a href="#持续关注开发者体验" class="headerlink" title="持续关注开发者体验"></a>持续关注开发者体验</h3><p>我们上面描述的所有内容的基础都是开发人员的生产力，这是 Flutter 自创建以来一直以来的标志，其功能包括状态热重载。我们对未来的第四个也是最后一个投资领域是 <em>持续关注开发人员体验</em>，涵盖 Flutter 和 Dart。</p>
<p>在 Flutter Forward 上，我们正在预览我们对一些主要的 Dart 语言新功能的早期工作的部分成果，我们希望这些成果能够证明我们对语言的优雅演进的承诺。在我们的开发频道中，我们现在拥有对 <strong>记录和模式</strong> 的早期支持，这两个新增强功能可以很好地配合使用。</p>
<figure>
<img alt="VSCode 运行记录和模式新功能演示的图片。它显示了 Dart 现在可以返回多个值。演示的代码位于 https://gist.github.com/timsneath/a75fd9f76b5b61c42676c9232160d14d" src="https://cdn-images-1.medium.com/max/1024/0*uGTJ0p_XZE_yZ9NS" />
<figcaption>记录和模式用于返回和接收多个函数参数的简单示例。</figcaption>
</figure>

<p>我们还 <strong>正式宣布 Dart 3</strong>，这是我们为语言引入健全的空安全而开展的工作的顶峰。Dart 3 还删除了其他长期弃用的功能，以进一步使语言现代化。我们已经开始发布 Dart 3 的 alpha 版本，以及匹配的 Flutter 版本，使开发人员能够测试包和应用程序。有关 Dart 3 的更多信息，请查看 <a href="https://medium.com/dart-lang/dart-3-alpha-f1458fb9d232">Dart 通道的单独博客文章</a>。</p>
<p>当然，我们也会投资于 Flutter 的开发人员体验。继我们去年在 <a href="https://medium.com/flutter/announcing-the-flutter-casual-games-toolkit-c22e401d8fee">I&#x2F;O</a> 上发布的休闲游戏工具包取得成功之后，我们现在正在共享 <a href="https://medium.com/flutter/announcing-the-flutter-news-toolkit-180a0d32c012">第一个版本的新闻工具包</a>，它可以加速新闻出版商和其他希望触达移动用户，而不必从头开始设计应用程序的內容提供者的移动开发。它包括构建以文章为中心的应用程序所需的一切，包括导航和搜索、身份验证、广告整合、通知、个人资料和订阅，同时还将 Google 新闻倡议研究的最佳实践整合在一起。今天，我们重点介绍了非洲的三个早期采用者，他们正在使用这个工具包构建应用程序，包括 <a href="https://www.hespress.com/">Hespress</a>，摩洛哥最大的新闻网站之一，<a href="https://boldsportsng.com/">Bold Sports</a>，尼日利亚受欢迎的体育网站；以及 <a href="https://www.standardmedia.co.ke/">The Standard</a>，肯尼亚最古老的报纸。</p>
<iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FYnJwjZ3jCTc%3Ffeature%3Doembed&amp;display_name=YouTube&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DYnJwjZ3jCTc&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FYnJwjZ3jCTc%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube" width="854" height="480" frameborder="0" scrolling="no"><a href="https://medium.com/media/d349741327c90c711abcbe3f978dd369/href">https://medium.com/media/d349741327c90c711abcbe3f978dd369/href</a></iframe>

<h3 id="携手共进"><a href="#携手共进" class="headerlink" title="携手共进"></a>携手共进</h3><p>我们希望您与我们一起对 Flutter 的未来感到兴奋。我们正在继续大力投资核心开发人员体验，同时进行一些基础改进，为我们和其他人铺平道路，以便使用 Flutter 构建更强大的体验。</p>
<p>这张图片总结了我们的方向：</p>
<figure>
<img alt="未来工作的四个主题：突破性的图形性能（Impeller、着色器、3D 支持）；网页和移动的无缝集成（元素嵌入、JNIgen 和 FFIgen）；对新兴架构的早期支持（WebAssembly 和 RISC-V）；以及持续关注开发者体验（Dart 语言特性、健全的空安全、Google 新闻工具包和 Wonderous）。" src="https://cdn-images-1.medium.com/max/1024/1*iIgYbZq3WKnUBctIWBap_Q.png" />
</figure>

<p>除了我们自己的开发主题之外，看到 Flutter 生态系统不断扩展也令人欣慰，例如 <a href="https://flutterflow.io/">FlutterFlow</a> 是一個開發原生行動應用程式的低程式碼建構器，以及 <a href="http://widgetbook.io/">Widgetbook</a>，它提供靈活的工具，讓設計師和開發者能夠在使用者介面開發上進行合作。</p>
<p>最后，来到肯尼亚，看到当地开发者的创业精神和才华，真是太好了。非洲的 Flutter 社区充满活力，这里很特别；仅 Flutter 肯尼亚用户组的开发人员就超过 1,000 人。我们很高兴 Flutter 能为非洲各地的开发人员提供新的机会，让他们参与到快速增长的应用程序经济中。Klasha 就是这个承诺的一个很好的例子，它使用 Flutter 快速进入市场，并解决当地的难题。以下是他们使用 Flutter 的体验视频：</p>
<iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2Fo8NPZ2ofLbI%3Ffeature%3Doembed&amp;display_name=YouTube&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Do8NPZ2ofLbI&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2Fo8NPZ2ofLbI%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube" width="854" height="480" frameborder="0" scrolling="no"><a href="https://medium.com/media/66cf87664a2d1cae8b949b194832a985/href">https://medium.com/media/66cf87664a2d1cae8b949b194832a985/href</a></iframe>

<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=b94ce089f49c" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/whats-next-for-flutter-b94ce089f49c">Flutter 的下一步是什麼</a> 最初發表在 <a href="https://medium.com/flutter">Flutter</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p> </p>
<p><a href="http://creativecommons.org/licenses/by/4.0/">http://creativecommons.org/licenses/by/4.0/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/dac042d8.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/dac042d8.html" class="post-title-link" itemprop="url">【文章翻譯】Adapting Wonderous to larger device formats</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-01-25 16:05:24" itemprop="dateCreated datePublished" datetime="2023-01-25T16:05:24+08:00">2023-01-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 16:55:14" itemprop="dateModified" datetime="2024-09-30T16:55:14+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="使用-Flutter-設計在所有設備上看起來都美觀的行動應用程式"><a href="#使用-Flutter-設計在所有設備上看起來都美觀的行動應用程式" class="headerlink" title="使用 Flutter 設計在所有設備上看起來都美觀的行動應用程式"></a>使用 Flutter 設計在所有設備上看起來都美觀的行動應用程式</h2><p>今天，我們宣布 Wonderous 的下一個版本，該版本新增了對可折疊設備、平板電腦和平板電腦橫向模式的支援。這個迭代讓我們能夠測試 Flutter <strong>適應不同設備格式</strong> 的能力，GitHub 上的 <a href="https://github.com/gskinnerTeam/flutter-wonderous-app">程式碼</a> 存放庫提供了利用 <a href="https://docs.flutter.dev/development/ui/layout/building-adaptive-apps">適應性設計</a> 的參考。</p>
<p>在本文中，我們將回顧我們在其中學習到的一些內容。雖然我們的重點是手持設備的應用程式，但其中許多概念可以適應桌面和網頁。</p>
<h3 id="縮小焦點"><a href="#縮小焦點" class="headerlink" title="縮小焦點"></a>縮小焦點</h3><p>在思考適應性設計時，設計師應該首先問：「<strong>我們可能支援哪些外形尺寸？</strong>」Flutter 支援幾乎所有設備，但應用程式創建者應該明確說明他們設計和測試過其應用程式的格式。縮小焦點讓設計師可以仔細考慮如何為可用的畫布最佳化數位體驗。沒有仔細設計，適合行動裝置的佈局在較大的外形尺寸上可能看起來不精緻。</p>
<h3 id="充分利用額外的空間"><a href="#充分利用額外的空間" class="headerlink" title="充分利用額外的空間"></a>充分利用額外的空間</h3><p>在適應應用程式設計以符合更大的螢幕尺寸時，設計師應該考慮如何利用額外的空間。這可能意味著透過顯示不同的佈局來增強呈現方式。例如：</p>
<figure>
<img alt="Portrait and landscape version of the Wonder Events page" src="https://cdn-images-1.medium.com/max/1024/1*Y_ROvg5zl7edWeA-G6THzg.png" />
<figcaption><em>iPad Pro 12.9 英寸直立和橫向</em></figcaption>
</figure>

<p>新增額外的行或欄：</p>
<figure>
<img alt="Showing the artifcats search results on a larger screen with 4 columns, versus a smaller screen with only two columns" src="https://cdn-images-1.medium.com/max/1024/1*G0_f2A0k1sK7aWmFbKAFlg.png" />
<figcaption><em>iPad Pro 12.9 英寸和 iPhone 11</em></figcaption>
</figure>

<p>或將欄變為行：</p>
<figure>
<img alt="Showing vertically scrollable rows in portrait mode, and a single horizontally scrollable row in landscape." src="https://cdn-images-1.medium.com/max/1024/1*g3j3u2aTh1m5pR4M5CqX_w.png" />
<figcaption><em>iPad Pro 12.9 英寸直立和橫向</em></figcaption>
</figure>

<p>或者，您也可以使用額外的畫布來做更多相同的事情。Wonderous 具有美麗的插圖，因此更大的螢幕尺寸讓我們能夠展示更多這項工作：</p>
<figure>
<img alt="Showing an image of the Machu Picchu illustration scaled to multiple devices sizes" src="https://cdn-images-1.medium.com/max/1024/1*PpfHUeUH0sr5vDUUdcG81A.png" />
<figcaption><em>iPhone 11，Samsung Fold4 關閉，iPad Pro 12.9 英寸</em></figcaption>
</figure>

<p><strong>考慮 UI 組件如何反應的方式</strong></p>
<p>隨著螢幕變大，您需要考慮應用程式的 UI 組件將如何反應。例如，您可能需要將組件縮放到適合可用空間的大小：</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*IURgMIU9x8zzm-p6lZUNwg.png" />
<figcaption><em>Samsung Fold4 打開和 iPhone 11</em></figcaption>
</figure>

<p>您也可以考慮保持內容居中加權，或將某些資產固定到設備邊界：</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1000/1*RA_cBWkp9GOQsK_H0-Dg8w.gif" />
</figure>

<p><strong>使用 Flutter 的適應性設計</strong></p>
<p>Flutter 架構中有許多功能對適應 Wonderous 很有幫助。例如：</p>
<ul>
<li>熱重載讓設計團隊能夠實時做出微調</li>
<li>動態填充和字體大小</li>
<li><a href="https://api.flutter.dev/flutter/widgets/Flex-class.html">Flex</a> Widget 動態顯示行或欄</li>
<li><a href="https://api.flutter.dev/flutter/widgets/MediaQuery-class.html">MediaQuery</a> 返回螢幕尺寸和設備方向等詳細資訊</li>
</ul>
<p>您可以在 <a href="https://blog.gskinner.com/archives/2023/01/flutter-adapting-wonderous-for-landscape.html">gSkinner 的網站</a> 上閱讀有關技術實作的更多具體資訊。您還可以在 Android 文件網站上的 <a href="https://developer.android.com/docs/quality-guidelines/large-screen-app-quality">大型螢幕應用程式尺寸</a> 中了解有關為更大螢幕尺寸設計應用程式的更多資訊。</p>
<p>我們希望您能安裝 Wonderous，並在開發您自己的應用程式時將程式碼用作參考。如果您對應用程式本身有任何回饋，請 <a href="https://github.com/gskinnerTeam/flutter-wonderous-app">在 GitHub 上提交議題</a>。如果您對使用 Flutter 的適應性設計有任何想法，請隨時透過 <a href="https://twitter.com/LeighaJarett">Twitter</a> (@leighajarett) 或 <a href="https://www.linkedin.com/in/leighajarett/">LinkedIn</a> (Leigha Jarett) 傳送訊息給我。</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=ac51e1c00bc0" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/adapting-wonderous-to-larger-device-formats-ac51e1c00bc0">將 Wonderous 適應更大的設備格式</a> 最初發佈在 <a href="https://medium.com/flutter">Flutter</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/2c2a6b9f.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/2c2a6b9f.html" class="post-title-link" itemprop="url">【文章翻譯】Introducing Dart 3 alpha</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-01-25 16:01:06" itemprop="dateCreated datePublished" datetime="2023-01-25T16:01:06+08:00">2023-01-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-12-26 19:28:05" itemprop="dateModified" datetime="2024-12-26T19:28:05+08:00">2024-12-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Dart/" itemprop="url" rel="index"><span itemprop="name">Dart</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動翻譯產生】</p>
<h2 id="介紹-Dart-3-alpha"><a href="#介紹-Dart-3-alpha" class="headerlink" title="介紹 Dart 3 alpha"></a>介紹 Dart 3 alpha</h2><p>12 月，我們發表了第一篇關於 Dart 3 的部落格文章，讓我們得以一窺未來。今天，在肯亞奈洛比舉行的 <a href="https://flutter.dev/events/flutter-forward">Flutter Forward</a> 開發者活動現場，我們分享了 Dart 下一個主要版本的更廣泛願景，以及我們的第一個預覽版本 <strong>Dart 3 alpha</strong>。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*evGHZJd_7cahb08X" />
</figure>

<p>我們的 Dart 使命是創造最好的程式語言，以便在任何應用程式平台上構建高品質的應用程式。Dart <strong>易於上手</strong>、易於學習，避免不必要的複雜性，並且內部一致。Dart <strong>生產力高</strong>；應用程式開發人員面臨著持續的壓力，需要在更短的時間內交付具有不斷變化的需求的應用程式，同時還要保證品質和完成度。因此，我們在構建 Dart 時，非常注重實現快速開發、快速迭代和高品質。Dart 還具有 <strong>可移植性</strong>，涵蓋最廣泛的平台，使您能夠將應用程式部署到現在和未來的設備上。</p>
<p>多年來，我們一直致力於建立這些品質。藉由 Dart 3，我們打算邁出更大的一步，以顯著的方式改進和擴展易用性、生產力和可移植性。</p>
<p>Dart 3 是一個全新的 <em>主要</em> 版本。部分原因是為了表示新功能的重大進展，部分原因是就語義版本控制而言，它是一個 <em>重大變更版本</em>：我們正在將類型系統更改為 <em>僅</em> 支援 <strong>完善的空值安全</strong>（在 Dart 2.12 及更高版本中，這是 <em>可選的</em>），並在 Dart 的核心函式庫中進行了相應的重大變更。讓我們深入了解細節！</p>
<h3 id="Dart-3-生產力提升"><a href="#Dart-3-生產力提升" class="headerlink" title="Dart 3 生產力提升"></a>Dart 3 生產力提升</h3><h4 id="更具表現力的-Dart-語言：記錄、模式和存取控制"><a href="#更具表現力的-Dart-語言：記錄、模式和存取控制" class="headerlink" title="更具表現力的 Dart 語言：記錄、模式和存取控制"></a>更具表現力的 Dart 語言：記錄、模式和存取控制</h4><p>過去幾年，我們以飛快的速度發展 Dart 語言，自 2.0 版以來 <a href="https://dart.dev/guides/language/evolution">新增了 23 項新功能</a>。在 Dart 3 中，我們預計會新增兩項主要功能，即記錄和模式，目標是讓使用結構化資料更有效率。</p>
<p>記錄允許您有效且簡潔地從任何現有資料建立匿名複合值，而無需宣告類別來儲存這些值的思維負擔。使用記錄，您可以輕鬆構建組合現有資料的新資料結構。例如，要返回一對值：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="built_in">int</span>, <span class="built_in">int</span>) geoLocation(<span class="built_in">String</span> address) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">return</span> (lat, long);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>記錄允許您組合資料，而模式可以將複合資料解構為其組成部分。例如，要將上面 <code>geoLocation</code> 的返回值（由一對整數組成的記錄）解構為兩個單獨的整數變數 <code>lat</code> 和 <code>long</code>，您可以使用如下模式宣告：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (lat, long) = geoLocation(address);</span><br></pre></td></tr></table></figure>

<p>模式是完全類型安全的，並在開發過程中進行檢查。</p>
<p>您還可以根據值的類型進行模式匹配，例如從類別的階層結構中匹配。<code>switch</code> 可以使用與類型匹配的模式，以及每種類型的單獨欄位，如下所示 <code>calculateArea</code> 的主體：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">double</span> calculateArea(Shape shape) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">switch</span> (shape) &#123;</span><br><span class="line">    Square(side: <span class="keyword">var</span> s) =&gt; s * s,</span><br><span class="line">    Circle(radius: <span class="keyword">var</span> r) =&gt; pi * r * r,</span><br><span class="line">    Rectangle(</span><br><span class="line">      width: <span class="keyword">var</span> w, </span><br><span class="line">      height: <span class="keyword">var</span> h</span><br><span class="line">    ) =&gt; w * h,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>總體而言，我們正在添加大量模式，這些模式組合在一起使 Dart 在處理結構化資料時更具表現力。</p>
<p>結合模式，我們還透過幾個新的修飾符為類別新增了 <a href="https://github.com/dart-lang/language/blob/master/accepted/future-releases/class-modifiers/feature-specification.md">能力控制</a>：</p>
<ul>
<li><strong>interface class</strong>：不能被繼承。</li>
<li><strong>base class</strong>：禁用隱式介面，因此不能被實作。</li>
<li><strong>final class</strong>：不能繼承、實作或混合使用該類別（在目前的函式庫之外）。</li>
<li><strong>sealed class</strong>：與 <code>abstract + final</code> 相同，並且該類型被視為密封類型族的根，用於窮盡性檢查。例如，以上面的 <code>Shape</code> 類別階層為例。在 <code>Shape</code> 類型的 <code>switch</code> 語句中（如 <code>calculateArea</code> 函數），如果 <code>switch</code> 語句未處理密封類型的所有可能子類型，分析器將觸發錯誤。</li>
<li><strong>mixin class</strong>：可以用作 mixin 的類別。</li>
</ul>
<p>每個新功能都會增加語言的複雜性。為了確保 Dart 保持易於上手，類別預設是完全允許的，就像今天一樣，只有一個小例外，即打算用作 mixin 的類別現在必須使用 <code>mixin</code> 關鍵字。</p>
<h4 id="透過直接平台函式庫互操作實現高效的平台整合"><a href="#透過直接平台函式庫互操作實現高效的平台整合" class="headerlink" title="透過直接平台函式庫互操作實現高效的平台整合"></a>透過直接平台函式庫互操作實現高效的平台整合</h4><p>我們正在努力擴展 Dart 語言的互操作性，以便 <strong>直接從 Dart 調用平台函式庫</strong>。在 Apple 平台上，我們正在基於我們在 <a href="https://dart.dev/guides/libraries/c-interop">FFI for C interoperability</a> 上的工作，它支援從 Dart 調用任何遵循 C 調用約定的 C 模組。到目前為止，它支援 C、Go 和 Rust 等語言。現在，我們正在為 <a href="https://dart.dev/guides/libraries/objective-c-interop">iOS&#x2F;macOS</a> 上的 Swift 和 Objective-C 新增支援。在 Android 上，您可以利用 FFI 和 Android 的 Java Native Interface (JNI) 調用以 Kotlin 編寫的 Jetpack 函式庫和以 Java 編寫的 Android 函式庫。</p>
<p>在新的工具的支持下，Dart 可以根據原始 C&#x2F;ObjC&#x2F;Swift&#x2F;Java&#x2F;Kotlin 程式碼的標題&#x2F;介面檔案自動建立具有 Dart 介面的繫結，以及這些繫結背後的跨語言互操作程式碼。有關使用此方法調用 Apple 的 <a href="https://developer.apple.com/documentation/coremotion">Core Motion API</a> 和 Android 的 <a href="https://developer.android.com/guide/health-and-fitness/health-connect">HealthConnect API</a> 的示範，請查看 <a href="https://github.com/flutter/samples/blob/main/experimental/pedometer/README.md">範例應用程式</a>。</p>
<p>這些新的互操作機制目前尚處於實驗階段，但我們希望它們至少能在 Dart 3.0 穩定版中達到 beta 品質。我們歡迎您在 <a href="https://github.com/dart-lang/jnigen">Java&#x2F;Kotlin</a> 或 <a href="https://github.com/dart-lang/ffigen">C&#x2F;ObjectiveC&#x2F;Swift</a> 的問題追蹤器中提供回饋。最後，我們也在努力改進 Dart 與 JavaScript 的互操作性；我們將在以後的部落格文章中提供更多相關資訊。</p>
<h3 id="可移植性方面的進展"><a href="#可移植性方面的進展" class="headerlink" title="可移植性方面的進展"></a>可移植性方面的進展</h3><p>Dart 已經透過我們的原生和網路編譯器支援廣泛的目標平台。在 Web 上，我們目前編譯為 JavaScript。在原生設備上，我們目前支援 Intel 32 位和 64 位，以及 ARM 32 位和 64 位架構。我們正在努力為許多新興的設備和標準新增支援，以確保 Dart 為未來的設備做好準備。</p>
<p>對於 Web，我們正在努力支援 <a href="https://webassembly.org/">WebAssembly</a> (Wasm)，它作為一個平台中立的二進制指令格式，在 <a href="https://caniuse.com/wasm">所有現代瀏覽器</a> 中都日趨成熟。我們希望 Wasm 能夠使 Dart Web 應用程式的啟動速度與原生設備上的應用程式一樣快。</p>
<p>另一個越來越受關注的平台架構是 <a href="https://en.wikipedia.org/wiki/RISC-V">RISC-V</a>，這是一種為廣泛使用而設計的開放標準指令集架構 (ISA)。Android 團隊最近就 <a href="https://www.youtube.com/watch?v=70O_RmTWP58">他們對 RISC-V 的支援工作</a> 進行了演講，我們認為它也將廣泛應用於嵌入式設備。Dart 3 alpha 中提供了對 RISC-V 的預覽支援。</p>
<p>最後，我們正在努力擴展我們目前對 ARM 設備的支援，使其也涵蓋 Windows 上的 ARM64 支援。</p>
<h3 id="Dart-3-的重大變更"><a href="#Dart-3-的重大變更" class="headerlink" title="Dart 3 的重大變更"></a>Dart 3 的重大變更</h3><p>介紹了新的 Dart 3 功能後，讓我們來看看我們為了更一致且更易於上手的 Dart 而進行的重大變更。</p>
<h4 id="Dart-3-類型系統：100-完善的空值安全"><a href="#Dart-3-類型系統：100-完善的空值安全" class="headerlink" title="Dart 3 類型系統：100% 完善的空值安全"></a>Dart 3 類型系統：100% 完善的空值安全</h4><p>我們在 2021 年的 <a href="https://medium.com/dartlang/announcing-dart-2-12-499a6e689c87">Dart 2.12</a> 中引入了完善的空值安全。在完善的類型系統中，您可以信任類型，這意味著當類型聲明變數不為空時，它就 <em>永遠</em> 不為空。這提高了生產力，因為可以在開發過程中而不是在生產環境中發現問題，並且使 Dart 編譯器能夠產生 <a href="https://medium.com/dartlang/dart-and-the-performance-benefits-of-sound-types-6ceedd5b6cdc">更小、更優化的程式碼</a>。正如我們在 <a href="https://medium.com/dartlang/the-road-to-dart-3-afdd580fbefa">12 月</a> 所討論的，Dart 的獨特之處在於將 100% 完善的空值安全引入到現有語言中。</p>
<p>自 Dart 2.12 起，空值安全一直是一個可以 <em>開啟</em> 或 <em>關閉</em> 的設定選項。<strong>在 Dart 3 中，所有程式碼都以 <em>開啟</em> 完善的空值安全運行</strong>。不再可以運行沒有空值安全的應用程式或在部分空值安全的混合模式下運行應用程式。</p>
<p>我們意識到停止支援不使用空值安全的運行可能會給現有的應用程式和套件帶來問題。但是，我們覺得現在是推進這一變更的合適時機。擁有一個單一的類型系統，其中空值安全始終開啟，可以減少開銷和複雜性。每當開發人員讀取一段 Dart 3 程式碼時，他們都可以放心，所有變數預設都不為空。在實作方面，Dart 的編譯器和運行時可以專注於支援單一的 Dart 程式碼運行方式，從而降低新增新功能的成本和複雜性。</p>
<p>Dart 生態系統已經展現出將現有程式碼遷移到空值安全的堅定決心和意願。截至今天，</p>
<ul>
<li>pub.dev 上排名前 250 位的套件中有 100% 支援空值安全</li>
<li>pub.dev 上排名前 1000 位的套件中有 98% 支援空值安全</li>
<li>只有 14% 的 <code>flutter run</code> 階段仍然在沒有空值安全的情況下運行</li>
</ul>
<p>感謝生態系統為遷移所做的努力！</p>
<h4 id="清理-Dart-3-核心函式庫和語言"><a href="#清理-Dart-3-核心函式庫和語言" class="headerlink" title="清理 Dart 3 核心函式庫和語言"></a>清理 Dart 3 核心函式庫和語言</h4><p>隨著 Dart 語言和類型系統的發展，我們核心函式庫中的一些 API 變得冗餘或不夠理想。為了確保 Dart 保持易於上手，我們進行了一些重大變更以清理不必要的 API。有關詳細資訊，請參閱 GitHub 問題，<a href="https://github.com/dart-lang/sdk/issues/34233">#34233</a> 和 <a href="https://github.com/dart-lang/sdk/issues/49529">#49529</a>。我們還移除了一個歷史語法，用於預設參數值（<a href="https://github.com/dart-lang/language/issues/2357">#2357</a>）。</p>
<p>隨著 Dart 3 alpha 的完成，我們的注意力現在轉向了 Dart 3 beta。在那裡，我們希望透過新增一些新的 API 來進一步改進 Dart 核心函式庫。您可以在 <a href="https://github.com/dart-lang/sdk/issues/49928">回饋問題</a> 中提供意見。</p>
<h4 id="準備您的程式碼以迎接-Dart-3-穩定版"><a href="#準備您的程式碼以迎接-Dart-3-穩定版" class="headerlink" title="準備您的程式碼以迎接 Dart 3 穩定版"></a>準備您的程式碼以迎接 Dart 3 穩定版</h4><p>一般來說，我們相信大多數已經遷移到使用空值安全（使用 Dart 2.12 或更高版本）的程式碼都可以在 Dart 3 上運行。但是，一小部分套件和應用程式可能會受到上面討論的重大變更的影響。因此，為了讓您有時間準備今年晚些時候發佈的 Dart 3 穩定版，我們沒有計劃在 Dart 3 alpha 之後對 Dart 語言和核心函式庫進行任何進一步的重大變更。</p>
<p>為了利用已經遷移到使用空值安全的程式碼，我們在 Dart 3 中實作了向後相容性，這將允許遷移的套件在 Dart 3 中使用 <code>pub get</code> 解析，即使它們的 SDK 版本限制為 <code>&gt;=2.12 &lt;3.0.0</code>，只要它們不依賴於其他已停止使用的核心函式庫 API 或語言功能。有關更多詳細資訊，包括如何使用本地安裝的 <a href="https://dart.dev/get-dart/archive#dart-3-alpha">Dart 3 alpha SDK</a> 進行測試，請參閱我們的 <a href="https://dart.dev/null-safety#dart-3-and-null-safety">Dart 3 空值安全文件</a>。</p>
<p>對於發佈在 <a href="https://pub.dev/">pub.dev</a> 儲存庫上的套件，我們使用 Dart 3 alpha 進行了分析，並使用 <strong>“Dart 3 ready”</strong> 標籤標記了通過的套件。這表示該套件很可能在今年晚些時候 Dart 3 穩定版發佈時可以運行。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*dB-NsWj2y3JljZZh" />
</figure>

<h4 id="Dart-3-工具清理"><a href="#Dart-3-工具清理" class="headerlink" title="Dart 3 工具清理"></a>Dart 3 工具清理</h4><p>在 Dart 3 發佈之前，我們進行了 <a href="https://github.com/dart-lang/sdk/issues/46100">許多變更</a>，將我們所有的終端開發者工具都移動到一個統一的 <code>dart</code> 開發者工具中，這使得 Dart 對新開發者來說更容易上手。我們計劃在接下來的幾個月中進行 <a href="https://github.com/dart-lang/sdk/issues/50707">額外的工具變更</a> 以進一步清理。希望這些變更不會造成太大的破壞，但在 Dart 3 beta 中，工具可能會出現一些小的損壞。</p>
<h3 id="後續步驟"><a href="#後續步驟" class="headerlink" title="後續步驟"></a>後續步驟</h3><p>Dart 3 alpha <a href="https://dart.dev/get-dart/archive#dart-3-alpha">今天已在 Dart 開發頻道和 Flutter master 頻道中提供</a>。我們邀請您試用它，無論是嘗試記錄和模式等新語言功能，還是嘗試我們新的直接存取平台互操作，或者測試您的應用程式和套件的 <a href="https://dart.dev/null-safety#dart-3-and-null-safety">Dart 3 相容性</a>。</p>
<p>我們將在接下來的幾個月中繼續改進 Dart 3，並希望在今年晚些時候發佈完整的 Dart 3 穩定版。請注意，大多數功能仍在開發中，因此在穩定版發佈之前可能會有所變更。在此之前，祝您使用 Dart 程式碼愉快！</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=f1458fb9d232" width="1" height="1" alt=""><hr><p><a href="https://medium.com/dartlang/dart-3-alpha-f1458fb9d232">介紹 Dart 3 alpha</a> 最初發佈在 Medium 的 <a href="https://medium.com/dartlang">Dart</a> 上，人們在那裡透過醒目顯示和回應這個故事來繼續討論。</p></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/50409cfb.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/50409cfb.html" class="post-title-link" itemprop="url">【文章翻譯】Announcing the Flutter News Toolkit</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-01-25 15:59:54" itemprop="dateCreated datePublished" datetime="2023-01-25T15:59:54+08:00">2023-01-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 16:55:14" itemprop="dateModified" datetime="2024-09-30T16:55:14+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="宣布-Flutter-新聞工具套件"><a href="#宣布-Flutter-新聞工具套件" class="headerlink" title="宣布 Flutter 新聞工具套件"></a>宣布 Flutter 新聞工具套件</h2><figure>
<img alt="This image shows Dash is reading newspaper" src="https://cdn-images-1.medium.com/max/1024/0*_Xb_zBUOvsH6CL9A" />
</figure>

<p>Google 的 Flutter 團隊與 <a href="https://newsinitiative.withgoogle.com/">Google 新聞倡議 (GNI)</a> 密切合作，共同打造了 <a href="https://github.com/flutter/news_toolkit">Flutter 新聞工具套件</a> - 一個免費的預建 Flutter 應用程式範本，用於加速新聞應用開發。一些早期採用者已經在短短 6 週的時間內建立了 iOS 和 Android 應用程式，聲稱與傳統的 iOS 和 Android 雙端開發相比，節省了高達 80% 的時間。</p>
<p>三個月前，我們在早期試用階段宣布了該工具套件，並收到了來自世界各地組織的壓倒性申請，因此我們很高興宣布 Flutter 新聞工具套件的第一個版本現在已正式推出！</p>
<h4 id="為什麼我們要建立-Flutter-新聞工具套件？"><a href="#為什麼我們要建立-Flutter-新聞工具套件？" class="headerlink" title="為什麼我們要建立 Flutter 新聞工具套件？"></a>為什麼我們要建立 Flutter 新聞工具套件？</h4><p>如今，大多數人使用智慧型手機獲取新聞。除了行動網站以外，行動應用程式可以成為新聞出版商與現有讀者互動、接觸新受眾以及創造新收入來源的絕佳方式。但設計、實作和部署行動應用程式需要時間和精力。</p>
<p>對於財力和人力資源有限的新聞出版商來說，從頭開始建立應用程式是一項重大工程。在 Google，我們希望幫助開發人員取得成功並提高生產力，因此我們正在投資一個工具套件，該工具套件提供了新聞出版商所需的所有常見功能，讓他們可以專注於區分他們的品牌和內容，而無需撰寫樣板程式碼。</p>
<h4 id="Flutter-新聞工具套件中包含哪些功能？"><a href="#Flutter-新聞工具套件中包含哪些功能？" class="headerlink" title="Flutter 新聞工具套件中包含哪些功能？"></a>Flutter 新聞工具套件中包含哪些功能？</h4><p>我們與全球業界專家和新聞出版商合作，以識別新聞應用程式範本的基本功能和使用者工作流程。有了這些預建的開箱即用功能，新聞出版商只需要連接他們的資料源並自訂 UI 以反映他們的品牌。</p>
<p>使用來自 <a href="https://news-consumer-insights.appspot.com/">新聞消費者洞察</a> 的最佳實務，Flutter 新聞工具套件包含以下功能：</p>
<ul>
<li><strong>使用者入門：</strong>透過推送通知權限重新吸引您的受眾；取得廣告追蹤權限</li>
<li><strong>帳戶建立&#x2F;登入：</strong>透過您的平台和使用者社群媒體網路進行驗證（例如 Google 登入）；建立無密碼帳戶</li>
<li><strong>內容供稿和內容頁面：</strong>顯示新聞文章、影片、圖片、廣告和電子報報名提示</li>
<li><strong>變現：</strong>輕鬆加入訂閱和不同的廣告格式</li>
<li><strong>搜尋：</strong>允許使用者透過關鍵字搜尋文章或點擊熱門搜尋項目</li>
<li><strong>設定：</strong>允許使用者針對通知、登入和廣告追蹤調整偏好設定</li>
</ul>
<p>您可以直接使用這些預整合功能，也可以輕鬆地修改並將它們替換為您偏好的其他功能。</p>
<figure>
<img alt="This image includes sample features provided in the Flutter News Toolkit" src="https://cdn-images-1.medium.com/max/1024/1*HOaHUtxwx2S4urCrztI88g.png" />
<figcaption><em>Flutter 新聞工具套件中提供的範例功能</em></figcaption>
</figure>

<h4 id="早期採用者"><a href="#早期採用者" class="headerlink" title="早期採用者"></a>早期採用者</h4><p>Flutter 新聞工具套件已經開始幫助全球各地的新聞出版商加速行動策略並實現業務目標。例如，</p>
<ul>
<li>The Standard（肯亞最大的新聞出版商之一）在建立 <a href="https://play.google.com/store/apps/details?id=ke.co.group.standard.thestandardkenya.thestandard&amp;hl=en&amp;gl=US">The Standard 新聞</a> 時，聲稱節省了高達 80% 的時間。</li>
<li>商業賦能公司 AnyMind Group 在 2 週內為 <a href="https://play.google.com/store/apps/details?id=co.th.khaosod.mobile&amp;hl=en&amp;gl=US">Khaosod Online</a>（泰國最大的新聞網站之一）建立了應用程式。</li>
<li><a href="https://play.google.com/store/apps/details?id=ng.boldsports.news.template&amp;hl=en&amp;gl=US">Boldsports</a>，一家尼日利亞的體育新聞新創公司，在短短幾天內就建立了一個早期版本。</li>
<li>Hespress（摩洛哥最大的新聞網站之一）在 6 週內完成了其 <a href="https://play.google.com/store/apps/details?id=com.hespress.english&amp;hl=en&amp;gl=US">英文應用程式</a> 開發，並報告說新應用程式在推出應用程式後的兩個月內， organically 獲得了 93% 的有機使用者，廣告收入增長了 50%。</li>
</ul>
<p>讓我們用他們自己的話聽聽他們的感受。</p>
<iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FYnJwjZ3jCTc%3Ffeature%3Doembed&amp;display_name=YouTube&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DYnJwjZ3jCTc&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FYnJwjZ3jCTc%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube" width="854" height="480" frameborder="0" scrolling="no"><a href="https://medium.com/media/d349741327c90c711abcbe3f978dd369/href">https://medium.com/media/d349741327c90c711abcbe3f978dd369/href</a></iframe>

<h4 id="開始使用"><a href="#開始使用" class="headerlink" title="開始使用"></a>開始使用</h4><p>如果您一直在等待存取 Flutter 新聞工具套件，現在可以開始了！您現在可以直接存取 <a href="https://github.com/flutter/news_toolkit">Github 上託管的程式碼</a>。</p>
<p>如果您有興趣採用新聞工具套件，但需要幫助自訂以滿足您的需求，我們也為您提供了支援！只需發送電子郵件至 <a href="mailto:flutter-news-core-group@google.com">flutter-news-core-group@google.com</a>，我們可以推薦值得信賴的 Flutter 代理商來幫助您使用 Flutter 新聞工具套件建立應用程式。</p>
<p>雖然 Flutter 新聞工具套件最初是為新聞組織設計的，但任何想要建立流程式內容的人都可以使用範例程式碼。無論您是想建立公司電子報應用程式（以 DiUS 建立的 <a href="https://play.google.com/store/apps/details?id=au.com.dius.news">Medius</a> 為例），還是社群媒體應用程式，您都可能會發現使用者登入、社群分享和內容供稿等預建功能對您的應用程式有所幫助。</p>
<p>我們計畫繼續改進 Flutter 新聞工具套件，同時從出版商和開發人員那裡獲取更多資訊。別忘了查看我們的 <a href="https://www.youtube.com/watch?v=dukRAS-OUMM">影片教學</a>，以瞭解 <a href="https://github.com/flutter/news_toolkit">Flutter 新聞工具套件</a> 的更多詳細資訊！</p>
<h3 id="常見問題解答"><a href="#常見問題解答" class="headerlink" title="常見問題解答"></a>常見問題解答</h3><h4 id="什麼是-Flutter？"><a href="#什麼是-Flutter？" class="headerlink" title="什麼是 Flutter？"></a>什麼是 Flutter？</h4><p>Flutter 是 Google 的開源 UI 工具套件，用於從單一程式碼庫建立適用於行動裝置、網頁和桌面的精美應用程式。Flutter 大幅減少了建立和發佈應用程式所需的時間。如今，Flutter 是 <a href="https://www.statista.com/statistics/869224/worldwide-software-developer-working-hours/">最受歡迎的跨平台</a> 開發框架，在全球擁有超過 300 萬名開發人員。目前有超過 700,000 個 Flutter 應用程式，包括阿里巴巴、BMW、Google Pay、PUBG、Shein 和微信。</p>
<h4 id="Flutter-容易學習嗎？"><a href="#Flutter-容易學習嗎？" class="headerlink" title="Flutter 容易學習嗎？"></a>Flutter 容易學習嗎？</h4><p>是的，對於那些了解 Java 等其他程式設計語言的開發人員來說，學習 Flutter 速度很快。此外，我們還為您提供了豐富的 <a href="https://flutter.dev/learn">學習資源</a> 來幫助您入門。</p>
<h4 id="我可以在應用程式中使用其他非-Google-服務，例如廣告、分析和訂閱嗎？"><a href="#我可以在應用程式中使用其他非-Google-服務，例如廣告、分析和訂閱嗎？" class="headerlink" title="我可以在應用程式中使用其他非 Google 服務，例如廣告、分析和訂閱嗎？"></a>我可以在應用程式中使用其他非 Google 服務，例如廣告、分析和訂閱嗎？</h4><p>當然可以！Flutter 新聞工具套件只是一個範例。您不需要使用任何您不想要的服務。事實上，很容易移除或將現有整合替換為其他服務。例如，如果您想使用非 Google 廣告服務，您可以在 pub.dev 上找到其他 <a href="https://pub.dev/packages?q=platform:android+platform:ios+ads">套件</a>。</p>
<h4 id="我需要做多少工作才能發佈應用程式？"><a href="#我需要做多少工作才能發佈應用程式？" class="headerlink" title="我需要做多少工作才能發佈應用程式？"></a>我需要做多少工作才能發佈應用程式？</h4><p>雖然新聞範本可以降低建立新聞行動應用程式的入門門檻，但此解決方案仍然需要 Flutter 開發工作。範本不支援非技術使用者透過無程式碼或所見即所得功能或工具（例如儀表板）來修改應用程式品牌和樣式。</p>
<p>我們已繪製出一個高層級的部署流程圖，假設有 2 名 Flutter 工程師參與專案。例如，Hespress 等早期採用者在 6 週內完成了應用程式開發。但我們也有像 AnyMind 這樣的客戶，他們只用 1 名工程師在 2 週內就推出了應用程式。</p>
<figure>
<img alt="This image maps out the deployment process at a high-level" src="https://cdn-images-1.medium.com/max/1024/0*n4yFaH37OzEQ9Ys8" />
<figcaption><em>高層級的部署流程</em></figcaption>
</figure>

<h4 id="如果我沒有內部的開發團隊，如何使用範本？"><a href="#如果我沒有內部的開發團隊，如何使用範本？" class="headerlink" title="如果我沒有內部的開發團隊，如何使用範本？"></a>如果我沒有內部的開發團隊，如何使用範本？</h4><p>我們可以推薦值得信賴的 Flutter 代理商，他們可以幫助您將範本完善。您可以發送電子郵件至 <a href="mailto:flutter-news-core-group@google.com">flutter-news-core-group@google.com</a> 獲取更多資訊。聲明：Google 與這些代理商無關，我們也不從他們那裡分享任何收入。</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=180a0d32c012" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/announcing-the-flutter-news-toolkit-180a0d32c012">宣布 Flutter 新聞工具套件</a> 最初發佈在 <a href="https://medium.com/flutter">Flutter</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/9bed2352.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/9bed2352.html" class="post-title-link" itemprop="url">【文章翻譯】Better isolate management with Isolate.run()</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-01-24 19:46:19" itemprop="dateCreated datePublished" datetime="2023-01-24T19:46:19+08:00">2023-01-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-12-26 19:28:05" itemprop="dateModified" datetime="2024-12-26T19:28:05+08:00">2024-12-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Dart/" itemprop="url" rel="index"><span itemprop="name">Dart</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動翻譯產生】</p>
<h2 id="使用-Isolate-run-更好地管理-Isolate"><a href="#使用-Isolate-run-更好地管理-Isolate" class="headerlink" title="使用 Isolate.run() 更好地管理 Isolate"></a>使用 Isolate.run() 更好地管理 Isolate</h2><p>Dart 2.19 引入了一個新函數，可以讓您僅用一行代碼即可輕鬆實現併發。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/597/0*Bt-V4nlGjNKquFhK" />
<figcaption>展示新 Isolate.run() 函數速度的基準測試</figcaption>
</figure>

<p>所有 Dart 程式碼都在 isolate 中運行。是否要實作多個 isolate 以在 Dart 程式中啟用 <a href="https://dart.dev/guides/language/concurrency">併發</a> 取決於您。<em>如何</em>實作多個 isolate 則取決於 Dart 團隊，在 Dart 2.19 中，我們對此流程進行了巨大的升級，我們很興奮能與大家分享。來認識一下 <code>Isolate.run()</code> 吧！</p>
<p><code>run()</code> 將設定和管理 isolate 的所有複雜性完全抽象成單個函數調用。使用一些基本元素來使用 isolate 已經有一段時間了。但是，即使 isolate 有了所有<a href="https://medium.com/dartlang/dart-2-15-7e7a598e508a#:~:text=publishers%2C%20and%20more.-,Fast%20concurrency%20with%20worker%20isolates,-Just%20about%20all">最近的效能改進</a>，這個過程充其量也只是繁瑣的，最糟糕的情況下則容易出錯。</p>
<p>為了讓您了解 <code>run()</code> 的改進程度，本文將逐步分解先前使用低階基本元素建構功能的方法。然後，我們將其與使用 <code>Isolate.run()</code> 進行對比，並向您展示它在內部的運作方式。即使您以前從未使用過 isolate，我們也相信 <code>run()</code> 會讓您興奮地想要嘗試它們！</p>
<h3 id="Isolate"><a href="#Isolate" class="headerlink" title="Isolate"></a>Isolate</h3><p>Isolate 是一個相當簡單的概念。<a href="https://medium.com/dartlang/dart-asynchronous-programming-isolates-and-event-loops-bffc3e296a6a">Isolate</a> 本質上是 Dart 中的單個執行緒。它們讓您可以並行執行部分程式碼。您可以啟動新的並行執行（數量不限），並直接從 <code>main</code>（主執行緒或 <a href="https://dart.dev/guides/language/concurrency#the-main-isolate">main isolate</a>）告訴它們要做什麼。Isolate 不共享記憶體；相反，它們透過來回傳遞訊息來進行通訊。因此，您不必擔心典型的多執行緒問題，例如競爭條件或互斥鎖和鎖。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/613/0*eCogwJXZtpbg5Hbq.png" />
</figure>

<p>聽起來很棒！但是如何使用它們呢？在 <code>Isolate.run()</code> 之前，事情變得棘手起來。</p>
<p><a href="https://api.dart.dev/stable/dart-isolate/Isolate-class.html">Isolate API</a> 由低階基本元素組成，這些基本元素提供了廣泛的功能。當您需要自訂 isolate 的功能時，這種粒度非常棒。但是，當 <em>必須</em> 使用 isolate 時，這種粒度就不那麼好了。特別是因為幾乎所有 isolate 的使用案例都需要相同的設定和管理基本配置。這基本上意味著要將每個實作細節都公開給 Dart 的使用者自行處理。</p>
<p>讓我們來看看典型的 isolate 設定，以更好地理解 <code>Isolate.run()</code> 所解決的繁瑣過程。</p>
<h3 id="使用-Isolate（之前）"><a href="#使用-Isolate（之前）" class="headerlink" title="使用 Isolate（之前）"></a>使用 Isolate（之前）</h3><p>您可以將 <a href="https://api.dart.dev/stable/dart-isolate/Isolate/spawn.html">Isolate.spawn()</a> 視為 isolate 的舊起點。Flutter 的 <code>compute</code> 函數就是建立在 <code>spawn()</code> 之上的。它接受一個方法作為其入口點參數，以及該方法的任何參數，以及 isolate 本身的其他配置。過去，此入口點只能是頂級或靜態方法。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Isolate.spawn(_readAndParseJson, filename);</span><br></pre></td></tr></table></figure>

<p>Isolate 建立完成！開玩笑的。還差得遠呢。</p>
<p>調用 <code>spawn</code> 不會返回任何實際可用的東西。它只返回一個 isolate 物件，該物件只是確認 isolate 已啟動。</p>
<p>除了建立時傳遞的初始參數之外，main isolate 和 spawned isolate（由 <code>spawn</code> 建立的 isolate）無法直接通訊。實際上，即使您不需要從 spawned isolate 返回任何計算結果，您仍然需要某種驗證來確認計算成功，因此您總是需要返回一條訊息。</p>
<p>為了啟用通訊，您必須設定埠。在調用 <code>spawn</code> 之前，您需要建立一個 <code>ReceivePort</code> 物件。<code>ReceivePort</code> 物件的 <code>sendPort</code> 成員作為 <code>spawn</code> 的另一個參數傳遞給 spawned isolate。</p>
<p>這意味著您傳遞給 <code>spawn</code> 的函數必須 <em>專門</em> 配置為使用該 <code>sendPort</code> 執行某些操作。換句話說，您不能僅將現有函數與 isolate 一起使用。因此，您不要將僅讀取和解析 JSON 檔案的常規函數傳遞給 <code>spawn</code>，而是建立如下內容：</p>
<p>您的專用、isolate 友好型 JSON 解碼函數可以簡單地「返回結果」，然後就完成了，對嗎？不完全是。結果需要透過 <code>responsePort</code> 傳送。這就是 isolate 與埠通訊的方式。您可以使用另一個基本元素 <a href="https://api.dart.dev/stable/dart-isolate/Isolate/exit.html">Isolate.exit()</a> 來有效地返回結果並同時關閉 spawned isolate：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Isolate.exit(responsePort, result);</span><br></pre></td></tr></table></figure>

<p><code>exit()</code> 函數將儲存 spawned isolate 中訊息的記憶體 <em>傳輸</em> 到 main isolate（而不是複製它），並安全地關閉 isolate。</p>
<p>讓我們把這些都串在一起。由於此範例中的 <code>result</code> 是解析的 JSON，您可能想要稍微解構它才能實際使用它。為了程式碼的簡潔性，我們應該將建立 <code>receivePort</code> 和 isolate 並等待它們的回應的三行程式碼放在它們自己的函數中，而不是直接放在 <code>main()</code> 中。</p>
<p>正在完成的工作相對簡單。正是實作細節的暴露讓它 <em>感覺</em> 起來很複雜，例如用於訊息傳遞的埠，以及需要一個專用函數來處理埠，而該函數與 isolate 無關。</p>
<h3 id="錯誤處理"><a href="#錯誤處理" class="headerlink" title="錯誤處理"></a>錯誤處理</h3><p>到目前為止的範例 <em>仍然</em> 不是一個真正的「完整」、可投入生產的實作。如果您不做任何錯誤處理，那將對您自己不利，但它通常在已經相當多的流程中被遺忘為一個額外的步驟。例如，如果沒有任何錯誤處理，未捕獲的異步錯誤導致 isolate 崩潰，您將不知道導致錯誤的原因，甚至不知道 <em>發生了什麼事</em>。</p>
<p>涵蓋 isolate 的所有錯誤處理可能性將會很廣泛，但通常需要對程式碼進行一些額外的補充。</p>
<p>您至少可以將 <code>errorsAreFatal</code>、<code>onExit</code> 和 <code>onError</code> 參數加入到 <code>spawn</code> 調用中：</p>
<p>這可以確保即使 spawned isolate 在沒有傳送結果的情況下終止，或者發生任何未捕獲的錯誤，<code>resultPort</code> 都會收到一條訊息。將錯誤設定為致命意味著未捕獲的錯誤會退出 isolate 作為安全預防措施，以確保它一定會終止。</p>
<p><code>onExit</code> 參數使 isolate 在退出時向埠傳送 <code>null</code>。<code>onError</code> 參數使未捕獲的錯誤向埠傳送兩個字串的列表（錯誤和堆疊追蹤的 <code>toString</code>）。</p>
<p>重複使用結果埠可以避免建立更多埠，因此您只需在一个地方查找訊息。但這也意味著您需要區分 <code>onExit</code> 和 <code>onError</code> 訊息與結果值。在這裡，我們假設 JSON 必須是一個 <code>Map</code>，因此它不能是列表或 <code>null</code>。否則，您還必須將結果包裝在可以識別的內容中。您必須在埠訊息之上建立一個（微不足道的）訊息協定。</p>
<p>除此之外，您還可以檢查回應中的特定錯誤。其中一種情況是檢查 <code>resultPort</code> 是否為 <code>null</code>，這意味著 isolate 在沒有傳送結果的情況下終止：</p>
<p>另一種情況是檢查結果是否為列表，這意味著發生了未捕獲的錯誤：</p>
<p>然後，最後，處理實際的結果：</p>
<p>無論如何，您都希望將 <code>spawn</code> 放在 <code>try</code> 塊中，以檢查將入口點傳送到新的 isolate 是否失敗。如果失敗了，結果埠將不會收到任何訊息，並且需要關閉：</p>
<p>提供最基本的錯誤處理可以確保結果埠始終關閉，並且 *<code>spawnAndReceieve</code> 始終完成，無論 spawned isolate 如何退出。您還可以做得 <em>更好</em>，例如，透過捕獲錯誤和堆疊追蹤並將它們作為實際物件傳送回去，而不僅僅是像 <code>onError</code> 處理程式那樣的字串。</p>
<p>錯誤處理顯然會引入很多變化，以及決定如何處理它以及要考慮哪些因素的心理開銷。可以理解的是，它通常被忽略在基本 isolate 設定之外。</p>
<h3 id="使用-Isolate（之後）"><a href="#使用-Isolate（之後）" class="headerlink" title="使用 Isolate（之後）"></a>使用 Isolate（之後）</h3><p><code>Isolate.run()</code> 使用您以前必須自己使用的基本元素，在單個函數調用中設定 isolate 實作的所有部分：</p>
<p>沒有埠、沒有單獨的生成、退出或錯誤處理，也沒有特殊的返回結構。也許最好的部分是，您傳遞給 <code>run</code> 的入口點可以是任何現有函數：</p>
<p>此範例顯示了一個 <em>異步</em> 函數，但 <code>run</code> 可以同樣輕鬆地執行 <em>同步</em> 函數。<code>run</code> 函數本身始終異步返回，這才是最重要的。</p>
<p>入口點也可以是 <em>函數表達式</em>，直接在您調用 <code>run</code> 的位置內聯編寫。Isolate 和在其上編寫的任何更高級別的 API 不再局限於僅運行靜態或頂級函數。</p>
<p>不再需要額外的訊息參數，您可以避免在列表等資料結構中打包和解包參數。</p>
<p>您根本不需要考慮太多錯誤處理。<code>run</code> 函數結合了本地和遠端錯誤捕獲、處理和跨 isolate 通訊，並將結果公開為單個普通的（異步）錯誤，您可以在標準的 <code>try</code>&#x2F;<code>catch</code> 中捕獲它。您可以忘記 isolate，並將其視為普通的函數。</p>
<p><code>Isolate.run()</code> 可以讓程式碼更加簡潔和符合人體工程學。Flutter 的 <code>compute</code> 函數甚至也轉而使用 <code>run</code> 而不是 <code>spawn</code>！</p>
<h3 id="Isolate-run-內部"><a href="#Isolate-run-內部" class="headerlink" title="Isolate.run() 內部"></a>Isolate.run() 內部</h3><p>看看 <a href="https://api.dart.dev/dev/3.0.0-125.0.dev/dart-isolate/Isolate/run.html#implementation:~:text=isolate%20for%20debugging.-,Implementation,-%40Since(%222.19%22">run</a> 的實作。它深入研究了所有與 isolate 相關的低階 API（這在以前是您的工作），以構建一個「完美」、全面的 isolate 設定。它接受要執行的 <code>computation</code> 方法，並設定所有埠及其返回值，以考慮 isolate 之間的有效訊息傳遞。</p>
<p>對每個潛在情況都進行了 <em>徹底的</em> 錯誤處理。<code>run</code> 函數會檢查 isolate 是否在完成計算之前就已終止。如果計算拋出錯誤，則 isolate 將終止，並將相同的錯誤拋出到 main isolate。</p>
<p>如果發生未捕獲的異步錯誤，則 isolate 將終止，並將錯誤異步報告給 main isolate。如果 main isolate 首先終止，則 spawned isolate 將終止，並將情況視為未捕獲的異步錯誤。</p>
<p>最後，<code>run</code> 總是使用 <code>exit</code> 來安全地關閉。這意味著資料可以有效地在 isolate 之間傳輸，而無需實際複製它。</p>
<h3 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h3><p><code>run</code> 函數非常適合啟動一個計算並等待結果。如果您想為 <code>run</code> 未涵蓋的內容（例如可以多次傳送和接收訊息的 <a href="https://github.com/dart-lang/samples/blob/master/isolates/bin/long_running_isolate.dart">長時間運行的 isolate</a>）建構自己的 isolate 設定，則基本元素仍然可用。但是，在大多數情況下，應該使用單個 <code>run</code> 語句替換 <code>spawn</code> 及其所有支援配置，而不是任何其他配置。</p>
<p>如果您在 <code>run</code> 之前從未嘗試過 isolate 管理，那麼很難相信所有這些功能以前都必須由使用者來實作！<code>Isolate.run()</code>（在 Dart 2.19 和 Flutter 3.7 中可用）使程式碼更加符合人體工程學，並使 isolate 更易於使用。您將如何利用 <code>run</code> 節省的時間呢？</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=547ef3d6459b" width="1" height="1" alt=""><hr><p><a href="https://medium.com/dartlang/better-isolate-management-with-isolate-run-547ef3d6459b">使用 Isolate.run() 更好地管理 Isolate</a> 最初發佈在 Medium 的 <a href="https://medium.com/dartlang">Dart</a> 上，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/45b0289c.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/45b0289c.html" class="post-title-link" itemprop="url">【文章翻譯】What’s new in Flutter 3.7</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-01-24 19:32:28" itemprop="dateCreated datePublished" datetime="2023-01-24T19:32:28+08:00">2023-01-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 16:55:14" itemprop="dateModified" datetime="2024-09-30T16:55:14+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="Flutter-3-7-新功能：Material-3-更新、iOS-改進等等！"><a href="#Flutter-3-7-新功能：Material-3-更新、iOS-改進等等！" class="headerlink" title="Flutter 3.7 新功能：Material 3 更新、iOS 改進等等！"></a>Flutter 3.7 新功能：Material 3 更新、iOS 改進等等！</h2><p>我們很高興在 2023 年開始時發佈 Flutter 3.7！在 Flutter 3.7 中，我們作為社群，繼續改進框架，加入了一些很棒的新功能，例如：建立自訂選單列、階層式選單、更好地支援國際化的工具、新的除錯工具等等。</p>
<p>我們還繼續完善一些功能，例如全局選取、透過 Impeller 進行更快渲染、DevTools，以及始終如一的效能！</p>
<p>讓我們一起踏上快速旅程，探索 Flutter 3.7 中的新功能吧！</p>
<h3 id="增強的-Material-3-支援"><a href="#增強的-Material-3-支援" class="headerlink" title="增強的 Material 3 支援"></a>增強的 Material 3 支援</h3><p>Material 3 支援在 3.7 中得到了極大的增強，以下 Widget 已遷移：</p>
<ul>
<li><a href="https://api.flutter.dev/flutter/material/Badge-class.html">Badge</a></li>
<li><a href="https://api.flutter.dev/flutter/material/BottomAppBar-class.html">BottomAppBar</a></li>
<li><a href="https://api.flutter.dev/flutter/material/FilledButton-class.html">Filled</a> 和 <a href="https://api.flutter.dev/flutter/material/FilledButton/FilledButton.tonal.html">Filled Tonal</a> 按鈕</li>
<li><a href="https://api.flutter.dev/flutter/material/SegmentedButton-class.html">SegmentedButton</a></li>
<li><a href="https://api.flutter.dev/flutter/material/Checkbox-class.html">Checkbox</a></li>
<li><a href="https://api.flutter.dev/flutter/material/Divider-class.html">Divider</a></li>
<li><a href="https://api.flutter.dev/flutter/material/MenuBar-class.html">Menus</a></li>
<li><a href="https://api.flutter.dev/flutter/material/DropdownMenu-class.html">DropdownMenu</a></li>
<li><a href="https://api.flutter.dev/flutter/material/Drawer-class.html">Drawer</a> 和 <a href="https://api.flutter.dev/flutter/material/NavigationDrawer-class.html">NavigationDrawer</a></li>
<li><a href="https://api.flutter.dev/flutter/material/ProgressIndicator-class.html">ProgressIndicator</a></li>
<li><a href="https://api.flutter.dev/flutter/material/Radio-class.html">Radio</a> 按鈕</li>
<li><a href="https://api.flutter.dev/flutter/material/Slider-class.html">Slider</a></li>
<li><a href="https://api.flutter.dev/flutter/material/SnackBar-class.html">SnackBar</a></li>
<li><a href="https://api.flutter.dev/flutter/material/TabBar-class.html">TabBar</a></li>
<li><a href="https://api.flutter.dev/flutter/material/TextField-class.html">TextFields</a> 和 <a href="https://api.flutter.dev/flutter/material/InputDecorator-class.html">InputDecorator</a></li>
<li><a href="https://api.flutter.dev/flutter/widgets/Banner-class.html">Banner</a></li>
</ul>
<p>若要使用這些新功能，只需在應用程式的 <a href="https://api.flutter.dev/flutter/material/ThemeData-class.html">ThemeData</a> Widget 中開啟 <a href="https://api.flutter.dev/flutter/material/ThemeData/useMaterial3.html">useMaterial3</a> 旗標。若要充分利用 M3 支援，您需要完整的 M3 色彩方案。您可以自己提供，使用新的 <a href="https://m3.material.io/theme-builder#/custom">主題建構工具</a>，或者 Flutter 可以使用 <a href="https://api.flutter.dev/flutter/material/ThemeData-class.html">ThemeData</a> 建構函數的 <code>colorSchemeSeed</code> 參數從單個種子顏色為您生成一個：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MaterialApp(</span><br><span class="line">  theme: ThemeData(</span><br><span class="line">     useMaterial3: <span class="keyword">true</span>,</span><br><span class="line">    colorSchemeSeed: Colors.green,</span><br><span class="line">  ),</span><br><span class="line">  <span class="comment">// …</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>有關 Flutter 的 Material 3 支援的最新資訊，請查看 GitHub 上的 <a href="https://github.com/flutter/flutter/issues/91605">總體議題</a>。</p>
<p>若要親自試用這些元件，請查看 <a href="https://flutter.github.io/samples/web/material_3_demo/">互動式演示</a>，展示了所有新的 M3 功能：</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*AsyYVtFMXY0iS6gLz_O4BA.png" />
</figure>

<h3 id="選單列和階層式選單"><a href="#選單列和階層式選單" class="headerlink" title="選單列和階層式選單"></a>選單列和階層式選單</h3><p>Flutter 現在可以建立選單列和階層式上下文選單。</p>
<p>對於 macOS，可以使用 <code>PlatformMenuBar</code> Widget 建立選單列，它定義由 macOS 而不是 Flutter 渲染的平台原生選單列。</p>
<p>而且，對於所有平台，您都可以定義一個 <a href="https://m3.material.io/components/menus/overview">Material Design 選單</a>，它提供階層式選單列 (<a href="https://api.flutter.dev/flutter/material/MenuBar-class.html">MenuBar</a>)，或者由另一個使用者介面元素觸發的獨立階層式選單 (<a href="https://api.flutter.dev/flutter/material/MenuAnchor-class.html">MenuAnchor</a>)。這些選單完全可自訂，選單項目可以是自訂 Widget，或者您可以使用新的選單項目 Widget (<a href="https://api.flutter.dev/flutter/material/MenuItemButton-class.html">MenuItemButton</a>、<a href="https://api.flutter.dev/flutter/material/SubmenuButton-class.html">SubmenuButton</a>)。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/683/0*8T3nUAK-8AUveoD2" />
</figure>

<h3 id="Impeller-預覽"><a href="#Impeller-預覽" class="headerlink" title="Impeller 預覽"></a>Impeller 預覽</h3><p>團隊很高興地宣布，新的 <a href="https://github.com/flutter/engine/tree/main/impeller">Impeller 渲染引擎</a> 已在 stable channel 上的 iOS 上 <a href="https://github.com/flutter/engine/tree/main/impeller#try-impeller-in-flutter">準備好進行預覽</a>。我們相信 Impeller 的效能對於大多數應用程式來說將會達到或超過 Skia 渲染器，至於保真度，Impeller 實作了所有功能，只有一些很少使用的角落案例除外。我們預計將在即將到來的穩定版本中將 Impeller 設為 iOS 上的預設渲染器，因此請在 GitHub 上繼續提交 <a href="https://github.com/flutter/flutter/issues">Impeller 回饋</a>。</p>
<p>儘管我們越來越有信心 iOS 上的 Impeller 將滿足幾乎所有現有 Flutter 應用程式的渲染需求，但 API 涵蓋範圍仍然存在一些差距。在 <a href="https://github.com/flutter/flutter/wiki/Impeller#status">Flutter wiki</a> 上列出了少數幾個剩餘的差距。使用者也可能會注意到 Skia 和 Impeller 之間在渲染方面的細微視覺差異。這些細微的差異可能是錯誤，因此請勿猶豫 <a href="https://github.com/flutter/flutter/issues">提交議題</a>。</p>
<p>社群的貢獻極大地加速了我們在 Impeller 上的進展。特別是 GitHub 使用者 <a href="https://github.com/ColdPaleLight">ColdPaleLight</a>、<a href="https://github.com/guoguo338">guoguo338</a>、<a href="https://github.com/JsouLiang">JsouLiang</a> 和 <a href="https://github.com/magicianA">magicianA</a> 為此版本貢獻了 291 個（&gt;12%）與 Impeller 相關的修補程式中的 37 個。謝謝！</p>
<p>我們繼續在 Impeller 的 Vulkan 後端上取得進展（在較舊的設備上回退到 OpenGL），但 Android 上的 Impeller 尚未準備好進行預覽。Android 支援正在積極開發中，我們希望在將來的版本中分享更多相關資訊，包括更多關於桌面和 Web 支援的資訊。</p>
<p>在 GitHub 上的 <a href="https://github.com/orgs/flutter/projects/21">Impeller 專案看板</a> 上關注我們的進展。</p>
<h3 id="iOS-版本驗證"><a href="#iOS-版本驗證" class="headerlink" title="iOS 版本驗證"></a>iOS 版本驗證</h3><p>當您發佈 iOS 應用程式時，<a href="https://docs.flutter.dev/deployment/ios#review-xcode-project-settings">更新設定的清單</a> 可以確保您的應用程式已準備好提交到 App Store。</p>
<p><code>flutter build ipa</code> 命令現在會驗證其中一些設定，並在發佈之前通知您是否需要對應用程式進行更改。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/699/0*nMxlWBkYUzlFdnI2" />
</figure>

<h3 id="DevTools-更新"><a href="#DevTools-更新" class="headerlink" title="DevTools 更新"></a>DevTools 更新</h3><p>在此版本中，有幾個新的工具功能和整體改進可以嘗試。DevTools 記憶體除錯工具已徹底改版。有三個新的功能標籤，<strong>剖析</strong>、<strong>追蹤</strong> 和 <strong>差異</strong>，它們支援所有以前支援的記憶體除錯功能，並為您的除錯工作添加了更多功能。新功能包括能夠按類別和記憶體類型分析應用程式目前的記憶體配置、調查在運行時哪些程式碼路徑正在為一組類別配置記憶體，以及比較記憶體快照以了解兩個時間點之間的記憶體管理。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*i5K5F5bxN_5X0EAi" />
</figure>

<p>所有這些新的記憶體功能都已記錄在 <a href="https://docs.flutter.dev/development/tools/devtools/memory">docs.flutter.dev</a> 上，因此請查看文件以獲取更多資訊。</p>
<p>效能頁面也有一些值得注意的新功能。效能頁面頂部的一個新的 <strong>畫面分析</strong> 標籤提供了所選 Flutter 畫面的洞察力。洞察力可能包括如何更詳細地追蹤 Flutter 畫面中昂貴部分的建議，或者有關在 Flutter 畫面中檢測到的昂貴操作的警告。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1014/0*op4bHcx7HvorMKSE" />
</figure>

<p>這只是幾個亮點，但此版本包含若干錯誤修復和改進，超出此處提到的功能，包括針對 Inspector、網路分析工具和 CPU 分析工具的一些重要錯誤修復。若要更深入地了解更新列表，請查看 DevTools 變更的發行備註，這些變更已加入 Flutter 3.7。</p>
<ul>
<li><a href="https://docs.flutter.dev/development/tools/devtools/release-notes/release-notes-2.17.0">Flutter DevTools 2.17.0 發行備註</a></li>
<li><a href="https://docs.flutter.dev/development/tools/devtools/release-notes/release-notes-2.18.0">Flutter DevTools 2.18.0 發行備註</a></li>
<li><a href="https://docs.flutter.dev/development/tools/devtools/release-notes/release-notes-2.19.0">Flutter DevTools 2.19.0 發行備註</a></li>
<li><a href="https://docs.flutter.dev/development/tools/devtools/release-notes/release-notes-2.20.0">Flutter DevTools 2.20.0 發行備註</a></li>
</ul>
<h3 id="自訂上下文選單"><a href="#自訂上下文選單" class="headerlink" title="自訂上下文選單"></a>自訂上下文選單</h3><p>您現在可以在 Flutter 應用程式中的任何位置建立自訂上下文選單。您也可以使用它們自訂內建的上下文選單。</p>
<p>例如，您可以將「發送電子郵件」按鈕加入到使用者選取電子郵件地址時出現的預設文字選取工具列中 (<a href="https://github.com/flutter/samples/blob/main/experimental/context_menus/lib/email_button_page.dart">程式碼</a>)。查看 <a href="https://api.flutter.dev/flutter/cupertino/CupertinoTextField/contextMenuBuilder.html">contextMenuBuilder</a> 參數，該參數已加入預設顯示上下文選單的現有 Widget 中，例如 <code>TextField</code>。您可以從 <code>contextMenuBuilder</code> 返回任何您想要的 Widget，包括修改預設的平台自適應上下文選單。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/800/0*dYBqWaVEAscMJ2Yz" />
</figure>

<p>此新功能也適用於文字選取之外。例如，您可以建立一個 <code>Image</code> Widget，當右鍵點擊或長按時顯示「儲存」按鈕 (<a href="https://github.com/flutter/samples/blob/main/experimental/context_menus/lib/image_page.dart">程式碼</a>)。使用 <a href="https://api.flutter.dev/flutter/widgets/ContextMenuController-class.html">ContextMenuController</a> 在應用程式中的任何位置顯示目前平台的預設上下文選單或自訂上下文選單。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/800/0*uq8A_Zq5BM2DGDRT" />
</figure>

<p>在 <a href="https://github.com/flutter/samples/tree/main/experimental/context_menus">Flutter 的樣本儲存庫</a> 中查看完整的範例套件。</p>
<h3 id="CupertinoListSection-和-CupertinoListTile-Widget"><a href="#CupertinoListSection-和-CupertinoListTile-Widget" class="headerlink" title="CupertinoListSection 和 CupertinoListTile Widget"></a>CupertinoListSection 和 CupertinoListTile Widget</h3><p>感謝 Github 使用者 <a href="https://github.com/campovski">Campovski</a> 的努力，Cupertino 有兩個新的 Widget：<a href="https://github.com/flutter/flutter/pull/78732">CupertinoListSection</a> 和 <a href="https://github.com/flutter/flutter/pull/78732">CupertinoListTile</a>，用於以 iOS 風格顯示可捲軸的 Widget 列表。它們是 Material 中 <code>ListView</code> 和 <code>ListTile</code> 的 Cupertino 版本。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*7rMA1GAEoQxfkwYC" />
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*oLSR3-_9jQzCozYV" />
</figure>

<h3 id="捲軸改進"><a href="#捲軸改進" class="headerlink" title="捲軸改進"></a>捲軸改進</h3><p>這個版本包含了一些 <a href="https://github.com/flutter/flutter/issues?page=1&amp;q=is:issue+is:closed+closed:2022-07-11..2022-11-30+label:%22f:+scrolling%22+reason:completed">捲軸更新</a>：針對觸控板互動的潤色和完善、新的 Widget（例如 <code>Scrollbars</code> 和 <code>DraggableScrollableSheet</code>），以及改進了在捲軸上下文中選取文字的處理方式。</p>
<p>值得注意的是，MacOS 應用程式現在將會在新增 <a href="https://github.com/flutter/flutter/pull/108298">新的捲軸物理</a> 以匹配桌面平台後，體驗到更高的保真度。</p>
<p>新的 <a href="https://github.com/flutter/flutter/pull/112982">AnimatedGrid</a> 和 <code>SliverAnimatedGrid</code> Widget 會為加入（或移除）列表的項目製作動畫。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/0*SY_JFBrqhg_Gs64Z" />
</figure>

<p>最後，我們 <a href="https://github.com/flutter/flutter/pull/108706">修復了若干捲軸 Widget 的建構函數中的回歸</a>，例如 <code>ListView</code>。在 Flutter 框架的 NNBD 遷移期間，<code>itemBuilder</code>（允許使用者按需提供 Widget）被遷移到 <code>IndexedWidgetBuilder</code>。這意味著 <code>itemBuilder</code> 不再可以返回 <code>null</code>，而 <code>null</code>（在過去）可以用於表示已到達列表的末尾。此功能已透過 <code>NullableIndexedWidgetBuilder</code> 恢復。感謝 @rrousselGit 注意到這一點——遷移幾年後——並發送了修復程式！</p>
<h3 id="國際化工具和文件"><a href="#國際化工具和文件" class="headerlink" title="國際化工具和文件"></a>國際化工具和文件</h3><p>國際化支援已完全改版！我們已完全重寫 <code>gen-l10n</code> 工具，以支援：</p>
<ul>
<li>描述性語法錯誤。</li>
<li>包含巢狀&#x2F;多個複數、選擇和佔位符的複雜訊息。</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*VSZRJbLyqlfekARB" />
</figure>

<p>有關更多資訊，請查看更新後的 <a href="https://docs.flutter.dev/development/accessibility-and-localization/internationalization">國際化 Flutter 應用程式</a> 頁面。</p>
<h3 id="全局選取改進"><a href="#全局選取改進" class="headerlink" title="全局選取改進"></a>全局選取改進</h3><p><code>SelectionArea</code> 現在支援鍵盤選取。您可以使用鍵盤快捷鍵（例如 <code>shift+right</code>）擴展現有選取範圍。</p>
<iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fplayer.vimeo.com%2Fvideo%2F792060738%3Fh%3D8caf43dccd%26app_id%3D122963&amp;dntp=1&amp;display_name=Vimeo&amp;url=https%3A%2F%2Fvimeo.com%2F792060738&amp;image=https%3A%2F%2Fi.vimeocdn.com%2Fvideo%2F1594192506-31e585daa093e70f28f72c26dbc4c35a48d3c315abffafcb24507ea1b387ec77-d_640&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=vimeo" width="796" height="616" frameborder="0" scrolling="no"><a href="https://medium.com/media/d1a576670ac8dada616a26ca68437c2b/href">https://medium.com/media/d1a576670ac8dada616a26ca68437c2b/href</a></iframe>

<h3 id="背景隔離區"><a href="#背景隔離區" class="headerlink" title="背景隔離區"></a>背景隔離區</h3><p>現在，<a href="https://docs.flutter.dev/development/platform-integration/platform-channels">平台通道</a> 可以從任何 <a href="https://docs.flutter.dev/development/packages-and-plugins/background-processes">隔離區</a> 呼叫。以前，使用者只能從 Flutter 提供的主要隔離區呼叫平台通道。這使得在 <a href="https://docs.flutter.dev/development/packages-and-plugins/developing-packages">Plugin</a> 或 <a href="https://docs.flutter.dev/development/add-to-app">Add-to-app</a> 中使用隔離區和主機平台程式碼變得更好。有關更多資訊，請查看 flutter.dev 上的 <a href="https://docs.flutter.dev/development/platform-integration/platform-channels">撰寫自訂平台特定程式碼</a> 以及深入文章 <a href="https://medium.com/flutter/introducing-background-isolate-channels-7a299609cad8">簡介背景隔離區通道</a>，這是一篇免費的 Medium 文章。</p>
<h3 id="文字放大鏡"><a href="#文字放大鏡" class="headerlink" title="文字放大鏡"></a>文字放大鏡</h3><p>在 Android 和 iOS 上文字選取期間出現的放大鏡現在可以在 Flutter 中使用。這對於所有具有文字選取的應用程式來說都是開箱即用的，但如果想停用或自訂它，請查看 <a href="https://master-api.flutter.dev/flutter/material/TextField/magnifierConfiguration.html">magnifierConfiguration</a> 屬性。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/800/0*vuIpoOEp5lqEZYeW" />
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/800/0*FIlFtTa6DAlXUwqE" />
</figure>

<h3 id="Plugin-的-Swift-遷移"><a href="#Plugin-的-Swift-遷移" class="headerlink" title="Plugin 的 Swift 遷移"></a>Plugin 的 Swift 遷移</h3><p>隨著 Apple 將重點放在他們自己的 API 上的 Swift，我們希望開發一些參考來幫助 Flutter Plugin 開發人員使用 Swift 遷移或建立新的 Plugin。<a href="https://pub.dev/packages/quick_actions">quick_actions</a> Plugin 已從 Objective-C 遷移到 Swift，可以用作最佳實務的演示。如果您有興趣幫助我們遷移 1P Plugin，請查看 wiki 的 <a href="https://github.com/flutter/flutter/wiki/Contributing-to-Plugins-and-Packages#swift-migration-for-1p-plugins">Swift 遷移部分</a>。</p>
<p><strong>面向 iOS 開發人員的資源</strong></p>
<p>我們為 iOS 開發人員發佈了一些新的資源，包括：</p>
<ul>
<li><a href="https://docs.flutter.dev/get-started/flutter-for/ios-devs?tab=swiftui">面向 SwiftUI 開發人員的 Flutter</a></li>
<li><a href="https://dart.dev/guides/language/coming-from/swift-to-dart">面向 Swift 開發人員的 Dart</a></li>
<li><a href="https://docs.flutter.dev/resources/dart-swift-concurrency">面向 Swift 開發人員的 Flutter 並發</a></li>
<li><a href="https://docs.flutter.dev/development/add-to-app/ios/add-flutter-screen">將 Flutter 加入現有的 SwiftUI 應用程式</a></li>
<li><a href="https://docs.flutter.dev/deployment/flavors">使用 Flutter 建立風味</a>（適用於 Android 和 iOS）</li>
</ul>
<h3 id="Bitcode-棄用"><a href="#Bitcode-棄用" class="headerlink" title="Bitcode 棄用"></a>Bitcode 棄用</h3><p><a href="https://developer.apple.com/documentation/xcode-release-notes/xcode-14-release-notes">從 Xcode 14 開始，watchOS 和 tvOS 應用程式不再需要 Bitcode，App Store 不再接受來自 Xcode 14 的 Bitcode 提交。</a> 因此，Bitcode 支援已從 Flutter 中移除。</p>
<p>預設情況下，Flutter 應用程式沒有啟用 Bitcode，我們預計這不會影響太多開發人員。但是，如果您在 Xcode 專案中手動啟用了 Bitcode，請在升級到 Xcode 14 後立即停用它。您可以透過打開 <code>ios/Runner.xcworkspace</code> 並將 <strong>啟用 Bitcode</strong> 設為 <strong>否</strong> 來執行此操作。 Add-to-app 開發人員應在主機 Xcode 專案中停用它。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*OQtroLJAJcetxyeV" />
</figure>

<p>若要進一步了解 Bitcode 分發，請查看 <a href="https://help.apple.com/xcode/mac/11.0/index.html?localePath=en.lproj#/devde46df08a">Apple 的文件</a>。</p>
<h3 id="iOS-PlatformView-BackdropFilter"><a href="#iOS-PlatformView-BackdropFilter" class="headerlink" title="iOS PlatformView BackdropFilter"></a>iOS PlatformView BackdropFilter</h3><p>我們已添加了原生 iOS 視圖在渲染到模糊的 Flutter Widget 之下時被模糊的功能，並且 <code>UiKitView</code> Widget 現在可以包裝在 <code>BackdropFilter</code> 中。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/345/0*kdYw1nYkT8aKHjZP" />
</figure>

<p>有關更多資訊，請查看 <a href="http://flutter.dev/go/ios-platformview-backdrop-filter-blur">iOS PlatformView BackdropFilter</a> 設計文件。</p>
<h3 id="記憶體管理"><a href="#記憶體管理" class="headerlink" title="記憶體管理"></a>記憶體管理</h3><p>此版本對記憶體管理進行了一些改進，這些改進的共同效果是減少由垃圾收集暫停造成的卡頓，降低因配置速度和背景 GC 線程造成的 CPU 使用率，以及減小記憶體佔用空間。</p>
<p>例如，我們擴展了現有 的手動釋放支援某些 <code>dart:ui</code> Dart 物件的原生資源的做法。以前，原生資源將由 Flutter 引擎保留，直到 Dart VM 垃圾收集 Dart 物件。透過對使用者應用程式和我們自己的基準測試進行分析，我們確定這種策略通常不足以避免不合時宜的 GC 並過度使用記憶體。因此，在此版本中，Flutter 引擎添加了用於明確釋放 <code>Vertices</code>、<code>Paragraph</code> 和 <code>ImageShader</code> 物件持有的原生資源的 API。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/996/0*LmVDzMTW34id5CNV" />
</figure>

<p>在我們對遷移到此 API 的 Flutter 框架進行基準測試時，這些改進將 90% 的畫面建立時間縮短了 30% 以上，最終使用者將體驗到更平滑的動畫，卡頓更少。</p>
<p>此外，Flutter 引擎 <a href="https://github.com/flutter/engine/pull/35473">不再註冊</a> GPU 圖片的大小到 Dart VM。如上所述，這些圖片在不再需要時已由框架手動釋放，因此通知 Dart 的 GC 策略支援 Dart 堆物件的 GPU 記憶體大小會不必要地增加 Dart 堆記憶體壓力，從而觸發無法收集任何額外記憶體的不合時宜的 GC。基於類似的思路，Flutter 引擎現在的策略是僅向 Dart VM <a href="https://github.com/flutter/engine/pull/35813">報告支援 <code>dart:ui</code> Dart 物件的原生物件的淺層大小</a>。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/697/0*P_s-0gE5JGUerDkA" />
</figure>

<p>在我們的基準測試中，此變更在建立畫面時會消除同步 GC 工作，當時 Widget 會建立 GPU 常駐圖片。</p>
<p>在此版本中，Flutter 引擎也更好地動態更新 Dart VM，提供有關 Flutter 應用程式狀態的資訊。特別是，Flutter 現在使用 Dart VM 的 <a href="https://web.dev/rail/">RAIL</a> 風格 <a href="https://github.com/dart-lang/sdk/commit/c6a1eb1b61844b2d733f9e2f4c7754f1920325d7">API</a> 在路由轉場動畫期間進入 <a href="https://github.com/flutter/flutter/pull/110600">低延遲模式</a>。在此低延遲模式下，Dart VM 的記憶體配置器優先選擇堆增長而不是垃圾收集，以避免使用 GC 暫停中斷轉場動畫。雖然此變更沒有帶來任何顯著的效能改善，但我們計劃在將來的版本中擴展此模型的使用範圍，以進一步消除不合時宜的 GC 暫停。此外，我們已 <a href="https://github.com/flutter/engine/pull/37737">修復了邏輯中的錯誤</a>，這些邏輯決定何時通知 Dart VM Flutter 引擎處於空閒狀態。修復這些錯誤還可以防止 GC 相關的卡頓。最後，對於 Add-to-app Flutter 應用程式，Flutter 引擎現在會 <a href="https://github.com/flutter/engine/pull/37539">通知 Dart VM</a> Flutter 視圖不再顯示。這現在導致 Dart VM 為與視圖關聯的隔離區觸發最終的重大 GC。此變更在沒有 Flutter 視圖可見時會減少 Flutter 的記憶體佔用空間。</p>
<h3 id="停止支援-macOS-10-11-到-10-13"><a href="#停止支援-macOS-10-11-到-10-13" class="headerlink" title="停止支援 macOS 10.11 到 10.13"></a>停止支援 macOS 10.11 到 10.13</h3><p>如 <a href="https://medium.com/flutter/whats-new-in-flutter-3-3-893c7b9af1ff#19cd">先前宣布</a>，Flutter 不再支援 macOS 版本 10.11 和 10.12。自那次宣布以來，<a href="https://github.com/flutter/flutter/issues/114445">進一步的分析</a> 顯示，移除對 10.13 的支援也會產生有限的額外影響，並且將有助於團隊大幅簡化程式碼庫。這意味著使用此版本及更高版本建立的針對穩定 Flutter SDK 的應用程式將不再在這些版本上運行，並且 Flutter 支援的最低 macOS 版本將升級到 10.14 Mojave。</p>
<p>因此，由於 Flutter 支援的所有 iOS 和 macOS 版本都包含 Metal 支援，因此 OpenGL 後端已從 iOS 和 macOS 嵌入器中移除。移除這些後端使 Flutter 引擎的壓縮大小減少了約 100KB。</p>
<h3 id="toImageSync"><a href="#toImageSync" class="headerlink" title="toImageSync"></a>toImageSync</h3><p>此版本 <a href="https://github.com/flutter/engine/pull/33736">添加了方法</a> <code>Picture.toImageSync</code> 和 <code>Scene.toImageSync</code> 到 <code>dart:ui</code> 中，類似於異步方法 <code>Picture.toImage</code> 和 <code>Scene.toImage</code>。<code>Picture.toImageSync</code> 同步返回一個 <code>Image</code> 的句柄，其中 <code>Image</code> 的光柵化會在背景中異步執行。然後，當 GPU 上下文可用時，圖片會保留為 GPU 常駐，這意味著與透過 <code>toImage</code> 生成的圖片相比，它的繪製速度更快。（透過 <code>toImage</code> 生成的圖片也可以保留為 GPU 常駐，但這種優化尚未在這種情況下實作。）</p>
<p>新的 <code>toImageSync</code> API 支援以下用例：</p>
<ul>
<li>迅速捕捉一個光柵化代價高昂的圖片，以便在多個畫面中重複使用。</li>
<li>將多通道濾鏡應用於圖片。</li>
<li>應用自訂著色器。</li>
</ul>
<p>例如，Flutter 框架現在 <a href="https://github.com/flutter/flutter/pull/106621">使用此 API</a> 來改進 Android 上的頁面轉場效能，這幾乎將畫面光柵化時間減半，減少了卡頓，並允許動畫在支援這些更新率的設備上達到 90&#x2F;120fps。</p>
<h3 id="自訂著色器支援改進"><a href="#自訂著色器支援改進" class="headerlink" title="自訂著色器支援改進"></a>自訂著色器支援改進</h3><p>此版本包含 Flutter 對自訂片段著色器支援的許多改進。Flutter SDK 現在包含一個著色器編譯器，它會將 <code>pubspec.yaml</code> 檔案中列出的 GLSL 著色器編譯為目標平台的正確後端特定格式。此外，自訂著色器現在可以熱重新載入，以實現便捷的開發週期。自訂著色器現在也受 iOS 上的 Skia 和 Impeller 後端支援。</p>
<p>我們對社群已經分享的演示非常印象深刻，並且期待看到自訂著色器在 Flutter 中的進一步創新使用：</p>
<ul>
<li><a href="https://twitter.com/reNotANumber/status/1599717360096620544">https://twitter.com/reNotANumber/status/1599717360096620544</a></li>
<li><a href="https://twitter.com/reNotANumber/status/1599810391625719810">https://twitter.com/reNotANumber/status/1599810391625719810</a></li>
<li><a href="https://twitter.com/wolfenrain/status/1600242975937687553">https://twitter.com/wolfenrain/status/1600242975937687553</a></li>
<li><a href="https://twitter.com/iamjideguru/status/1598308434608283650">https://twitter.com/iamjideguru/status/1598308434608283650</a></li>
<li><a href="https://twitter.com/rxlabz/status/1609975128758026247">https://twitter.com/rxlabz/status/1609975128758026247</a></li>
<li><a href="https://twitter.com/RealDevOwl/status/1528357506795421698">https://twitter.com/RealDevOwl/status/1528357506795421698</a></li>
<li><a href="https://twitter.com/TakRutvik/status/1601380047599808513">https://twitter.com/TakRutvik/status/1601380047599808513</a></li>
<li><a href="https://twitter.com/wolfenrain/status/1600601043477401606">https://twitter.com/wolfenrain/status/1600601043477401606</a></li>
</ul>
<p>在 docs.flutter.dev 上查看 <a href="https://docs.flutter.dev/development/ui/advanced/shaders">撰寫和使用自訂片段著色器</a> 的詳細文件，並查看 pub.dev 上的實用程式套件 <a href="https://pub.dev/packages/flutter_shaders">flutter_shaders</a>。</p>
<h3 id="字體資產熱重新載入"><a href="#字體資產熱重新載入" class="headerlink" title="字體資產熱重新載入"></a>字體資產熱重新載入</h3><p>以前，將新字體添加到 <code>pubspec.yaml</code> 檔案中需要重新建立應用程式才能看到它們，這與可以熱重新載入的其他資產類型不同。現在，對字體清單的更改（包括新增新字體）可以在應用程式中熱重新載入。</p>
<h3 id="減少-iOS-設備上的動畫卡頓"><a href="#減少-iOS-設備上的動畫卡頓" class="headerlink" title="減少 iOS 設備上的動畫卡頓"></a>減少 iOS 設備上的動畫卡頓</h3><p>感謝 <a href="https://github.com/luckysmg">luckysmg</a> 的開源貢獻，兩個改進減少了 iOS 上的動畫卡頓。特別是，<a href="https://github.com/flutter/engine/pull/35592">在手勢期間在主線程上添加一個虛擬 <code>CADisplayLink</code></a> 現在會強制以最大更新率刷新。此外，鍵盤動畫 <a href="https://github.com/flutter/engine/pull/34871">現在會將</a> <code>CADisplayLink</code> 的更新率設定為與 Flutter 引擎的動畫器使用的相同更新率。由於這些更改，使用者應該會注意到 120Hz iOS 設備上更一致的平滑動畫。</p>
<h3 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h3><p>毫不誇張地說，沒有才華橫溢且充滿熱情的貢獻者社群，Flutter 就無法成為今天的傑出體驗。我們將繼續一起踏上這段旅程，Google 的 Flutter 團隊希望大家知道，沒有你們，我們是無法做到的。謝謝！</p>
<p>這股勢頭不會減弱，敬請關注未來的更新！</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=38cbea71133c" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/whats-new-in-flutter-3-7-38cbea71133c">Flutter 3.7 的新功能</a> 最初發佈在 <a href="https://medium.com/flutter">Flutter</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/50f8c44d.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/50f8c44d.html" class="post-title-link" itemprop="url">【文章翻譯】How it’s made: Holobooth</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-01-24 17:55:13" itemprop="dateCreated datePublished" datetime="2023-01-24T17:55:13+08:00">2023-01-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 20:20:40" itemprop="dateModified" datetime="2024-09-30T20:20:40+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="展示-Flutter-和機器學習的虛擬照片亭體驗"><a href="#展示-Flutter-和機器學習的虛擬照片亭體驗" class="headerlink" title="展示 Flutter 和機器學習的虛擬照片亭體驗"></a>展示 Flutter 和機器學習的虛擬照片亭體驗</h2><p>隆重推出 Flutter Forward <a href="https://holobooth.flutter.dev/">Holobooth</a>，這是一個展示 <a href="https://flutter.dev/">Flutter</a>、<a href="https://firebase.google.com/">Firebase</a> 和機器學習（使用 <a href="https://mediapipe.dev/">MediaPipe</a> 和 <a href="https://tensorflow.org/js">TensorFlow.js</a>）功能的全新體驗，以虛擬照片亭呈現。首先選擇您的頭像（Dash 或 Sparky），然後將自己傳送到熱帶海灘、火山山脈、外太空、海底或其他地方！由於我們無法將所有人運送到奈洛比現場參加 <a href="https://flutter.dev/events/flutter-forward">Flutter Forward</a>，因此我們想要提供同樣令人興奮的虛擬體驗！使用 Holobooth，您可以捕捉一段短片來紀念您的虛擬之旅。然後，透過分享到 Twitter 或 Facebook 來與您的朋友炫耀。</p>

<figure>
<img alt="Flutter Forward Holobooth 網頁應用程式的登陸畫面。左邊，Dash 在一個以紫色和藍色色調以及 Flutter 標誌裝飾的照片亭裡拍照。右邊是一個開始按鈕。" src="https://cdn-images-1.medium.com/max/1024/1*8zOCQg2Qwh_dzC4ndMzoqg.png" />
<figcaption>在 <a href="https://holobooth.flutter.dev/">holobooth.flutter.dev</a> 上嘗試 Flutter Forward Holobooth</figcaption>
</figure>

<p>Holobooth 基於 <a href="https://medium.com/flutter/how-its-made-i-o-photo-booth-3b8355d35883">Google I/O 2021 的第一版 Photo Booth 應用程式</a>。Holobooth 沒有拍攝你和 Dash 或 Sparky 的照片，而是使用機器學習，透過你的臉部表情控制 Dash 或 Sparky 的動畫。</p>

<p>我們將分解說明我們的團隊如何與 Google 合作，透過運用 Google 工具的功能，打造更具沉浸感和未來感的照片亭體驗。我們使用 <a href="https://flutter.dev/">Flutter</a> 和 <a href="https://firebase.google.com/">Firebase</a> 建立 Holobooth 應用程式。JavaScript 中的 Web ML 讓我們能夠透過虛擬、互動式、3D 頭像將體驗提升到新的水平。讓我們深入了解我們是如何建立它的！</p>

<h3 id="使用-TensorFlow-js-偵測臉部"><a href="#使用-TensorFlow-js-偵測臉部" class="headerlink" title="使用 TensorFlow.js 偵測臉部"></a>使用 TensorFlow.js 偵測臉部</h3><p>Holobooth 最令人興奮的功能之一是能夠將您臉部的即時影片，映射到 Dash（或 Sparky）的 3D 模型上，同時您穿梭在他們的虛擬世界中。如果您臉部表達驚訝，Dash 的臉部也會表達驚訝，依此類推。為了實現這一點，我們使用了 Flutter Web 的 <a href="https://pub.dev/packages/camera">camera</a> Plugin 和 <a href="https://www.tensorflow.org/js">TensorFlow.js</a> 來偵測相機畫面中使用者的臉部。更具體地說，我們使用了 <a href="https://github.com/tensorflow/tfjs-models/tree/master/face-landmarks-detection">MediaPipe FaceMesh</a> 模型，它可以實時估計 468 個 3D 臉部特徵點，以偵測 Web 和行動瀏覽器中相機畫面中使用者臉部的特徵。</p>

<figure>
<img alt="一個穿著灰色襯衫和眼鏡坐在椅子上的男人。在他臉上是一堆紅點，映射到他的五官上。在他的眼睛周圍和嘴巴周圍有高濃度的紅點。" src="https://cdn-images-1.medium.com/max/750/1*_Pp7DaS5DOfQJtMfjJ3m2Q.png" />
<figcaption>使用 MediaPipe FaceMesh 模型偵測到的特徵</figcaption>
</figure>

<p>根據每個臉部特徵的位置，我們可以判斷使用者是否在畫面中，他們的眼睛或嘴巴是否睜開，等等。當使用者在相機視圖中移動時，MediaPipe <a href="https://github.com/tensorflow/tfjs-models/tree/master/face-landmarks-detection">FaceMesh</a> 模型（透過 <a href="https://github.com/tensorflow/tfjs-models/tree/master/face-landmarks-detection">TensorFlow.js Face Landmarks Detection 套件</a> 提供）確保我們可以追蹤使用者特徵的確切座標，以便我們可以在 Dash 或 Sparky 上鏡像它們。如需更多詳細資訊，您可以深入了解 <a href="https://github.com/flutter/holobooth/blob/1c5bc00f0b43dd56ea7f964b26756a5991d6502e/packages/face_geometry/lib/src/face_geometry.dart">face_geometry.dart 檔案</a>。雖然目前還沒有針對 TensorFlow.js 的官方 Dart 套件，但 Dart 的 <a href="https://pub.dev/packages/js">JS</a> 套件允許我們將 JavaScript 函式庫導入 Flutter Web 應用程式（如需更多詳細資訊，請參閱 <a href="https://github.com/flutter/holobooth/tree/1c5bc00f0b43dd56ea7f964b26756a5991d6502e/packages/tensorflow_models">tensorflow_models</a> 套件資料夾）。</p>

<pre>  FaceGeometry({<br>    required tf.Face face,<br>    required tf.Size size,<br>  }) : this._(<br>          rotation: FaceRotation(keypoints: face.keypoints),<br>          leftEye: LeftEyeGeometry(<br>            keypoints: face.keypoints,<br>            boundingBox: face.boundingBox,<br>          ),<br>          rightEye: RightEyeGeometry(<br>            keypoints: face.keypoints,<br>            boundingBox: face.boundingBox,<br>          ),<br>          mouth: MouthGeometry(<br>            keypoints: face.keypoints,<br>            boundingBox: face.boundingBox,<br>          ),<br>          distance: FaceDistance(<br>            boundingBox: face.boundingBox,<br>            imageSize: size,<br>          ),<br>        );<br><br>  const FaceGeometry._({<br>    required this.rotation,<br>    required this.mouth,<br>    required this.leftEye,<br>    required this.rightEye,<br>    required this.distance,<br>  });</pre>

<h3 id="使用-Rive-和-TensorFlow-js-動畫背景和頭像"><a href="#使用-Rive-和-TensorFlow-js-動畫背景和頭像" class="headerlink" title="使用 Rive 和 TensorFlow.js 動畫背景和頭像"></a>使用 Rive 和 TensorFlow.js 動畫背景和頭像</h3><p>我們求助於 <a href="https://rive.app/">Rive</a> 來讓 Holobooth 動畫栩栩如生。Rive 是一個使用 Flutter 建立的 Web 應用程式，它提供了用於建立高性能、輕量級、互動式動畫的工具，這些動畫易於整合到 Flutter 應用程式中。我們與 Rive 的才華洋溢的設計師和 <a href="https://www.hopr.tv/">HOPR 設計工作室</a> 合作，創造出可以在我們的 Flutter 應用程式中無縫運作的動畫 Rive 圖形。動畫背景和頭像都是 Rive 動畫。</p>

<figure>
<img alt="左邊是一個向左、向右、向上、向下移動、眨眼，然後張嘴的臉。Dash 模仿了左邊臉移動的相同動作。" src="https://cdn-images-1.medium.com/max/600/1*mvB6J_LUq2WQWJpIZ4A7IQ.gif" />
<figcaption>移動您的臉，看看 Rive 模型如何模仿您的行為</figcaption>
</figure>

<p>頭像使用 Rive <a href="https://help.rive.app/editor/state-machine">狀態機</a>，讓我們可以控制頭像的行為和外觀。在 Rive 狀態機中，設計師指定所有輸入。輸入是由您的應用程式控制的值。您可以將它們視為設計和工程團隊之間的契約。您的產品程式碼可以隨時變更輸入的值，狀態機會對這些變更做出反應。</p>

<p>對於 Holobooth，我們使用輸入來控制嘴巴張開或閉合的程度。使用來自 <a href="https://github.com/tensorflow/tfjs-models/tree/master/face-landmarks-detection">FaceMesh</a> 模型的特徵偵測，我們可以將它們映射到頭像模型上的對應座標。使用 StateMachineController，我們轉換來自模型的輸入，以確定頭像在螢幕上的顯示方式。</p>

<pre>class CharacterStateMachineController extends StateMachineController {<br>  CharacterStateMachineController(Artboard artboard)<br>      : super(<br>          artboard.animations.whereType&lt;StateMachine&gt;().firstWhere(<br>                (stateMachine) =&gt; stateMachine.name == &#39;State Machine 1&#39;,<br>              ),</pre>

<p>例如，頭像模型有一個屬性用於測量 <a href="https://github.com/flutter/holobooth/blob/1c5bc00f0b43dd56ea7f964b26756a5991d6502e/lib/rive/widgets/character_animation.dart">嘴巴的張開程度</a>（從 0 到 1 測量，其中 0 表示完全閉合，1 表示完全張開）。如果使用者在相機視圖中閉合嘴巴，應用程式會提供對應的值並將其饋送到頭像模型中，因此您會看到您的頭像嘴巴在螢幕上也閉合了。</p>

<h3 id="使用-Firebase-捕捉動態照片"><a href="#使用-Firebase-捕捉動態照片" class="headerlink" title="使用 Firebase 捕捉動態照片"></a>使用 Firebase 捕捉動態照片</h3><p>Holobooth 的主要功能是您可以分享的 GIF 或影片，以慶祝 Flutter Forward。我們求助於 <a href="https://firebase.google.com/products/functions">Firebase 的雲端函數</a> 來幫助我們生成和上傳您的動態照片到 <a href="https://firebase.google.com/products/storage">Firebase 的雲端儲存空間</a>。當您按下相機按鈕時，應用程式會開始捕捉畫面 5 秒鐘。使用 <a href="https://www.npmjs.com/package/fluent-ffmpeg">ffmpeg</a>，我們使用雲端函數將畫面轉換為單個 GIF 和影片，然後上傳到 <a href="https://firebase.google.com/products/storage">Firebase 的雲端儲存空間</a>。您可以選擇下載 GIF 或影片以供日後觀賞，或手動上傳到社交媒體。</p>

<figure>
<img alt="使用者選擇 Dash 作為頭像，然後選擇外太空的動畫背景，其中有行星和星星。一個火箭斜向上向左移動，在 Dash 身後。使用者選擇一頂藍色的巫師帽，上面有星星，搭配一件相同的襯衫和一個 Flutter 馬克杯，然後按下相機按鈕錄製動態照片。最終的照片在一個單獨的螢幕上顯示，其中有按鈕可以分享照片、下載照片或重新拍攝照片。" src="https://cdn-images-1.medium.com/max/800/1*YV7A0DsrEyf2r3hvJ6HqNA.gif" />
<figcaption>捕捉動態照片</figcaption>
</figure>

<p>若要將您的 GIF 直接分享到 Twitter 或 Facebook，您可以點擊分享按鈕。然後，您將被帶到所選平台，其中包含一個預先填寫的帖子，其中包含您的影片第一畫面的照片。若要觀看完整的影片，請點擊您的 holocard 連結 - 一個網頁，它會完整顯示您的影片，並有一個按鈕引導訪客自己嘗試 Holobooth！</p>

<figure>
<img alt="Holocard 頁面，左邊是使用者動態照片的第一個畫面。Dash 穿著太空人服，站在未來城市前。右邊是 Flutter Forward 活動標誌，文字為“Check out my Flutter holocard”，以及一個顯示“Try now”的按鈕，使用者可以在其中使用 Holobooth 拍攝自己的照片。" src="https://cdn-images-1.medium.com/max/1024/1*gqq0z-7kyXE0GS086zbVUw.png" />
<figcaption>Holocard 範例</figcaption>
</figure>

<h3 id="挑戰和解決方案"><a href="#挑戰和解決方案" class="headerlink" title="挑戰和解決方案"></a>挑戰和解決方案</h3><p>Holobooth 包含許多元素，這些元素擴展了 Flutter 的可能性 - 例如使用機器學習模型和 Rive 圖形，同時確保為使用者提供高性能、流暢的體驗。</p>

<p>與 TensorFlow.js 合作對 Very Good Ventures 來說是第一次。目前沒有官方的 Flutter 函式庫，因此我們在這個專案上的早期工作很大一部分是專注於對可用模型進行實驗，以確定哪個模型適合我們的需求。當我們確定了特徵點偵測模型後，我們就必須理解模型輸出的資料，並將它們映射到 Rive 動畫。以下是一個早期探索臉部偵測的範例： </p>

<figure>
<img alt="一個穿著淡藍色襯衫和紅色帽衫的男人正在螢幕上移動他的臉。他的臉周圍有一個藍色方框，紅點映射到他的臉上，他的眼睛和嘴巴周圍有高濃度的點。當他移動他的臉時，紅點隨著他的臉部特徵一起移動。" src="https://cdn-images-1.medium.com/max/600/1*hdTGZAcinWlt2yR-4CLt2w.gif" />
<figcaption>臉部偵測的早期探索</figcaption>
</figure>

<p>官方 Flutter 的  <a href="https://pub.dev/packages/camera">camera</a> Plugin 為我們提供了開箱即用的許多功能，但目前它不支持在 Web 上串流圖片。對於 Holobooth，我們 <a href="https://github.com/flutter/plugins/compare/main...VGVentures:plugins:feat/camera-video-controller?expand=1">分支</a> 了 camera Plugin 以添加此功能。我們希望這種功能可以在 <a href="https://github.com/flutter/flutter/issues/92460">未來由官方 Plugin 支援</a>。</p>

<p>另一個挑戰是效能優化。錄製螢幕可能會是一項昂貴的操作，因為應用程式正在捕捉大量數據。我們還必須考慮使用者會從不同的瀏覽器和設備訪問這個應用程式。我們希望確保該應用程式具有高性能，並且無論使用者使用什麼設備，都能提供流暢的體驗。當在桌面端訪問 Holobooth 時，影片背景會動畫化並反映橫向模式。為了優化行動瀏覽器，背景是靜態的，並被裁剪以適合縱向模式。由於行動螢幕比桌面螢幕更小，因此我們還優化了圖片素材的解析度，以減少初始頁面載入時間和設備使用的數據量。</p>

<p>如需更詳細地了解我們是如何解決這些挑戰以及更多問題，您可以查看 <a href="https://github.com/flutter/holobooth">開源程式碼</a>。我們希望這能為想要嘗試 TensorFlow.js、Rive 和影片的開發人員提供靈感，甚至對於那些只是想優化他們 Web 應用程式的開發人員也能提供靈感。</p>

<h3 id="展望未來"><a href="#展望未來" class="headerlink" title="展望未來"></a>展望未來</h3><p>在建立這個演示過程中，我們想要探索 Flutter Web 應用程式以簡單、高性能且有趣的方式與 TensorFlow.js 模型整合的潛力。雖然我們建立的許多內容仍然是實驗性的，但我們對機器學習在 Flutter 應用程式中的未來感到興奮，它可以為使用者在任何設備上創造出令人愉悅的體驗！加入社群對話，告訴我們您的想法，以及您如何在您的下一個 Flutter 專案中使用機器學習。</p>

<p><a href="https://holobooth.flutter.dev/"><strong>在 Holobooth 中拍一段影片，並在社交媒體上與我們分享！</strong></a></p>

<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=6473f3d018dd" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/how-its-made-holobooth-6473f3d018dd">它是如何製作的：Holobooth</a> 最初發佈在 <a href="https://medium.com/flutter">Flutter</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p> </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/19078d18.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/19078d18.html" class="post-title-link" itemprop="url">【文章翻譯】Introducing background isolate channels</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-01-23 20:29:17" itemprop="dateCreated datePublished" datetime="2023-01-23T20:29:17+08:00">2023-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 16:55:14" itemprop="dateModified" datetime="2024-09-30T16:55:14+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*bSKidxVM7-brUJFuyKdVFg.png" /></figure>

<p>現在，從 Flutter 3.7 開始，我很高興地宣布，開發者可以從 *任何* 隔離區使用 Plugin 和平台通道。這一直是我們 [排名最高的議題之一](https://github.com/flutter/flutter/issues/13937)，並且從 2018 年就開始存在。由於實作起來並不簡單，而且存在一種雖然繁瑣但可行的解決方案：始終從根隔離區（Flutter 提供的隔離區）使用 Plugin，因此它被降級了。但是，隨著 Flutter 的成熟，它越來越注重效能，遵循軟體界的古老格言「讓它運作，讓它正確，讓它快速」。選擇實作此功能是改善效能和讓 Flutter 更易於使用的幸福交集。因此，它成為了很容易做出的投資決定。</p>

<p>如果您想了解此功能的用法，請查看 GitHub 上的 [範例程式碼](http://tbd)。</p>

<h3>用例</h3>

<p>為什麼有人想要從背景隔離區使用 Plugin 呢？很明顯 Plugin 有其存在的必要性，因為並非世界上所有的程式碼都是用 Dart 編寫的。社群花費了數年的努力來讓這些程式碼透過 Plugin 變得可用，例如：<em>path_provider</em> 的尋找臨時目錄功能，或 <em>flutter_local_notifications</em> 的發佈通知功能。</p>

<p>接下來的邏輯問題是：「為什麼有人要在背景隔離區上執行程式碼？」答案是，有時您別無選擇，某些函式庫可能會在背景隔離區上呼叫回呼函式，例如 <em>android_alarm_manager_plus</em>。或者，應用程式可能會進行大量的計算，而開發者不希望這些計算干擾 UI。</p>

<p>在我幫助 Google 的其他團隊採用 Flutter 的時間裡，隨著產品的成熟，他們最終會遇到根隔離區成為瓶頸的情況，這幾乎是不可避免的。因此，我們需要確保框架中的所有內容都經過優化，並為使用者提供在必要時輕鬆卸載工作的工具。</p>

<p>以下是一個為背景隔離區通道設計的虛構具體用例：</p>

<p>想像一個使用 AI 從文字提示生成高解析度圖像的應用程式。使用者的先前創作儲存在 Firebase 雲端儲存空間中，並且有一個功能可以從使用者的手機匯出和分享創作。Flutter 應用程式啟動一個背景隔離區，它從 Firebase 雲端儲存空間下載圖像的 8k 版本，將圖像縮放到所需的匯出大小，將圖像儲存到相機膠捲，最後在匯出完成時發佈本地通知。</p>

<p>在此範例中，至少有 3 個 Plugin 是從背景隔離區使用的，一個用於從 Firebase 雲端儲存空間讀取，一個用於儲存到手機的相機膠捲，一個用於發佈本地通知。如果沒有背景隔離區通道，應用程式必須將 8k 圖像從根隔離區複製到背景隔離區，才能對其進行縮放。今天，使用 Dart 無法將其變成恆定時間運作。</p>

<h3>快速範例</h3>

<p>以下是一個使用新 API 從背景隔離區呼叫 <em>shared_preferences</em> Plugin 的快速範例：</p>

<pre>import ‘package:flutter/services.dart’;<br>import ‘package:shared_preferences/shared_preferences.dart’;</pre>

<pre>void main() {<br> // 識別要傳遞給背景隔離區的根隔離區。<br> // (在 Flutter 3.7 中引入的 API)<br> RootIsolateToken rootIsolateToken = RootIsolateToken.instance!;<br> Isolate.spawn(_isolateMain, rootIsolateToken);<br>}</pre>

<pre>void _isolateMain(RootIsolateToken rootIsolateToken) async {<br> // 將背景隔離區註冊到根隔離區。<br> BackgroundIsolateBinaryMessenger<br>   .ensureInitialized(rootIsolateToken);<br> // 您現在可以使用 shared_preferences Plugin。<br> SharedPreferences sharedPreferences =<br>   await SharedPreferences.getInstance();<br> print(sharedPreferences.getBool(‘isDebug’));<br>}</pre>

<h3>技術細節</h3>

<p>以下是平台通道工作原理的高階概觀：</p>

<figure><img alt="" src="https://cdn-images-1.medium.com/max/834/0*Db7Niu7FqKGszecZ" /></figure>

<p>當平台通道的結果被呼叫時，會有一個硬編碼跳轉到 <em>platform</em> 線程。為了讓背景隔離區通道能夠運作，必須儲存傳送訊息的隔離區，以便引擎可以在該隔離區的事件迴圈中排程結果。這透過使用 [Dart 的 <em>ports</em>](https://github.com/dart-lang/sdk/blob/eb9554d70e386bb3177f63509ba8f7e4bbf500a0/runtime/include/dart_native_api.h#L125) 來實作。Dart <em>ports</em> 儲存擁有它們的隔離區，並且是從 C API 排程這些隔離區的唯一方法。</p>

<p>另一個需要實作的內容是將背景隔離區與其根隔離區關聯起來的方法。這讓我很驚訝，但是為了在 Flutter 引擎被破壞時關閉平台通道，必須知道哪些背景隔離區與該引擎關聯。否則，背景隔離區可能會嘗試與正在被破壞的 Flutter 引擎通訊。這在最終的 API 中可以被視為一種後果，其中需要使用 <em>RootIsolateToken</em> 初始化 <em>BackgroundIsolateBinaryMessenger</em>。</p>

<p>若要進一步了解實作，請查看 [隔離區平台通道](https://docs.google.com/document/d/1yAFw-6kBefuurXWTur9jdEUAckWiWJVukP1Iay8ehyU/edit#heading=h.722pnbmlqbkx) 設計文件。此文件還包含反向通訊的提議，但尚未實作或被接受。</p>

<p>感謝 Flutter 社群的支持，希望大家都能為這個新功能找到絕妙的用途。</p>

<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=7a299609cad8" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/introducing-background-isolate-channels-7a299609cad8">介紹背景隔離區通道</a> 最初發佈在 Medium 上的 <a href="https://medium.com/flutter">Flutter</a>，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/e7e3bfa0.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/e7e3bfa0.html" class="post-title-link" itemprop="url">【文章翻譯】Playful typography with Flutter</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-01-20 08:02:26" itemprop="dateCreated datePublished" datetime="2023-01-20T08:02:26+08:00">2023-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 16:55:14" itemprop="dateModified" datetime="2024-09-30T16:55:14+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="探索可變字型和著色器"><a href="#探索可變字型和著色器" class="headerlink" title="探索可變字型和著色器"></a>探索可變字型和著色器</h2><h3 id="簡介"><a href="#簡介" class="headerlink" title="簡介"></a>簡介</h3><p>我是 Brian，Flutter 新手，六個月前加入了 Google 的 Flutter 團隊擔任 UX 工程師。作為 UX 工程師，我將我的圖形設計背景與編碼技能結合起來，幫助團隊構建 Flutter 本身，並展示 Flutter 的能力。這篇部落格文章分享了我作為混合設計師 - 開發人員的第一次 Flutter 實驗之一：一個簡單的以排版為主題的益智遊戲。它結合了我設計中的創意背景和對幾個您可能還沒有嘗試過的 Flutter API 的技術探索：<code>FontVariation</code> 和 <code>AnimationController</code>。我創造這個應用程式玩得很開心，並透過它親身感受了 Flutter 對那些會編碼的設計師或擁有設計眼光的開發人員來說有多棒。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*x9XqN84kLr7s86vK" />
<figcaption><em>使用可變字型和著色器自訂 Flutter 文字 Widget 的調色盤。</em></figcaption>
</figure>

<h3 id="排版"><a href="#排版" class="headerlink" title="排版"></a>排版</h3><p>圖形設計師喜歡深入研究「排版」，這只是一個描述文字樣式的花哨詞彙。這包括選擇字型、大小、佈局、間距等等。透過所有這些可以設定的選項，字母本身也可以成為一種藝術形式！作為一名受過設計訓練的設計師，我知道我為這個探索性專案所創造的任何事物，都會以某種方式涉及使用 Flutter 深入研究排版。在過去幾年中，<a href="https://fonts.google.com/knowledge/introducing_type/introducing_variable_fonts">可變字型</a> 已經成為設計師前所未有地控制文字樣式的一種有趣方法。這是我一直想進一步探索的領域，而 Flutter 對可變字型的支援，似乎是這個完美的機會。</p>
<p>您可能已經熟悉一般字型，它決定了文字區塊中每個字元的樣式。常規字型通常會提供我們可以選擇的幾個設定，例如粗細：粗體、常規或輕細。可變字型將這種自訂提升到一個新的層次。例如，在粗細方面，我們可能會選擇 100（極輕）到 1000（極粗）之間的任何數值設定。而且我們並不局限於粗細；字型創作者可以讓使用者設定各種項目，例如字母的寬度或下降字元（例如「p」和「y」等小寫字母下降的距離）的深度等等。所有這些不同的設定都稱為「軸」，就像圖表的軸一樣。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*pO_MkjR1GrLhb8va" />
<figcaption><em>Roboto Flex 可變字型中的字母「g」，沿著寬度軸（從左到右）和粗細軸（從上到下）變化。這些只是它許多生效的軸中的兩個！</em></figcaption>
</figure>

<p>Flutter 提供了一種簡單的方法，可以在 <code>TextStyle</code> Widget 中透過使用 <code>fontVariations</code> 欄位來調整這些設定。例如，以下程式碼片段將在 Roboto Flex 可變字型中建立一個文字樣式，大小為 18，具有針對粗細（wght）和寬度（wdth）的可變軸設定：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">TextStyle(</span><br><span class="line">  fontFamily: &#x27;RobotoFlex&#x27;,</span><br><span class="line">  fontSize: 18,</span><br><span class="line">  fontVariations:[</span><br><span class="line">    FontVariation(&#x27;wght&#x27;, 374),</span><br><span class="line">    FontVariation(&#x27;wdth&#x27;, 118)</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>若要進一步了解可變字型，請查看 Google Fonts 網站上的 <a href="https://fonts.google.com/knowledge/topics/variable_fonts">可變字型資源</a>。</p>
<p>設定變化非常容易，但是我想要從一個變化設定動畫到另一個設定，以及在設定組合之間動畫。幸運的是，Flutter 和 Dart 讓將兩個現有的底層功能（<code>FontVariation</code> 和 <code>AnimationController</code>）粘合在一起以製作我自己的自訂動態排版效果變得非常容易。</p>
<p>對於我的展示，我製作了一個 <code>WonkyChar</code> Widget 和一個 <code>WonkyAnimPalette</code> 協助類別，它提供了一種簡單的方法來選擇在螢幕上顯示的任何字母，控制文字大小，並輸入與可變字型軸相關的各種設定。<code>WonkyChar</code> Widget 還包含一個標準的 Flutter <code>AnimationController</code> 物件，我用它來為設定製作動畫。在此範例中，字母「M」將以 200 的大小顯示，並在 4 秒的動畫中將其粗細（粗體）從極細動畫到極粗：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">WonkyChar(</span><br><span class="line">  text: &#x27;M&#x27;,</span><br><span class="line">  size: 200,</span><br><span class="line">  animationDurationMillis: 4000,</span><br><span class="line">  animationSettings: [</span><br><span class="line">    WonkyAnimPalette.weight(</span><br><span class="line">      from: 100,</span><br><span class="line">      to: 900,</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="自訂著色器"><a href="#自訂著色器" class="headerlink" title="自訂著色器"></a>自訂著色器</h3><p>可變字型的效果，特別是加上動畫，非常棒，但我想要進一步提升我的視覺創造力，看看我可以用字母形狀做些什麼。順便說一句，我聽說 Flutter 剛剛加入了對自訂片段著色器的支援。著色器是在電腦的圖形處理單元 (GPU) 上執行的程式，讓開發人員可以在維持高畫面更新率的同時製作各種視覺效果。Flutter 支援使用 GLSL 撰寫著色器，GLSL 是最出名且文件最齊全的著色器語言之一，有許多書籍、網站、YouTube 影片和大型開放式線上課程 (MOOC) 中提供了許多教學和範例。我當然不是著色器或圖形程式的專家，但我以前曾玩過，所以這是另一個在建立自己的技能的同時探索 Flutter 功能的好機會。</p>
<blockquote><strong>注意</strong>：著色器是一個相當進階的編碼主題，有關將它們插入 Flutter 應用程式的詳細資訊超出了這篇部落格文章的範圍。如果您想自己嘗試撰寫一些著色器，請查看 Flutter 文件中的 [撰寫和使用片段著色器](https://docs.flutter.dev/development/ui/advanced/shaders)。這是一種真正引人入勝的編碼方法！</blockquote>

<p>最初，只是為了展示一種可能性，我撰寫了一個簡單的 GLSL 著色器，以作為我其中一個 <code>WonkyChar</code> Widget（如上所述）的濾鏡，以製作以下效果：</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*-N5jTlkJHFmEeb0e" />
<figcaption><em>應用著色器之前和之後的 `WonkyChar` Widget。</em></figcaption>
</figure>

<h3 id="專案描述"><a href="#專案描述" class="headerlink" title="專案描述"></a>專案描述</h3><p>這些原始元件 - 排版、可變字型支援和著色器 - 是一個有趣的開始，但它們需要實際整合到一個連貫的專案中。作為一個自我賦予的任務，以進一步了解 Flutter 和 Flutter 社群中的編碼，我製作了一個簡單的基於磁磚的益智遊戲 Type Jam，靈感來自 <a href="https://flutterhack.devpost.com/">2022 Flutter 益智遊戲黑客大賽</a>。在益智遊戲黑客大賽提示的背景下，針對這些想法進行集思廣益，我提出了以下概念：您，作為玩家，必須幫助一家陷入困境的字型公司透過解決一系列基於磁磚的益智遊戲來修復一個故障的字型檔案。</p>
<p>應用程式的每個畫面都有一個益智遊戲，由一個故障字母的混亂碎片組成，周圍環繞著完整的字母，根據可變字型軸（例如粗細或寬度）製作動畫。磁磚碎片上的故障效果是在每個頁面上透過不同的著色器來建立的，導致磁磚碎片看起來波浪狀、斷裂等等。而且，為了與通常的磁磚益智遊戲機制有所區別，我決定讓玩家透過旋轉磁磚來解決益智遊戲，而不是滑動它們，這樣一來，在完成後就可以看到整個字母，沒有空槽。回想起來，這可能讓益智遊戲變得過於容易，但我可以為 2.0 版想出更多挑戰！</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/270/0*90hPGzJLj7qBZp7t" />
<figcaption><em>在益智遊戲應用程式中應用可變字型加上著色器效果（在磁磚碎片上）。這個畫面的字母在「光學大小」軸上製作動畫。</em></figcaption>
</figure>

<p>如果您想看看它是如何整合在一起的，請查看 <a href="https://github.com/flutter/samples">flutter&#x2F;samples 儲存庫</a> 中「experimental」資料夾中的 Type Jam 應用程式的 <a href="https://github.com/flutter/samples/tree/main/experimental/varfont_shader_puzzle">varfont_shader_puzzle</a> 範例。正如我之前提到的，我仍然是 Flutter 的新手，而且我只對著色器有基本的了解，所以我希望在未來能夠改進它！目前，請將它視為一個快速展示，而不是模板。</p>
<h3 id="結語"><a href="#結語" class="headerlink" title="結語"></a>結語</h3><p>作為一名以設計為中心的 UX 工程師，將我的設計和技術興趣結合起來以製作有趣的排版，並讓其他人也能玩弄字母，這讓我感到非常滿足。此外，我親眼見證了 Flutter 作為一種創造性工具的潛力，它可以超越應用程式設計的典型模式。我製作這個專案玩得很開心，希望它能激勵其他設計師 - 編碼人員嘗試他們奇怪而有趣的想法，並將他們的設計作為真正的應用程式呈現出來！</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=f030385058b4" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/playful-typography-with-flutter-f030385058b4">使用 Flutter 製作有趣的排版</a> 最初發佈在 <a href="https://medium.com/flutter">Flutter</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p> </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/25/">25</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Rainvisitor</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">245</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">239</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rainvisitor</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
