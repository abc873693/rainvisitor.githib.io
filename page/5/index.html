<!DOCTYPE html>
<html lang="zh-tw,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.rainvisitor.me","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="RainVisitor Blog">
<meta property="og:url" content="https://blog.rainvisitor.me/page/5/index.html">
<meta property="og:site_name" content="RainVisitor Blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Rainvisitor">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://blog.rainvisitor.me/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-tw'
  };
</script>

  <title>RainVisitor Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">RainVisitor Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">RainVisitor</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/6c7c35de.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/6c7c35de.html" class="post-title-link" itemprop="url">【文章翻譯】Announcing Dart 3.2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-11-15 21:44:57" itemprop="dateCreated datePublished" datetime="2023-11-15T21:44:57+08:00">2023-11-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-12-18 15:24:22" itemprop="dateModified" datetime="2024-12-18T15:24:22+08:00">2024-12-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Dart/" itemprop="url" rel="index"><span itemprop="name">Dart</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="宣布-Dart-3-2"><a href="#宣布-Dart-3-2" class="headerlink" title="宣布 Dart 3.2"></a>宣布 Dart 3.2</h2><p>作者： <a href="https://medium.com/u/441fe70f4b5e">Kevin Moore</a> 和 <a href="https://medium.com/u/a6d788faa5e5">Michael Thomsen</a></p>
<p>今天，我們宣布推出 Dart 3.2，其中包含一個新的語言功能，用於對私有 final 欄位進行非空推斷，透過新的互操作性功能改進開發人員體驗，支援 DevTools 中的擴展，以及關於我們的 Web 路線圖的更新，包括對 Wasm（又名 WebAssembly）的支援。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*u5YRn1uMmXf94b2aPbcLRQ.png" />
</figure>

<h3 id="私有-final-欄位的非空推斷"><a href="#私有-final-欄位的非空推斷" class="headerlink" title="私有 final 欄位的非空推斷"></a>私有 final 欄位的非空推斷</h3><p>自從我們在 Dart 2.12 中引入 <a href="https://medium.com/dartlang/announcing-dart-2-12-499a6e689c87">可靠的空安全</a> 已經過了好幾年。在空安全中，您可以宣告哪些類型是可空的（可能包含值或 null），以及哪些類型是非空的（始終包含值）。空安全與 <a href="https://dart.dev/null-safety/understanding-null-safety#flow-analysis">流分析</a> 結合在一起，可以偵測到可空變數何時可以「推斷」為更安全的非空類型：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> definitelyInt(<span class="built_in">int?</span> aNullableInt) &#123;</span><br><span class="line">  <span class="keyword">if</span> (aNullableInt == <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 如果流分析到達此處，</span></span><br><span class="line">  <span class="comment">// aNullableInt 可以安全地推斷為非空的 int。</span></span><br><span class="line">  <span class="keyword">return</span> aNullableInt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>類型推斷自 Dart 2.12 起一直是空安全的核心部分，但僅限於區域變數。欄位或頂層變數無法推斷，例如在這種情況下：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Container</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int?</span> _fillLevel;</span><br><span class="line">  Container(<span class="keyword">this</span>._fillLevel);</span><br><span class="line">  check() &#123;</span><br><span class="line">    <span class="keyword">if</span> (_fillLevel != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="built_in">int</span> i = _fillLevel; <span class="comment">// 在 Dart 3.2 之前，會導致錯誤。</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>這種限制是由于在流分析無法安全地確定何時或如何更改欄位的一些複雜情況造成的。例如，在類別的欄位推斷情況下，如果子類別使用 getter 覆蓋欄位，而 getter 有時會返回 null，就會出現問題。</p>
<p>在 Dart 3.2 中，我們改進了我們的流分析引擎，現在能夠推斷 <strong>私有 final 欄位</strong> 的類型。現在，上面的程式碼片段可以在沒有錯誤的情況下通過。這利用了這樣一種了解，即對於私有和 final 欄位，在初始賦值之後，該值永遠不會改變，因此只檢查一次被認為是安全的。私有的 final 欄位推斷從 Dart 3.2 開始可用，並且將應用於 Dart SDK <a href="https://dart.dev/guides/language/evolution#language-versioning">下限</a> 為 3.2 或更高的專案。</p>
<h3 id="package-lints-3-0-中的新的程式碼分析選項"><a href="#package-lints-3-0-中的新的程式碼分析選項" class="headerlink" title="package:lints 3.0 中的新的程式碼分析選項"></a>package:lints 3.0 中的新的程式碼分析選項</h3><p>說到程式碼分析，我們還在 <a href="https://pub.dev/packages/lints">package:lints</a> 中對我們的標準程式碼分析規則進行了一些改進。這個套件包含與使用 <code>dart create</code> 或 <code>flutter create</code> 建立的任何新專案一起提供的預設和推薦的靜態分析規則集（透過 <a href="https://pub.dev/packages/flutter_lints">package:flutter_lints</a> - package:lints 的擴展）。</p>
<p>這個 lint 集的最新主要版本 3.0 現在已經可以使用了。此修訂版在核心集添加了六個 lint，在推薦集添加了兩個 lint。它具有用於驗證 pubspec URL、驗證集合方法是否使用正確參數調用等的 lint。若要查看完整的更改列表，請查看 <a href="https://github.com/dart-lang/lints/blob/main/CHANGELOG.md#300">變更日誌</a>。3.0 版本將是下一個版本中新專案的預設版本。對於現有專案，您可以 <a href="https://github.com/dart-lang/lints#upgrading-to-the-latest-lints">立即升級</a>。</p>
<h3 id="Dart-互操作性更新"><a href="#Dart-互操作性更新" class="headerlink" title="Dart 互操作性更新"></a>Dart 互操作性更新</h3><p>在 <a href="https://dart.dev/overview#platform">各種平台</a> 上的多平台支援一直是 Dart 的核心原則。但是，即使 Dart 程式碼行可以在所有這些平台上無需更改地執行，大型應用程式仍然經常需要與現有程式碼互操作。這可能意味著來自舊專案的程式碼，或在其他函式庫或系統 API 中可用的 API。我們在這個領域進行了一系列投資，從用於 <a href="https://dart.dev/guides/libraries/c-interop">與原生 C API 互操作</a> 的 FFI 開始。我們目前正在努力將其擴展以支援與 <a href="https://dart.dev/guides/libraries/java-interop">Java 和 Kotlin</a> 以及 <a href="https://dart.dev/guides/libraries/objective-c-interop">Objective C 和 Swift</a> 互操作。有關 JS 互操作性的令人興奮的更新，請查看下面的 Dart Web 部分。</p>
<p>截至 Dart 3.2，我們對原生互操作性進行了許多改進：</p>
<ul>
<li>我們為 C FFI 引入了 <a href="https://api.dart.dev/stable/dart-ffi/NativeCallable/NativeCallable.isolateLocal.html">NativeCallable.isolateLocal</a> 建構函式，它從任意 Dart 函數建立 C 函數指標。這是 <a href="https://api.dart.dev/stable/dart-ffi/Pointer/fromFunction.html">Pointer.fromFunction</a> 提供的功能的擴展，它只能從頂層函數建立函數指標。</li>
<li>我們更新了 Objective-C 綁定生成器，以使用 <a href="https://api.dart.dev/stable/dart-ffi/NativeCallable/NativeCallable.listener.html">NativeCallable.listener</a>，我們在 Dart 3.1 中添加了它。生成器現在可以自動處理包含異步回調的 API，例如 <a href="https://developer.apple.com/documentation/coremotion">Core Motion</a>。以前，此類 API 需要手動編寫一些綁定程式碼。</li>
<li>我們繼續改進用於 Java 和 Kotlin 互操作性的 <a href="https://dart.dev/guides/libraries/java-interop">package:jnigen</a>。這使我們能夠將 <a href="https://pub.dev/packages/cronet_http">package:cronet_http</a> - Android Cronet HTTP 客戶端的包裝器 - 從手動編寫的綁定程式碼遷移到自動 <a href="https://github.com/dart-lang/http/blob/master/pkgs/cronet_http/jnigen.yaml">生成的</a> 包裝器。</li>
<li>我們在 <a href="https://github.com/dart-lang/sdk/issues/50565">原生資產</a> 功能方面取得了重大進展，該功能旨在解決與依賴原生程式碼的 Dart 套件分發相關的許多問題。它透過提供用於整合與構建 Flutter 和獨立 Dart 應用程式相關的各種構建系統的統一掛鉤來實現。若要查看預覽，請查看 <a href="http://dart.dev/guides/libraries/c-interop#native-assets">文件</a>。</li>
</ul>
<h3 id="Dart-套件的-DevTools-擴展"><a href="#Dart-套件的-DevTools-擴展" class="headerlink" title="Dart 套件的 DevTools 擴展"></a>Dart 套件的 DevTools 擴展</h3><p>Dart <a href="https://dart.dev/tools/dart-devtools">DevTools</a> 是一套用於除錯和效能分析的工具，支援純 Dart 和 Flutter 應用程式。在 Dart 3.2 和 Flutter 3.16 中，我們 <a href="https://medium.com/p/c8bc1aaf8e5f/">宣布</a> 推出一個新的 <a href="https://pub.dev/packages/devtools_extensions">擴展框架</a>，它使套件作者能夠為他們的套件構建自訂工具，並直接在 DevTools 中顯示。這允許包含框架的 pub.dev 套件提供專門針對其用例的自訂工具。例如，<a href="https://pub.dev/packages/serverpod">Serverpod</a> 的作者一直在努力為他們的套件構建開發人員工具，並且很高兴地宣布他們将在即将发布的 <a href="https://github.com/orgs/serverpod/projects/4">1.2 版本</a> 中发布 DevTools 扩展。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*N6ZSt1McXO_opQU7" />
<figcaption><em>計劃在即將推出的 ServerPod 1.2 版本中使用的 DevTools 擴展</em></figcaption>
</figure>

<h3 id="Dart-Web-和-Wasm-更新"><a href="#Dart-Web-和-Wasm-更新" class="headerlink" title="Dart Web 和 Wasm 更新"></a>Dart Web 和 Wasm 更新</h3><p>Wasm（也稱為 <a href="https://webassembly.org/">WebAssembly</a>）是一種用於 Web 瀏覽器的令人興奮的新指令格式，它提供了一種可移植、平台中立的二進制程式碼格式，以便在現代瀏覽器中執行。像 Dart 這樣的更高級別的受控語言使用垃圾收集，而垃圾收集正在添加到 Wasm 標準中。截至 Chrome 119，<a href="https://developer.chrome.com/blog/wasmgc/">Wasm 的垃圾收集支援</a>（稱為 Wasm-GC）已預設啟用。Wasm-GC 支援也即將在 Firefox 120 中推出，這是他們的下一個穩定版本。那麼 Dart、Flutter 和 Wasm-GC 的狀態如何呢？</p>
<p>Dart 到 Wasm 編譯器幾乎已完成功能。團隊對效能和相容性非常滿意。我們現在的重點是邊緣情況，以確保我們的輸出在各種情況下都能快速執行。</p>
<p>對於 Flutter Web，我們已完成一個新的「Skwasm」渲染引擎。為了最大限度地提高效能，Swasm 將編譯後的應用程式程式碼直接連接到使用 wasm 到 wasm 綁定的自訂 <a href="https://skia.org/docs/user/modules/canvaskit/">CanvasKit Wasm 模組</a>。它也是 Flutter Web 多線程渲染支援的第一個版本，它可以進一步提高幀時間。</p>
<p>在 Flutter Web 與 Wasm 擺脫目前的實驗狀態之前，還有一些事情需要完成：</p>
<ul>
<li><strong>雙重編譯：</strong> 生成 Wasm 和 JavaScript 輸出，并在運行時啟用功能偵測，以支持具有 Wasm-GC 支援和沒有 Wasm-GC 支援的瀏覽器。</li>
<li><strong>現代 JavaScript 互操作性：</strong> 基於 <a href="https://github.com/dart-lang/language/issues/2727">擴展類型</a> 的新的 JS 互操作性機制，以在針對 JavaScript 和 Wasm 時，在 Dart 程式碼、瀏覽器 API 和 JS 函式庫之間實現簡潔、類型安全的調用。</li>
<li><strong>具有 Wasm 支援的瀏覽器 API：</strong> 一個新的 package:web，基於現代 JS 互操作性機制，取代 dart:html（以及相關的函式庫）。這將為 JS 和 Wasm 目標上的瀏覽器 API 提供簡單的存取權。</li>
</ul>
<p>我們開始將許多內部專案遷移到 package:web 和新的 JS 互操作性機制，並預計在下一個穩定版本中會有更多更新。同時，您可以在我們的 <a href="https://flutter.dev/wasm">WebAssembly 支援</a> 頁面上獲取最新詳細資訊。</p>
<h3>結語</h3>

<p>今天就到這裡。Dart 3.2 現在可以從 <a href="https://dart.dev/get-dart">dart.dev</a> 中獲取，或者作為今天 <a href="https://medium.com/flutter/whats-new-in-flutter-3-16-dba6cb1015d1">Flutter 3.16</a> 版本的一部分。下次再見，祝您使用 Dart 開發愉快！</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=c8de8fe1b91f" width="1" height="1" alt=""><hr><p><a href="https://medium.com/dartlang/dart-3-2-c8de8fe1b91f">宣布 Dart 3.2</a> 最初發佈在 <a href="https://medium.com/dartlang">Dart</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p> </p>
<p>undefined</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/3aabc0cb.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/3aabc0cb.html" class="post-title-link" itemprop="url">【文章翻譯】Dart & Flutter DevTools Extensions</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-11-15 21:32:22" itemprop="dateCreated datePublished" datetime="2023-11-15T21:32:22+08:00">2023-11-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 16:55:14" itemprop="dateModified" datetime="2024-09-30T16:55:14+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="在-Dart-Flutter-DevTools-中構建自訂工具的指南"><a href="#在-Dart-Flutter-DevTools-中構建自訂工具的指南" class="headerlink" title="在 Dart &amp; Flutter DevTools 中構建自訂工具的指南"></a>在 Dart &amp; Flutter DevTools 中構建自訂工具的指南</h2><p>您是否曾經想為 Dart 和 Flutter 構建開發人員工具，但卻不知道從哪裡開始？或者，也許您不想經歷建立與正在運行的 Dart 或 Flutter 應用程式連接以存取除錯資料的所有工作？然後，即使您確實創建了一個開發人員工具，您又該如何部署它，或者如何讓使用者輕鬆地存取它？好吧，我們有一些好消息要告訴您：現在您可以創建開發人員工具，而無需面對所有這些障礙。</p>
<p>使用新的 Dart &amp; Flutter DevTools 擴展框架，您可以輕鬆地構建與現有的 DevTools 工具套件緊密整合的開發人員工具。擴展使用 Flutter Web 構建，並利用 DevTools 中現有的框架和實用程式來簡化開發人員工具編寫的體驗。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*JsdgKjxlVmm5EAFfXvQ2yA.png" />
<figcaption>package:foo 的 DevTools 擴展範例</figcaption>
</figure>

<h3 id="DevTools-擴展如何運作？"><a href="#DevTools-擴展如何運作？" class="headerlink" title="DevTools 擴展如何運作？"></a>DevTools 擴展如何運作？</h3><p>擴展作為 pub 套件的一部分發佈。例如，想像我們有一些 package:foo，這個套件提供了一個 DevTools 擴展。當使用者在他們的應用程式中依賴 package:foo 時，他們會自動獲得存取由這個套件提供的 DevTools 擴展。當這個使用者使用 DevTools 除錯他們的應用程式時，他們將會看到一個包含由 package:foo 提供的開發人員工具的新標籤「Foo」。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*FFl2jeYpyn8DfjRI5xQ8mQ.jpeg" />
</figure>

<p>您可以將 DevTools 擴展添加到現有的 pub 套件中，例如 <a href="https://pub.dev/packages/provider">package:provider</a>，<a href="https://pub.dev/packages/patrol">package:patrol</a>，或 <a href="https://pub.dev/packages/drift">package:drift</a>，它們都已經發佈了 DevTools 擴展，或者您可以創建一個僅提供 DevTools 擴展的新套件。在這兩種情況下，使用者都必須在他們的套件中列出一個對提供 DevTools 擴展的套件的相依性，才能在 DevTools 中看到開發人員工具。</p>
<h3 id="撰寫-DevTools-擴展：分步指南"><a href="#撰寫-DevTools-擴展：分步指南" class="headerlink" title="撰寫 DevTools 擴展：分步指南"></a>撰寫 DevTools 擴展：分步指南</h3><h4 id="在您開始之前"><a href="#在您開始之前" class="headerlink" title="在您開始之前"></a>在您開始之前</h4><p>您將需要：</p>
<ul>
<li>Flutter SDK &gt;&#x3D; 3.17.0–0.0.pre &amp; Dart SDK &gt;&#x3D; 3.2.</li>
<li>一個 <a href="https://pub.dev/">Pub</a> 套件（現有或新的），用於添加 DevTools 擴展。</li>
</ul>
<blockquote>建議從 Flutter master channel 開發您的擴展，以便使用最新的 [devtools_extensions](https://pub.dev/packages/devtools_extensions) 和 [devtools_app_shared](https://pub.dev/packages/devtools_app_shared) 套件。</blockquote>

<h3 id="第-1-步：設定您的套件層級結構"><a href="#第-1-步：設定您的套件層級結構" class="headerlink" title="第 1 步：設定您的套件層級結構"></a>第 1 步：設定您的套件層級結構</h3><p>若要將擴展添加到您的 Dart 套件，請將一個頂級擴展目錄添加到您的套件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">foo/</span><br><span class="line">  extension/</span><br><span class="line">  lib/</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>

<p>在 extension 目錄下，建立以下結構（如所示）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">extension/</span><br><span class="line">  devtools/</span><br><span class="line">    build/</span><br><span class="line">    config.yaml</span><br></pre></td></tr></table></figure>

<p><code>config.yaml</code> 檔案應該包含 DevTools 需要載入擴展的元資料：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">foo</span></span><br><span class="line"><span class="attr">version:</span> <span class="number">0.0</span><span class="number">.1</span></span><br><span class="line"><span class="attr">issue_tracker:</span> <span class="string">&lt;link_to_your_issue_tracker.com&gt;</span></span><br><span class="line"><span class="attr">material_icon_code_point:</span> <span class="string">&#x27;0xe0b1&#x27;</span></span><br></pre></td></tr></table></figure>

<p>複製上面的 <code>config.yaml</code> 檔案內容，並將其貼到您剛在套件中創建的 <code>config.yaml</code> 檔案中。對於每個金鑰，請填寫您的套件的適當值。</p>
<ul>
<li><code>name</code>：此 DevTools 擴展所屬的套件名稱。此欄位的 value 用於擴展頁面的標題列中。**[必填]**</li>
<li><code>version</code>：您的 DevTools 擴展的版本。這個版本號碼應該隨著時間的推移而演進，因為您為您的擴展發佈了新的功能。此欄位的 value 用於擴展頁面的標題列中。**[必填]**</li>
<li><code>issue_tracker</code>：您的問題追蹤器 URL。當使用者點擊 DevTools UI 中的「回報問題」連結時，他們將被導向到此 URL。**[必填]**</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/583/1*H0Q1Zv2L6_NUFUedI6mkQw.png" />
<figcaption>DevTools 擴展螢幕標題列</figcaption>
</figure>

<ul>
<li><code>material_icon_code_point</code>：對應於 <a href="https://github.com/flutter/flutter/blob/master/packages/flutter/lib/src/material/icons.dart">material&#x2F;icons.dart</a> 中圖示的代碼點值。這個圖示用於擴展在頂級 DevTools 標籤列中的標籤。**[必填]**</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/83/1*bkNzahdp7eXUo7Xwh1U07Q.png" />
<figcaption>DevTools 擴展標籤圖示</figcaption>
</figure>

<p>有關 <code>config.yaml</code> 規格的最新文件，請參閱 <a href="https://github.com/flutter/devtools/blob/master/packages/devtools_extensions/extension_config_spec.md">extension_config_spec.md</a>。</p>
<h4 id="應該將您的擴展原始碼放在哪裡？"><a href="#應該將您的擴展原始碼放在哪裡？" class="headerlink" title="應該將您的擴展原始碼放在哪裡？"></a>應該將您的擴展原始碼放在哪裡？</h4><p>只有您的 Flutter 擴展 Web 應用程式的預先編譯輸出需要與您的 pub 套件一起發佈，以便 DevTools 將其載入到嵌入式 iFrame 中。為了使您的 pub 套件的大小保持較小，我們建議您在 pub 套件之外開發您的 DevTools 擴展。我們建議使用以下套件結構：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">foo/  </span><br><span class="line">  packages/</span><br><span class="line">    foo/  # 您的 pub 套件</span><br><span class="line">      extension/</span><br><span class="line">        devtools/</span><br><span class="line">          build/</span><br><span class="line">            ...  # foo_devtools_extension 的預先編譯輸出</span><br><span class="line">          config.yaml</span><br><span class="line">      ...</span><br><span class="line">    foo_devtools_extension/  # 您的擴展的原始碼</span><br></pre></td></tr></table></figure>

<p>現在是時候開發您的擴展了。</p>
<h3 id="第-2-步：創建一個-DevTools-擴展"><a href="#第-2-步：創建一個-DevTools-擴展" class="headerlink" title="第 2 步：創建一個 DevTools 擴展"></a>第 2 步：創建一個 DevTools 擴展</h3><p>從您想要放置您的擴展原始碼的目錄（在上面的示例中為 <code>foo/packages</code>）中，運行以下命令，將 <code>foo_devtools_extension</code> 替換為 <code>&lt;your_package_name&gt;_devtools_extension</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter create --template app --platforms web foo_devtools_extension</span><br></pre></td></tr></table></figure>

<p>在 <code>foo_devtools_extension/pubspec.yaml</code> 中，添加對 <code>devtools_extensions</code> 的相依性：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devtools_extensions:</span> <span class="string">^0.0.10</span></span><br></pre></td></tr></table></figure>

<p>在 <code>foo_devtools_extension/lib/main.dart</code> 中，將 <code>DevToolsExtension</code> Widget 放置在應用程式的根目錄：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:devtools_extensions/devtools_extensions.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(<span class="keyword">const</span> FooDevToolsExtension());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooDevToolsExtension</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> FooDevToolsExtension(&#123;<span class="keyword">super</span>.key&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">const</span> DevToolsExtension(</span><br><span class="line">      child: Placeholder(), <span class="comment">// 在這裡構建您的擴展</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>DevToolsExtension</code> Widget 自動執行與 DevTools 互動所需的全部擴展初始化。在您的擴展 Web 應用程式中的任何地方，您都可以存取全域變數 <code>extensionManager</code> 和 <code>serviceManager</code>，以向 DevTools 發送消息或反向發送消息，或者與連接的應用程式互動。</p>
<h4 id="利用輔助套件"><a href="#利用輔助套件" class="headerlink" title="利用輔助套件"></a>利用輔助套件</h4><p>使用 <a href="https://pub.dev/packages/devtools_app_shared">package:devtools_app_shared</a> 來存取服務管理器、通用 Widget、DevTools 主題、實用程式等等。請參閱 <a href="https://github.com/flutter/devtools/tree/master/packages/devtools_app_shared/example">devtools_app_shared&#x2F;example</a> 以獲取範例用法。</p>
<h3 id="第-3-步：除錯-DevTools-擴展"><a href="#第-3-步：除錯-DevTools-擴展" class="headerlink" title="第 3 步：除錯 DevTools 擴展"></a>第 3 步：除錯 DevTools 擴展</h3><p>在開發和維護您的 DevTools 擴展時，您需要運行、除錯和測試您的擴展 Flutter Web 應用程式。您可以使用以下列出的幾個不同選項來完成此操作。</p>
<h4 id="選項-A：使用模擬的-DevTools-環境（建議用於開發）"><a href="#選項-A：使用模擬的-DevTools-環境（建議用於開發）" class="headerlink" title="選項 A：使用模擬的 DevTools 環境（建議用於開發）"></a>選項 A：使用模擬的 DevTools 環境（建議用於開發）</h4><p>為了除錯，您可能想要使用「模擬的 DevTools 環境」。這是一個模擬環境，允許您構建您的擴展，而無需將其作為 DevTools 中的嵌入式 iFrame 開發。以這種方式運行您的擴展將用模擬 DevTools 到 DevTools 擴展連接的環境來包裝您的擴展。它還可以讓您存取熱重啟，並加快開發週期。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*-3c-p57ai0Quc5rJOL9qEQ.png" />
<figcaption>使用模擬的 DevTools 環境除錯擴展</figcaption>
</figure>

<ol>
<li><em>您的 DevTools 擴展。</em></li>
<li><em>您的 DevTools 擴展將與其交互的測試應用程式的 VM 服務 URI。這個應用程式應該依賴於您的擴展的父套件（在本示例中為 package:foo）。</em></li>
<li><em>用於執行使用者可能從 DevTools 觸發的動作的按鈕。</em></li>
<li><em>顯示將在您的擴展和 DevTools 之間發送的消息的日誌。</em></li>
</ol>
<p>模擬環境由 <code>environment</code> 參數 <code>use_simulated_environment</code> 啟用。若要使用啟用了此標誌的運行您的擴展 Web 應用程式，請在 VS Code 中的 <code>launch.json</code> 檔案中添加一個配置：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;foo_devtools_extension + simulated environment&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;packages/foo_devtools_extension&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dart&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;--dart-define=use_simulated_environment=true&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>或者，您可以使用添加了標誌的命令行來啟動您的應用程式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter run -d chrome - dart-define=use_simulated_environment=<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h4 id="選項-B：使用真實的-DevTools-環境"><a href="#選項-B：使用真實的-DevTools-環境" class="headerlink" title="選項 B：使用真實的 DevTools 環境"></a>選項 B：使用真實的 DevTools 環境</h4><p>一旦您將您的擴展開發到可以使用真實的 DevTools 環境測試更改的程度，您需要執行一系列設定步驟：</p>
<ol>
<li>構建您的 Flutter Web 應用程式，並將構建的資產從 <code>your_extension_web_app/build/web</code> 目錄複製到父套件的 <code>extension</code> 目錄（<code>your_pub_package/extension/devtools/build</code>）。若要執行此操作，請使用 <code>package:devtools_extensions</code> 中的  <code>build_and_copy</code> 命令：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> your_extension_web_app;</span><br><span class="line">flutter pub get;</span><br><span class="line">dart run devtools_extensions build_and_copy --<span class="built_in">source</span>=. --dest=path/to/your_pub_package/extension/devtools</span><br></pre></td></tr></table></figure>

<blockquote>注意：如果您使用的是上面推薦的套件結構，則 `--dest` 的值應該為 `../your_pub_package/extension/devtools`。</blockquote>

<ol start="2">
<li><p>準備並運行一個依賴於您的 pub 套件的測試應用程式。在測試應用程式的 <code>pubspec.yaml</code> 檔案中，您需要將套件的相依性更改為指向您的本地套件原始碼的 <a href="https://dart.dev/tools/pub/dependencies#path-packages">路徑相依性</a>。完成此操作後，在測試應用程式上運行 <code>flutter pub get</code>，並運行該應用程式。</p>
</li>
<li><p>啟動 DevTools。打開剛透過運行您的測試應用程式啟動的 DevTools 實例。您可以從命令行列印的 URL 或從運行測試應用程式的 IDE 中打開 DevTools。或者，您也可以從命令行運行 <code>dart devtools</code>。</p>
</li>
</ol>
<blockquote>注意：如果您需要 DevTools 的本地或未發佈的更改，您需要從原始碼構建並運行 DevTools（[伺服器 + 前端](https://github.com/flutter/devtools/blob/master/CONTRIBUTING.md#frontend--devtools-server)）。請參閱 DevTools 的 [CONTRIBUTING](https://github.com/flutter/devtools/blob/master/CONTRIBUTING.md) 指南。</blockquote>

<ol start="4">
<li>如果 DevTools 尚未與您的測試應用程式連接，請將其連接，您應該在 DevTools 應用程式列中看到您的擴展的標籤。您的擴展的啟用或停用狀態由 DevTools 管理。擴展啟用狀態會從 DevTools 中的「Extensions」菜單中公開，這個菜單可以在螢幕右上角的動作按鈕中找到。</li>
</ol>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/576/0*s9-Y9X5dTyuk6Xj4" />
<figcaption>DevTools Extensions 菜單按鈕</figcaption>
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/789/1*DSi_p-2FO60qo5JUKXk-3Q.png" />
<figcaption>DevTools Extensions 菜單</figcaption>
</figure>

<h3 id="第-4-步：發佈包含-DevTools-擴展的套件"><a href="#第-4-步：發佈包含-DevTools-擴展的套件" class="headerlink" title="第 4 步：發佈包含 DevTools 擴展的套件"></a>第 4 步：發佈包含 DevTools 擴展的套件</h3><p>為了讓套件能夠向其使用者提供 DevTools 擴展，它必須在 <code>your_pub_package/extension/devtools/</code> 目錄中包含預期的內容（請參閱上面的設定說明）。</p>
<ol>
<li>確保 <code>your_pub_package/extension/devtools/config.yaml</code> 檔案存在，並且按照上面的規格進行配置。</li>
<li>使用 <code>package:devtools_extensions</code> 提供的 <code>build_and_copy</code> 命令來構建您的擴展，并将輸出複製到 <code>extension/devtools</code> 目录：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> your_extension_web_app;</span><br><span class="line">flutter pub get;</span><br><span class="line">dart run devtools_extensions build_and_copy --<span class="built_in">source</span>=. --dest=path/to/your_pub_package/extension/devtools</span><br></pre></td></tr></table></figure>

<p>然後將您的套件發佈到 <a href="https://pub.dev/">pub.dev</a>：<code>flutter pub publish</code>。有關發佈套件的更多指南，請參閱 <code>package:devtools_extensions</code> 的 <a href="https://pub.dev/packages/devtools_extensions#publish-your-package-with-a-devtools-extension">發佈指南</a>。</p>
<h3 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h3><p>就是這樣！現在，當使用者依賴於您的套件的最新版本時，他們將自動获得存取您在您的 DevTools 擴展中提供的工具。這個功能才剛剛推出，因此我們迫切希望听到您的回饋。</p>
<p>對於錯誤和功能請求，請在 DevTools 的 <a href="https://github.com/flutter/devtools/issues">問題追蹤器</a> 上提交問題。</p>
<p>要获得一般支援并存取 DevTools 擴展作者社群，請查看  <a href="https://discord.com/channels/608014603317936148/1159561514072690739">Discord #devtools-extension-authors</a> 頻道（您首先需要加入 <a href="https://github.com/flutter/flutter/wiki/Chat">Flutter Discord 伺服器</a>）。</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=c8bc1aaf8e5f" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/dart-flutter-devtools-extensions-c8bc1aaf8e5f">Dart &amp; Flutter DevTools Extensions</a> was originally published in <a href="https://medium.com/flutter">Flutter</a> on Medium, where people are continuing the conversation by highlighting and responding to this story.</p></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/b21eb2d5.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/b21eb2d5.html" class="post-title-link" itemprop="url">【文章翻譯】What’s new in Flutter 3.16</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-11-15 21:31:28" itemprop="dateCreated datePublished" datetime="2023-11-15T21:31:28+08:00">2023-11-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 16:55:14" itemprop="dateModified" datetime="2024-09-30T16:55:14+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="Flutter-3-16-的新功能"><a href="#Flutter-3-16-的新功能" class="headerlink" title="Flutter 3.16 的新功能"></a>Flutter 3.16 的新功能</h2><figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*TDndNB8cS95g5faXBKitHA.png" />
</figure>

<h4 id="Material-3-成為預設主題、Impeller-在-Android-上預覽、DevTools-擴展等等"><a href="#Material-3-成為預設主題、Impeller-在-Android-上預覽、DevTools-擴展等等" class="headerlink" title="Material 3 成為預設主題、Impeller 在 Android 上預覽、DevTools 擴展等等"></a>Material 3 成為預設主題、Impeller 在 Android 上預覽、DevTools 擴展等等</h4><p>歡迎回到 Flutter 季度穩定版本，這次是 Flutter 3.16。此版本將 Material 3 設定為新的預設主題，將 Impeller 預覽帶到 Android，允許為 DevTools 添加擴展，等等！它也與 <a href="https://medium.com/flutter/building-your-next-casual-game-with-flutter-716ef457e440">Flutter 休閒遊戲工具包的重大更新</a> 相符！</p>
<p>自上次發布以來僅僅三個月的時間，我們就有 145 位社群成員合併了 928 個拉取請求，其中 40 位社群成員為 Flutter 完成了他們的第一次提交！</p>
<p>繼續閱讀，了解 Flutter 社群為這個最新版本貢獻的所有新增功能和改進！</p>
<h3 id="架構"><a href="#架構" class="headerlink" title="架構"></a>架構</h3><h4 id="Material-3-是新的預設主題"><a href="#Material-3-是新的預設主題" class="headerlink" title="Material 3 是新的預設主題"></a>Material 3 是新的預設主題</h4><p>自 3.10 版本（2023 年 5 月）以來，Material 函式庫已更新以符合最新的 Material Design 規範。變更包括新的組件和組件主題，以及更新的組件視覺效果。在 3.16 版本之前，這些變更是「選擇性加入」，使用 <code>useMaterial3</code> 主題標誌。自此版本起，<code>useMaterial3</code> 預設為 true。（<a href="https://github.com/flutter/flutter/pull/130764">＃130764</a>）</p>
<p>您仍然可以在 MaterialApp 主題中指定 <code>useMaterial3: false</code> 來選擇不使用 M3 版本的 Material 函式庫，但 Material 2 最終將被棄用並移除。此外，一些 Widget 無法僅更新，而是需要全新的實作。因此，當您看到 Material 3 執行時，您的 UI 看起來可能會有點奇怪。要解決此問題，請手動遷移到新的 Widget，例如 <a href="https://api.flutter.dev/flutter/material/NavigationBar-class.html">NavigationBar</a>。有關更多詳細資訊，請查看 GitHub 上的 <a href="https://github.com/flutter/flutter/issues/91605">Material 3 總體問題</a>。</p>
<p><a href="https://flutter.github.io/samples/material_3.html">示範應用程式</a> 允許您嘗試所有組件。示範支援切換 <code>useMaterial3</code>，以便您可以比較變更。</p>
<p>Material 3 組件的外觀主要由 [ThemeData.colorScheme] 和 [ThemeData.textTheme] 的值決定。建立 Material 3 色彩方案的首選方法是使用 <code>ColorScheme.fromSeed()</code>，它會建立美觀且符合無障礙對比度要求的深色和淺色方案。您也可以使用 <code>ColorScheme.fromImageProvider</code> 從圖像中的主要顏色建立色彩方案。要進一步自訂 Material 3 組件的外觀，請將組件主題添加到您的 ThemeData，例如 <a href="https://api.flutter.dev/flutter/material/SegmentedButtonThemeData-class.html">ThemeData.segmentedButtonTheme</a> 或 <a href="https://api.flutter.dev/flutter/material/SnackBarThemeData-class.html">ThemeData.snackBarTheme</a>。非空的組件主題屬性會覆蓋組件 API 文件中指定的預設值。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*LMOV8BTSB4tEIisF" />
</figure>

<h4 id="支援-Material-3-動畫"><a href="#支援-Material-3-動畫" class="headerlink" title="支援 Material 3 動畫"></a>支援 Material 3 動畫</h4><p>對 Material 3 動畫的改進包括添加 <code>Easing</code> 和 <code>Durations</code> 類別。Material 2 曲線已重新命名為包含「legacy」一詞，並將最終被棄用並移除。（<a href="https://github.com/flutter/flutter/pull/129942">＃129942</a>）</p>
<h4 id="在編輯選單中添加更多選項"><a href="#在編輯選單中添加更多選項" class="headerlink" title="在編輯選單中添加更多選項"></a>在編輯選單中添加更多選項</h4><p>在原生 iOS 上，使用者現在可以選取文字並啟動一個共享選單，其中提供了多種標準服務。在此版本中，我們已添加了查找、搜尋和共享選項。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/0*YKZc4cxJjsafHgd4" />
</figure>

<h4 id="TextScaler-用於指定全局文字比例因子"><a href="#TextScaler-用於指定全局文字比例因子" class="headerlink" title="TextScaler 用於指定全局文字比例因子"></a>TextScaler 用於指定全局文字比例因子</h4><p>為了支援 Android 14 的 <a href="https://blog.google/products/android/android-14/#:~:text=Also%2C%20you%20can%20improve%20readability,rate%20than%20smaller%20font%20size.">非線性字體縮放功能</a>，該功能有助於視力障礙人士，新的 <a href="https://api.flutter.dev/flutter/painting/TextScaler-class.html">TextScaler</a> 類別替換了 <code>Text.textScaleFactor</code> 屬性。（<a href="https://github.com/flutter/flutter/pull/128522">＃128522</a>）</p>
<h4 id="SelectionArea-更新"><a href="#SelectionArea-更新" class="headerlink" title="SelectionArea 更新"></a>SelectionArea 更新</h4><p>Flutter 的 SelectionArea 已更新以支援使用滑鼠單擊或雙擊以及在觸控設備上長按的原生手勢。這些新的手勢預設情況下在 SelectionArea 和 SelectableRegion 中可用。</p>
<ul>
<li>單擊：在點擊位置設置摺疊選取。</li>
<li>雙擊：選取點擊位置的文字。</li>
<li>雙擊 + 拖動：擴展文字區塊中的選取範圍。</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/424/0*4RDi6tkvHa3R2uqa" />
</figure>

<ul>
<li>長按 + 拖動：擴展文字區塊中的選取範圍。</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/652/0*Xhow360Xn88KLAWF" />
</figure>

<h4 id="操作焦點-Widget-的選單項目"><a href="#操作焦點-Widget-的選單項目" class="headerlink" title="操作焦點 Widget 的選單項目"></a>操作焦點 Widget 的選單項目</h4><p>此版本提供了在使用選單項目時清理焦點變更的功能：<code>FocusManager</code> 的 <code>applyFocusChangesIfNeeded</code> 函數現在恢復選單焦點 - 當使用者點擊選單項目時，焦點將已返回到打開選單之前具有焦點的項目。（<a href="https://github.com/flutter/flutter/pull/130536">＃130536</a>）</p>
<h4 id="為-iOS、macOS-自動重新排序選單項目捷徑"><a href="#為-iOS、macOS-自動重新排序選單項目捷徑" class="headerlink" title="為 iOS、macOS 自動重新排序選單項目捷徑"></a>為 iOS、macOS 自動重新排序選單項目捷徑</h4><p>Mac 平台上的 Flutter 應用程式現在按照 Apple 人機介面指南對選單中的捷徑修飾符進行排序。（<a href="https://github.com/flutter/flutter/pull/129309">＃129309</a>）</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/522/0*b1mnWiuWv-cxt7g7" />
<figcaption>Before</figcaption>
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/522/0*LbHdBtWltdB4_Kcf" />
<figcaption>After</figcaption>
</figure>

<h4 id="MatrixTransition-動畫"><a href="#MatrixTransition-動畫" class="headerlink" title="MatrixTransition 動畫"></a>MatrixTransition 動畫</h4><p>新的 <code>MatrixTransition</code> Widget 允許在建立動畫轉場時進行轉換。根據當前的動畫值，您可以提供將應用於子 Widget 的矩陣轉換，以產生以下 GIF 中的效果。（<a href="https://dartpad.dev/?channel=beta&id=c82be58209035722f2cc7d78da855329">DartPad 中的範例</a>）（<a href="https://github.com/flutter/flutter/pull/131084">＃131084</a>）</p>
<h4 id="PaintPattern-加入到-flutter-test"><a href="#PaintPattern-加入到-flutter-test" class="headerlink" title="PaintPattern  加入到 flutter_test"></a>PaintPattern  加入到 flutter_test</h4><p>在 <code>flutter_test</code> 套件中，新的 <code>PaintPattern</code> 類別允許您驗證 <code>CustomPainters</code> 和 <code>Decorations</code> 等 Widget 對畫布進行的繪製調用（用於單元測試）。</p>
<p>以前，需要一個 golden 檔案來驗證是否繪製了正確的顏色和矩形，但現在可以使用 <code>PaintPattern</code>。以下範例驗證了 <code>MyWidget</code> 是否在畫布上繪製了一個圓形：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">expect(</span><br><span class="line">  find.byType(MyWidget),</span><br><span class="line">  paints</span><br><span class="line">    ..circle(</span><br><span class="line">      x: 10,</span><br><span class="line">      y: 10,</span><br><span class="line">      radius: 20,</span><br><span class="line">      color: const Color(0xFFF44336),</span><br><span class="line">    ),</span><br><span class="line">);</span><br><span class="line">// 多個繪製調用甚至可以連在一起。</span><br><span class="line">expect(</span><br><span class="line">  find.byType(MyWidget),</span><br><span class="line">  paints</span><br><span class="line">    ..circle(</span><br><span class="line">      x: 10,</span><br><span class="line">      y: 10,</span><br><span class="line">      radius: 20,</span><br><span class="line">      color: const Color(0xFFF44336),</span><br><span class="line">    ),</span><br><span class="line">    ..image(</span><br><span class="line">      image: MyImage,</span><br><span class="line">      x: 20,</span><br><span class="line">      y: 20,</span><br><span class="line">    ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>此 API 以前存在於框架測試檔案的深處，我們注意到一些開發人員發現它如此有用，他們已將其複製到他們自己的專案中。如果這適用於您，則可以在升級到 Flutter 3.16 後從您的專案中刪除副本。</p>
<h4 id="捲軸更新"><a href="#捲軸更新" class="headerlink" title="捲軸更新"></a>捲軸更新</h4><p>在 Flutter 3.13 首次發布二維捲軸基礎之後，此版本帶來更多功能和修飾。使用 Flutter 3.16，2D 基礎現在支援 <code>KeepAlive</code> Widget，以及預設焦點遍歷和隱式捲軸。建立在基礎之上的 2D 捲軸 Widget 將自動採用此支援。有關在 2D 基礎之上建立的綜合指南，請查看 <a href="https://www.youtube.com/watch?v=ppEdTo-VGcg">Flutter Build Show 的最新一期</a>。</p>
<p>在 3.13 版本發布後不久，<a href="https://pub.dev/packages/two_dimensional_scrollables">two_dimensional_scrollables</a> 套件發佈了。此套件由 Flutter 團隊維護，其中包含建立在框架基礎之上的第一個 2D 捲軸 Widget - TableView。自最初發布以來，已添加了更多裝飾和樣式支援，以及額外的錯誤修復。</p>
<h3 id="引擎"><a href="#引擎" class="headerlink" title="引擎"></a>引擎</h3><h4 id="Impeller"><a href="#Impeller" class="headerlink" title="Impeller"></a>Impeller</h4><h4 id="Android"><a href="#Android" class="headerlink" title="Android"></a><strong>Android</strong></h4><p>在此版本中，我們很高興地分享 Impeller 在 Android 上已準備好在 stable channel 上進行預覽回饋。自今年年初以來，團隊一直在努力為 Impeller 開發 Vulkan 後端，此預覽版本包括收集有關 Impeller 在支援 Vulkan 的設備上的特性的回饋。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*wyMXhtcLW98BTKl-" />
<figcaption><em>此圖表顯示了過去一年中 Flutter Gallery 轉場效能基準在 Impeller 的 Vulkan 後端上運行時的 99%-ile、90%-ile 和平均幀柵格化時間的改進，使用者會觀察到卡頓現象減少和更高的穩定狀態幀速率。在這個時期的末尾，我們從三星 S10 設備切換到 Pixel 7 Pro 設備，這解釋了數字的顯著下降。儘管如此，我們發現趨勢和整體結果非常令人鼓舞。</em></figcaption>
</figure>

<p>預計 Impeller 在沒有 Vulkan 支援的設備上還沒有良好的表現。隨著我們在未來幾個月內將 Impeller 的 OpenGL 後端提升到功能完整性，我們計劃在未來的穩定版本中徵求有關 Impeller 在此類設備上的特性的回饋。</p>
<p>Flutter 開發人員可以透過將 <code>--enable-impeller</code> 標誌傳遞給 <code>flutter run</code>，或在專案的 <code>AndroidManifest.xml</code> 檔案中將以下設定添加到 <code>&lt;application&gt;</code> 標籤下，在支援 Vulkan 的 Android 設備上試用 Impeller：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta-data</span><br><span class="line">  android:name=&quot;io.flutter.embedding.android.EnableImpeller&quot;</span><br><span class="line">  android:value=&quot;true&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>為了確定設備是否支援 Vulkan，Impeller 使用了 <a href="https://github.com/flutter/engine/blob/main/impeller/docs/android.md#rendering-backend-selection">Impeller 儲存庫文件</a> 中討論的測試。通常，Impeller 在運行 Android API 等級 29 或更新版本且 64 位元作業系統的設備上使用 Vulkan 後端。使用者也可以按照 <a href="https://docs.vulkan.org/guide/latest/checking_for_support.html#_android">檢查 Vulkan 支援</a> 中的建議，確定其設備是否支援 Vulkan。</p>
<p>雖然對我們迄今為止在 Impeller 的 Vulkan 後端上取得的進展充滿信心，但在預覽階段開始時，仍然存在一些已知問題：</p>
<ul>
<li>平台視圖尚未實作，而原本應該包含平台視圖的幀表現不佳。</li>
<li>自訂著色器尚未實作。</li>
<li>有關 <a href="https://github.com/orgs/flutter/projects/21/views/1?filterQuery=-status:%22%E2%9C%85+Done%22+status:%22%F0%9F%90%9E+Bugs%22">已知錯誤</a> 和 <a href="https://github.com/orgs/flutter/projects/21/views/11">缺少的功能</a> 的完整列表，最新的資訊位於 GitHub 上的 Impeller <a href="https://github.com/orgs/flutter/projects/21">專案看板</a>。許多問題已在 3.17 beta 版中得到修復，因此請也嘗試一下。</li>
</ul>
<p>我們對 Impeller 在我們已嘗試的支援 Vulkan 的 Android 設備上的保真度和效能方面取得的進展感到滿意。但是，與 iOS 相比，Android 硬體生態系統更加多元，我們預計在 stable channel 上將其設為預設後端之前，Android 的預覽時間會比 iOS 長。因此，關於 Impeller 最有用的回饋應包括有關發生問題的特定設備和 Android 版本的詳細資訊。</p>
<p>此外，Impeller 的 Vulkan 後端在「debug」版本中啟用了超出 Skia 使用的額外除錯功能，這些功能具有額外的運行時開銷。因此，重要的是，有關 Impeller 效能的回饋來自 profile 或 release 版本，並且應包括 DevTools 中的時間軸，以及與相同設備上的 Skia 後端的比較。最後，與往常一樣，我們非常感謝包含小型可重複測試案例的回饋，該案例演示了問題。</p>
<h4 id="Impeller-效能、保真度和穩定性"><a href="#Impeller-效能、保真度和穩定性" class="headerlink" title="Impeller 效能、保真度和穩定性"></a>Impeller 效能、保真度和穩定性</h4><p>除了關注 Vulkan 後端之外，自今年年初以來，團隊還針對 Impeller 中的文字效能進行了許多改進，這些改進對 Android 和 iOS 都很有益。特別是，我們改進了 Impeller 的字形圖集的管理方式，以及在引擎的 UI 和柵格化線程之間劃分文字工作負載的方式。因此，使用者將注意到文字密集型工作負載中的卡頓現象減少。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*RPu62U3N57JJqu0b" />
<figcaption><em>此圖表顯示了使用 Impeller 的 iPhone 11 上的一個文字密集型基準測試中，99%-ile、90%-ile 和平均幀柵格化時間（以毫秒為單位）的減少。特別是，90%-ile 和平均幀柵格化時間幾乎減少了一半。</em></figcaption>
</figure>

<p>團隊還一直在努力針對 Android 和 iOS 的保真度和穩定性進行改進，特別是那些使用者報告的改進。特別是，在這個穩定版本週期的三個月中，團隊對 <code>flutter/engine</code> 儲存庫進行了 209 個與 Impeller 相關的提交，解決了 217 個問題，包括 42 個使用者報告的保真度、穩定性或效能問題。</p>
<h4 id="引擎效能"><a href="#引擎效能" class="headerlink" title="引擎效能"></a>引擎效能</h4><p>為了支援具有異質多處理的行動設備上的更好效能，我們 <a href="https://github.com/flutter/engine/pull/45673">修改了</a> 引擎，以便效能敏感的線程（例如 UI 和柵格化線程）對設備上更強大的核心具有親和力。我們觀察到，此變更對一系列基準測試和設備產生了積極影響。在某些情況下，改進非常顯著，99%-ile 或 90%-ile 幀時間減少了一半甚至更多。我們預計在 Android 上使用 Skia 和 Impeller 後端的使用者會在這種變更之後觀察到卡頓現象減少。這種效果在 iOS 設備上沒有那麼顯著，因為強大和弱核心之間的差異較小。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*v9hhy6Y9fhfIbejZ" />
<figcaption><em>此圖表顯示了幾乎所有 Android 基準測試和設備的，最差、99%-ile、90%-ile 和平均幀構建時間以及幀柵格化時間的改進。</em></figcaption>
</figure>

<h4 id="API-和保真度改進"><a href="#API-和保真度改進" class="headerlink" title="API 和保真度改進"></a>API 和保真度改進</h4><h4 id="Impeller-效能覆蓋"><a href="#Impeller-效能覆蓋" class="headerlink" title="Impeller 效能覆蓋"></a>Impeller 效能覆蓋</h4><p>在以前的版本中，Flutter 的 <a href="https://docs.flutter.dev/perf/ui-performance#the-performance-overlay">效能覆蓋</a> 功能未顯示在 Impeller 中。此版本修復了此問題。效能覆蓋 <a href="https://github.com/flutter/engine/pull/45259">現在已正確顯示</a>，啟用了 Impeller。</p>
<h4 id="模擬顯示現在已正確顯示"><a href="#模擬顯示現在已正確顯示" class="headerlink" title="模擬顯示現在已正確顯示"></a>模擬顯示現在已正確顯示</h4><p>在此版本中，<code>Paint.enableDithering</code> 屬性設定為 true，並且根據 <a href="https://docs.flutter.dev/release/compatibility-policy#deprecation-policy">Flutter 的棄用政策</a> 被棄用。模擬現在預設情況下已啟用（不再支援開發者可配置的模擬），您將不再看到條紋問題。有關此變更和遷移指南的完整解釋，請查看 docs.flutter.dev 上的 <a href="https://docs.flutter.dev/release/breaking-changes/paint-enableDithering">重大變更頁面</a>。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1014/0*yoTgJmfOTF1NrHyf" />
<figcaption>Before</figcaption>
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1019/0*cnBlQufEWMXx6AJI" />
<figcaption>After</figcaption>
</figure>

<h3 id="遊戲"><a href="#遊戲" class="headerlink" title="遊戲"></a>遊戲</h3><h4 id="Flutter-遊戲工具包"><a href="#Flutter-遊戲工具包" class="headerlink" title="Flutter 遊戲工具包"></a>Flutter 遊戲工具包</h4><p>在過去的幾年中，我們看到了圍繞休閒遊戲開發的社群不斷增長。成千上萬的遊戲使用 Flutter 發佈，從簡單但有趣的益智遊戲到更複雜的街機遊戲。我們最喜歡的遊戲包括 Etermax 的 <a href="https://triviacrack.com/">Trivia Crack</a>、Lotum 的 <a href="https://flutter.dev/showcase/lotum">4 Pics 1 Word</a>（猜詞遊戲）、Dong Digital 的 <a href="https://play.google.com/store/apps/details?id=net.countrymania.brick&hl=en">Brick Mania</a>（街機遊戲）、Onrizon 的 <a href="https://play.google.com/store/apps/details?id=com.gartic.StopotS&hl=en">StopotS</a>（類別遊戲）、我們為 I&#x2F;O 在 Flutter 中建立的 <a href="https://pinball.flutter.dev/">復古彈珠台遊戲</a>，以及在他們的社交和選單螢幕中使用 Flutter 的 <a href="https://flutter.dev/showcase/pubg-mobile">PUBG 行動遊戲</a>。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/942/1*yWHI-1YwQAFUIVFvr5jGHQ.gif" />
</figure>

<p>為了幫助遊戲開發人員提高生產力，今天 Flutter 推出了其 <a href="http://flutter.dev/">休閒遊戲工具包</a> 的重大更新。它是一個包含了新資源的集合，可以幫助您從概念到發布，它提供了更多特定於類型的範本，例如紙牌遊戲、無盡的跑酷遊戲，以及服務整合，例如 Play Games Services、應用內購買、廣告、成就、Crashlytics 和多人遊戲支援。要了解更多資訊，請查看 <a href="https://medium.com/flutter/building-your-next-casual-game-with-flutter-716ef457e440">遊戲工具包發布文章</a>，作者為 <a href="https://medium.com/@zoeyfan_43394">Zoey Fan</a>。</p>
<h3 id="網頁"><a href="#網頁" class="headerlink" title="網頁"></a>網頁</h3><h4 id="Flutter-時間軸事件在-Chrome-DevTools-上"><a href="#Flutter-時間軸事件在-Chrome-DevTools-上" class="headerlink" title="Flutter 時間軸事件在 Chrome DevTools 上"></a>Flutter 時間軸事件在 Chrome DevTools 上</h4><p>Flutter 時間軸事件現在已在 Chrome DevTools 的效能面板中公開。（<a href="https://github.com/flutter/flutter/issues/130132">＃130132</a>）</p>
<p>要了解更多資訊，請查看 <a href="https://docs.flutter.dev/perf/web-performance">為 Web 應用程式除錯效能</a>。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*UDd-ZshZBEIfb4OA" />
</figure>

<h3 id="Android-1"><a href="#Android-1" class="headerlink" title="Android"></a>Android</h3><h4 id="滑鼠滾輪支援"><a href="#滑鼠滾輪支援" class="headerlink" title="滑鼠滾輪支援"></a>滑鼠滾輪支援</h4><p>在優化 <a href="https://medium.com/flutter/developing-flutter-apps-for-large-screens-53b7b0e17f10">滿足 Android 的大螢幕指南</a> 時，我們發現了一個問題，即滑鼠滾輪在平板電腦或摺疊手機上無法正常工作。使用滑鼠滾輪時，螢幕需要移動很長一段距離才能做出響應，這是一個 <a href="https://github.com/flutter/flutter/issues/82973">眾所周知的問題</a>。</p>
<p>在此版本中，使用滑鼠在 Flutter 視圖上捲軸的速度與 Android 設備上的捲軸速度相符。（<a href="https://github.com/flutter/engine/pull/44724">44724</a>）</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/0*wlSYQiElLRGgOTmO" />
<figcaption>Before</figcaption>
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/0*KZki5KYsfeMi01Lw" />
<figcaption>After</figcaption>
</figure>

<h4 id="預測式返回導航"><a href="#預測式返回導航" class="headerlink" title="預測式返回導航"></a>預測式返回導航</h4><p>Android 14 版本包含預測式返回手勢功能，允許您在設備上使用返回手勢「偷看」當前螢幕後面的主螢幕。此更新將預測式返回手勢帶到了 Flutter！查看 <a href="https://docs.flutter.dev/release/breaking-changes/android-predictive-back#migration-guide">遷移指南</a>。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/530/0*KdmeVMUgmKWzw0-P" />
</figure>

<h3 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h3><h4 id="應用程式擴展項"><a href="#應用程式擴展項" class="headerlink" title="應用程式擴展項"></a>應用程式擴展項</h4><p>Flutter 現在可以被用來針對一些 <a href="https://developer.apple.com/app-extensions/">iOS 應用程式擴展項</a>。這意味著您可以使用 Flutter Widget 繪製某些類型的 iOS 應用程式擴展項的 UI。這不適用於所有類型的應用程式擴展項，因為 API 可能存在限制（例如，主螢幕 Widget）或記憶體限制。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/368/0*OxjjAlCbFFXWrrR9" />
</figure>

<p>了解更多資訊，並查看如何在 docs.flutter.dev 上針對 <a href="https://docs.flutter.dev/platform-integration/ios/app-extensions">添加 iOS 應用程式擴展項</a> 的共享擴展項。</p>
<h3 id="套件生態系統"><a href="#套件生態系統" class="headerlink" title="套件生態系統"></a>套件生態系統</h3><h4 id="新的-Flutter-優選套件"><a href="#新的-Flutter-優選套件" class="headerlink" title="新的 Flutter 優選套件"></a>新的 Flutter 優選套件</h4><p>我們重新啟動了 <a href="https://docs.flutter.dev/packages-and-plugins/favorites">Flutter 優選套件</a> 程式！在此週期中，Flutter 生態系統委員會將 <a href="https://pub.dev/packages/flame">flame</a>、<a href="https://pub.dev/packages/flutter_animate">flutter_animate</a>、<a href="https://pub.dev/packages/flutter_rust_bridge">flutter_rust_bridge</a>、<a href="https://pub.dev/packages/riverpod">riverpod</a>、<a href="https://pub.dev/packages/video_player">video_player</a>、<a href="https://pub.dev/packages/macos_ui">macos_ui</a> 和 <a href="https://pub.dev/packages/fpdart">fpdart</a> 套件指定為新的 Flutter 優選套件。恭喜大家！</p>
<p>請期待未來出現新的 Flutter 優選套件。若要提名一個套件或 Plugin 作為潛在的未來 Flutter 優選套件，或將任何其他問題提請委員會注意，請向委員會發送電子郵件至 <a href="mailto:flutter-committee@googlegroups.com">flutter-committee@googlegroups.com</a>。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/150/0*RAkkLR53oDQekLmN" />
</figure>

<h4 id="第一次套件生態系統虛擬峰會"><a href="#第一次套件生態系統虛擬峰會" class="headerlink" title="第一次套件生態系統虛擬峰會"></a>第一次套件生態系統虛擬峰會</h4><p>在 8 月，我們為套件生態系統舉辦了首次虛擬峰會，有 50 多位非 Google 和 Google 貢獻者參加了 <a href="https://pub.dev/">pub.dev</a>。目標是讓貢獻者在非正式的討論中匯聚在一起，以規劃、教育、學習和在社群中分享。在活動後的調查中，對活動的滿意度為 100%。我們計劃在未來與社群合作，為套件生態系統舉辦類似的活動（面對面和虛擬）。在即將發布的套件生態系統更新部落格文章中了解更多資訊。</p>
<h4 id="基於雲端的-Google-Maps-樣式"><a href="#基於雲端的-Google-Maps-樣式" class="headerlink" title="基於雲端的 Google Maps 樣式"></a>基於雲端的 Google Maps 樣式</h4><p>Google Maps Platform 提供了從 Google Cloud Console 的地圖樣式頁面自訂地圖樣式的能力。這樣一來，您就可以建立自訂體驗，而無需每次變更樣式時都更新應用程式程式碼。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*b3vDhobD-p7YRw6O" />
</figure>

<p>若要在 Flutter 中使用此功能，您只需使用在主控台中設置的地圖 ID 引用您的地圖即可：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GoogleMap(</span><br><span class="line">        onMapCreated: _onMapCreated,</span><br><span class="line">        initialCameraPosition: const CameraPosition(</span><br><span class="line">          target: _kMapCenter,</span><br><span class="line">          zoom: 7.0,</span><br><span class="line">        ),</span><br><span class="line">        key: _key,</span><br><span class="line">        cloudMapId: _mapId</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="Camera-X-改進"><a href="#Camera-X-改進" class="headerlink" title="Camera X 改進"></a>Camera X 改進</h4><p>在 3.10 穩定版本中，我們為 Flutter 相機 Plugin 添加了對 Camera X 的初步支援。<a href="https://developer.android.com/training/camerax">Camera X</a> 是一個 Jetpack 函式庫，可以簡化在您的 Android 應用程式中添加豐富的相機功能。</p>
<p>在此版本中，我們已添加了任何使用相機的應用程式所需的大多數功能。Camera X 解決了 Plugin 的 Camera 2 實作中存在的大多數問題。</p>
<p>我們鼓勵您使用 Camera X Plugin。要選擇加入，請將以下行添加到您的 <code>pubspec.yaml</code> 檔案中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Dependencies:</span><br><span class="line"> camera: ^0.10.4 # 或嘗試最新的 camera 版本</span><br><span class="line"> camera_android_camerax: ^0.5.0</span><br></pre></td></tr></table></figure>

<p>我們期待您的回饋，因為我們計劃在未來的版本中將 Camera X 設為預設實作。</p>
<h4 id="macOS-影片播放器"><a href="#macOS-影片播放器" class="headerlink" title="macOS 影片播放器"></a>macOS 影片播放器</h4><p>我們已為 <a href="https://pub.dev/packages/video_player">影片播放器 Plugin</a> 添加了 macOS 支援，允許開發人員在 Widget 表面上播放影片。</p>
<p>若要了解更多資訊，請查看 <a href="http://pub.dev/">pub.dev</a> 上的 <a href="https://pub.dev/packages/video_player">影片播放器 Plugin</a>。</p>
<h3 id="DevTools"><a href="#DevTools" class="headerlink" title="DevTools"></a>DevTools</h3><h4 id="DevTools-擴展"><a href="#DevTools-擴展" class="headerlink" title="DevTools 擴展"></a>DevTools 擴展</h4><p>新的 <a href="https://pub.dev/packages/devtools_extensions">DevTools 擴展框架</a> 可實現：</p>
<ul>
<li>套件作者可以為其套件構建自訂工具，這些工具直接在 DevTools 中顯示。</li>
<li>套件作者可以撰寫功能強大的工具，這些工具可以利用 DevTools 中現有的框架和工具。</li>
<li>使用 DevTools 除錯應用程式的 Dart 和 Flutter 開發人員可以存取特定於其用例的工具（由應用程式的相依性以及哪些相依性提供 DevTools 擴展項決定）。</li>
</ul>
<p>感謝 <a href="https://pub.dev/packages/provider">Provider</a>、<a href="https://pub.dev/packages/drift">Drift</a> 和 <a href="https://pub.dev/packages/patrol">Patrol</a> 的套件作者，這個生態系統已經在建立中，您現在可以使用這些套件的 DevTools 擴展項！</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*gprea_z4l0Y_mizE" />
<figcaption>Provider</figcaption>
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*uGcjhY3w8eKoKwLH" />
<figcaption>Patrol</figcaption>
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*PlGmgXXrK7LBpiPR" />
<figcaption>Drift</figcaption>
</figure>

<p>若要深入了解 DevTools 擴展項，請查看 <a href="https://medium.com/@kenzieschmoll">Kenzie Davisson</a> 撰寫的 <a href="https://medium.com/flutter/dart-flutter-devtools-extensions-c8bc1aaf8e5f">Dart 和 Flutter DevTools 擴展項發布公告</a>。</p>
<h4 id="DevTools-更新"><a href="#DevTools-更新" class="headerlink" title="DevTools 更新"></a>DevTools 更新</h4><p>此版本中 DevTools 的一些亮點包括：</p>
<ul>
<li>添加了對 DevTools 擴展項的支援</li>
<li>添加了新的「Home」螢幕，其中顯示已連接應用程式的摘要。</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/935/0*1nmVYze1uMCxvzoI" />
</figure>

<p>其他改進包括：</p>
<ul>
<li>整體效能</li>
<li>熱重啟穩健性</li>
<li>文字選取和複製行為</li>
<li>網路分析工具回應檢視器修飾</li>
</ul>
<p>要了解更多資訊，請查看 DevTools 的發行備註 <a href="https://docs.flutter.dev/tools/devtools/release-notes/release-notes-2.26.1">2.26.1</a>、<a href="https://docs.flutter.dev/tools/devtools/release-notes/release-notes-2.27.0">2.27.0</a> 和 <a href="https://docs.flutter.dev/tools/devtools/release-notes/release-notes-2.28.1">2.28.1</a>。</p>
<h4 id="VS-Code-UI-可發現性"><a href="#VS-Code-UI-可發現性" class="headerlink" title="VS Code UI 可發現性"></a>VS Code UI 可發現性</h4><p>感謝 Flutter 社群成員 <a href="https://github.com/DanTup">DanTup</a> 的出色工作，Flutter VS Code 擴展項現在擁有一個 Flutter 側邊欄，讓您可以輕鬆存取：</p>
<ul>
<li>打開 Flutter DevTools 螢幕</li>
<li>查看活動的除錯工作階段</li>
<li>查看可用設備</li>
<li>建立新的專案</li>
<li>熱重載和重新啟動</li>
<li>執行 Flutter Doctor -v</li>
<li>等等</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*FXlCMB0adYkH2y4u" />
</figure>

<h3 id="棄用和重大變更"><a href="#棄用和重大變更" class="headerlink" title="棄用和重大變更"></a>棄用和重大變更</h3><h4 id="棄用和重大變更-1"><a href="#棄用和重大變更-1" class="headerlink" title="棄用和重大變更"></a>棄用和重大變更</h4><p>此版本中的重大變更包括在 v3.13 版本發布後過期的已棄用 API。若要查看所有受影響的 API，以及其他背景資訊和遷移指南，請查看 <a href="https://docs.flutter.dev/release/breaking-changes/3-13-deprecations">此版本的棄用指南</a>。其中許多受 <a href="https://docs.flutter.dev/development/tools/flutter-fix">Flutter fix</a> 支援，包括 IDE 中的快速修復。可以使用 <code>dart fix</code> 命令評估和應用批量修復。</p>
<p>與往常一樣，非常感謝社群為 <a href="https://github.com/flutter/tests/blob/master/README.md">貢獻測試</a> - 這些測試幫助我們識別出這些重大變更。若要進一步了解，請查看 <a href="https://github.com/flutter/flutter/wiki/Tree-hygiene#handling-breaking-changes">Flutter 的重大變更政策</a>。</p>
<p>在我們的下一個版本中，我們將計劃擴展棄用政策，以涵蓋 <code>flutter_driver</code> 套件，以及已經支援的套件 <code>flutter</code> 和 <code>flutter_test</code>。</p>
<h3 id="結語"><a href="#結語" class="headerlink" title="結語"></a>結語</h3><p>我們在本文開頭就提到了貢獻者的數量，這是故意的。沒有你們所有人的努力 - 我們非凡的社群 - Flutter 就不會成為今天如此令人愉悅和高效的工具包。謝謝大家。</p>
<p>若要查看此版本中包含的所有 PR 的完整列表，請查看 <a href="https://docs.flutter.dev/release/release-notes">發行備註和變更日誌</a>。</p>
<p>Flutter 3.16 今天已在 stable channel 上提供，其中包含 <a href="https://medium.com/dartlang/dart-3-2-c8de8fe1b91f">Dart 3.2</a>。若要開始使用這些最新更新，您只需執行 <a href="https://docs.flutter.dev/release/upgrade">flutter upgrade</a> 即可。</p>
<p>很快再見！</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=dba6cb1015d1" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/whats-new-in-flutter-3-16-dba6cb1015d1">Flutter 3.16 的新功能</a> 最初發佈在 <a href="https://medium.com/flutter">Flutter</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p> </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/8339b987.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/8339b987.html" class="post-title-link" itemprop="url">【文章翻譯】Major steps this year on the journey to multiplatform development</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-11-15 21:29:36" itemprop="dateCreated datePublished" datetime="2023-11-15T21:29:36+08:00">2023-11-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 16:55:14" itemprop="dateModified" datetime="2024-09-30T16:55:14+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="今年邁向跨平台開發的重要里程碑"><a href="#今年邁向跨平台開發的重要里程碑" class="headerlink" title="今年邁向跨平台開發的重要里程碑"></a>今年邁向跨平台開發的重要里程碑</h2><p>今天，我們很高興宣布兩個新的 SDK 版本——Dart 3.2 和 Flutter 3.16——以及 Flutter 休閒遊戲工具包的重大更新。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*r2pc1eaUCaAe21EK-OlGpg.png" />
<figcaption>Flutter 3.16</figcaption>
</figure>

<h3 id="Flutter-和-Dart-的價值主張"><a href="#Flutter-和-Dart-的價值主張" class="headerlink" title="Flutter 和 Dart 的價值主張"></a>Flutter 和 Dart 的價值主張</h3><p>在今年年初肯亞內羅畢舉行的 Flutter Forward 上，我們介紹了 Flutter 和 Dart 的新路線圖。兩份路線圖都側重於四個高級主題：突破性圖形體驗、與 Web 和行動平台的無縫整合、早期採用新興架構，以及持續關注開發者體驗。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*iomk4DoJwIXI44jX" />
<figcaption>Flutter Forward 的四個高級主題</figcaption>
</figure>

<p>在 5 月份的 Google I&#x2F;O 上，我們 <a href="https://www.youtube.com/watch?v=yRlwOdCK7Ho&amp;t=11s">宣布</a> 我們在實現這一願景方面取得了重大進展，包括（但不限於）改進 iOS 上的渲染效能（使用 Impeller），支援 Web 上的元素嵌入，以及完成 Dart 3 中 100% 空安全之旅。</p>
<p>隨著我們接近年終，以下是自那以來的進展更新。</p>
<h3 id="使用-Flutter-和-Dart-提供使用者價值"><a href="#使用-Flutter-和-Dart-提供使用者價值" class="headerlink" title="使用 Flutter 和 Dart 提供使用者價值"></a>使用 Flutter 和 Dart 提供使用者價值</h3><p>隨著每個新功能、改進或錯誤修復，整體目標保持不變：提供強大的語言和框架配對，讓您能夠建立美麗、豐富且快速的應用程式。您可以從單一的共享程式碼庫進行開發，為行動、Web 和桌面上面的應用程式使用者提供服務，而無需碎片化您的產品路線圖。我們也致力於開源，沒有授權成本，並致力於開發由開放性和協作驅動的豐富生態系統。</p>
<p>這個目標繼續引起 Google 內部和全球 Flutter 廣泛生態系統中開發者的共鳴。今年發佈了許多使用 Flutter 建立的 Google 應用程式：</p>
<ul>
<li>正如我們在 Flutter Forward 上宣布的那樣，<strong>Google Classroom</strong> 團隊在其行動應用程式中使用 Flutter，這些應用程式現在已在 iOS 上推出，並且在 Android 上處於 Beta 測試階段。他們正在看到由新的 <a href="https://docs.flutter.dev/perf/impeller">Impeller</a> 渲染引擎驅動的 <a href="https://www.youtube.com/watch?v=_5CIATSDSPI&amp;t=5s">顯著效能提升</a>。</li>
<li><strong>YouTube Create</strong> 是一款由 Google 發佈的全新 Flutter 應用程式，它在 8 個國家&#x2F;地區中提供 <a href="https://t.co/rn0yN2Sk9X">Beta 測試</a>。此應用程式利用 Flutter Widget 函式庫的靈活性，提供完整的影片編輯體驗，包括濾鏡、效果以及音樂和配音編輯。</li>
<li>使用Flutter驅動的 <strong>Google Earth</strong> 10 版本，使用者可以輕鬆地建立、協作和組織地圖和地理空間資料，不僅可以在 Web 上使用，還可以在 Android 和 iOS 行動裝置和平板電腦上使用！查看 <a href="https://medium.com/google-earth/a-fresh-look-for-google-earth-507d218b42d3">Google Earth 發文</a> 以獲取有關新設計的更多詳細資訊，並繼續關注我們將在未來的部落格文章中詳細介紹 Earth 團隊如何使用 Flutter 構建他們的應用程式。</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*Vd72-ykzg8BadAGp" />
<figcaption><em>Classroom（左）、YouTube Create（中）和 Google Earth（右）的螢幕截圖</em></figcaption>
</figure>

<p>Flutter 的採用也持續在 Google 之外、全球範圍內增長：</p>
<ul>
<li>今年發佈的應用程式包括瑞典的 <a href="https://flutter.dev/showcase/skandia">Skandia</a> 和波蘭的 <a href="https://flutter.dev/showcase/credit-agricole">Credit Agricole</a> 等銀行應用程式，美國的 <a href="https://flutter.dev/showcase/dow-jones">MarketWatch</a> 虛擬股票交易所投資教育應用程式，荷蘭的 <a href="https://www.youtube.com/watch?v=OTn8Ngp2X8Q">CZ</a> 健康保險應用程式，以及加拿大的 <a href="https://flutter.dev/showcase/kijiji1">Kijiji</a> 分類廣告市場應用程式。一個共同的主題是，這些團隊選擇 Flutter 來實現 Android 和 iOS 之間一致的功能集，同時仍然提供豐富且引人入勝的 UI 體驗。</li>
<li>繼續朝東前進，騰訊發佈了 <a href="https://flutter.dev/showcase/tencent-cloud-chat">Cloud Chat</a>，這是一款豐富的全新聊天 SDK 和 UI 函式庫，目前在中國的聊天服務市場排名第一，並且正在擴展到國際市場。</li>
<li>在巴西，SOMA 時尚集團啟動了其 Farm 品牌的重大數位更新，並在此過程中意識到 Flutter 的靈活性讓他們能夠將其擴展到該集團的其他品牌。在美國，Caribou Coffee 將 Flutter 與 Firebase 結合，以加速其生產力，而 Lucid Motors 報告稱，Flutter 不僅讓他們可以使用一個小型團隊交付兩個行動應用程式，而且 Flutter 的 Web 支援還讓他們能夠在內部分享原型。</li>
</ul>
<p>我們很高興見證這些應用程式的演變。繼續閱讀，了解我們在核心框架中取得的持續進展。</p>
<h3 id="突破性圖形效能"><a href="#突破性圖形效能" class="headerlink" title="突破性圖形效能"></a>突破性圖形效能</h3><p>我們堅信，多平台開發不應意味著開發者或終端使用者體驗的下降。因此，我們竭盡全力實現這一願景。在 Flutter Forward 上，我們推出了 Impeller 引擎，這是對圖形渲染架構的全面重新設計和重新實作，旨在提高速度和效能。在 Flutter 3.10 中，我們宣布 Impeller 在 iOS 上預設啟用。今天，在 Flutter 3.16 中，我們很高興地分享，Impeller 在 Android 上已準備好在 stable channel 上接受預覽回饋。效能在一整年都得到了顯著提升；與一年前相比，在 Flutter Gallery 基準測試中測量的光柵化效能大約是使用 Impeller 在 Vulkan 上的效能的兩倍。有關如何啟用 Impeller 的詳細信息，請參閱 <a href="https://medium.com/flutter/whats-new-in-flutter-3-16-dba6cb1015d1">Flutter 3.16 發文</a>。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*vtUIXYkW6Bt9fvaI" />
<figcaption>Flutter Gallery 基準測試顯示，過去一年中使用 Impeller 在 Vulkan 上的效能提高了 2 倍以上</figcaption>
</figure>

<h4 id="休閒遊戲工具包"><a href="#休閒遊戲工具包" class="headerlink" title="休閒遊戲工具包"></a>休閒遊戲工具包</h4><p>特別受益於快速且強大的圖形渲染的應用程式類別是遊戲。在 2022 年，我們發佈了最初的 Flutter <a href="https://docs.flutter.dev/resources/games-toolkit">休閒遊戲工具包</a>。今天，我們宣布重大更新，其中包括從紙牌遊戲到跑酷遊戲的全新模板選項，以及針對排行榜、變現和遙測等主題的一組遊戲服務開發者資源。有關更多詳細信息，請查看 <a href="https://medium.com/flutter/building-your-next-casual-game-with-flutter-716ef457e440">休閒遊戲工具包部落格發文</a>。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/942/0*3DmGJe1yD4eKdnfs.gif" />
<figcaption>一個動畫 GIF，顯示了在行動裝置、Web 和桌面設備上運行的多款基於 Flutter 的遊戲，例如 Trivia Crack、Debertz 和 Landover。</figcaption>
</figure>

<h3 id="無縫整合"><a href="#無縫整合" class="headerlink" title="無縫整合"></a>無縫整合</h3><p>雖然 Flutter 應用程式通常在不同平台間具有非常高的共享程式碼比例（許多開發者報告共享比例為 95-99%），但我們仍然認為支援平台特定功能非常重要。在 iOS 上，<a href="https://developer.apple.com/app-extensions/">應用程式擴展</a> 提供了一種方式，讓使用者可以從手機上的其他應用程式中與應用程式的縮小版本進行互動。在我們上一個穩定版本中，我們發佈了 <a href="https://codelabs.developers.google.com/flutter-home-screen-widgets#0">新資源</a> 來幫助您為 Flutter 應用程式構建主畫面和鎖定螢幕 Widget。在 Flutter 3.16 中，我們加入了對使用 Flutter 渲染 <a href="https://docs.flutter.dev/platform-integration/ios/app-extensions">某些 iOS 應用程式擴展的 UI</a> 的支援，例如 <a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/Share.html">共享擴展</a>。Android 14 推出了新的 <a href="https://developer.android.com/guide/navigation/custom-back/predictive-back-gesture">預測式返回手勢</a>，它讓使用者可以在使用返回手勢（向左滑動）時瞥見應用程式背後的系統 UI。Flutter 3.16 支援此手勢。</p>
<h3 id="持續關注開發者體驗"><a href="#持續關注開發者體驗" class="headerlink" title="持續關注開發者體驗"></a>持續關注開發者體驗</h3><p>現代裝置具有各種外形尺寸（例如手機、摺疊式手機和平板電腦），這些裝置具有各種螢幕尺寸，並支援外部輸入裝置，例如鍵盤和滑鼠。為了確保您的使用者擁有良好的使用者體驗，考慮這些因素非常重要。我們最近與 Android 團隊合作，加入了對其 <a href="https://developer.android.com/docs/quality-guidelines/large-screen-app-quality">大型螢幕指南</a> 的支援。我們已經發佈了 <a href="https://medium.com/flutter/developing-flutter-apps-for-large-screens-53b7b0e17f10">在加入大型螢幕支援方面的經驗</a>，更新了我們的參考應用程式 <a href="https://wonderous.app/">Wonderous</a> 以支援多種螢幕尺寸，並在 Flutter 框架中進行了一些修復，以更好地支援鍵盤、滑鼠和觸控板輸入。新的 API 讓您可以確定顯示器的尺寸和像素比率，並支援多視窗渲染。</p>
<p>在一年中，我們一直致力於完成對 <a href="https://m3.material.io/get-started">Material 3</a> 的支援，這是 Material Design 設計系統的最新版本。Flutter 的 Material Widget 現在完全支援 Material 3，並且在 Flutter 3.16 中，Material 3 現在是預設樣式。我們發現 Material 為應用程式增添了煥然一新的外觀；新的配色方案既美觀又符合無障礙的對比度要求。若要獲得實際體驗，請查看 <a href="https://flutter.github.io/samples/material_3.html">Material 3 圖庫</a>。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*ZACl0_Sm8xPguexZrc4vKA.png" />
<figcaption>Material 3 演示的螢幕截圖</figcaption>
</figure>

<p>開發者工具的兩個重大改進包括 VS Code 的新側邊欄和對 DevTools 中添加擴展的支援。側邊欄可以輕鬆發現核心 Flutter 工具操作，例如建立新專案、調用熱重裝、打開 DevTools 或選擇目標設備。DevTools 擴展提供了一個框架，<a href="https://medium.com/p/c8bc1aaf8e5f/edit">讓您可以建立</a>新的自定義工具，這些工具可以插入 DevTools，並提供額外的框架特定功能。<a href="https://pub.dev/packages/provider">Provider</a>，<a href="https://pub.dev/packages/patrol">Patrol</a> 和 <a href="https://pub.dev/packages/serverpod">ServerPod</a> 是開發 DevTools 擴展的幾個框架範例。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*IWHCMv72Wj3NVy4f" />
<figcaption><em>Serverpod 框架的 DevTools 擴展的螢幕截圖</em></figcaption>
</figure>

<p>我們重新啟動了 <a href="https://docs.flutter.dev/packages-and-plugins/favorites">Flutter Favorite</a> 程式，並將 <a href="https://pub.dev/packages/flame">flame</a>，<a href="https://pub.dev/packages/flutter_animate">flutter_animate</a>，<a href="https://pub.dev/packages/flutter_rust_bridge">flutter_rust_bridge</a>，<a href="https://pub.dev/packages/riverpod">riverpod</a>，<a href="https://pub.dev/packages/video_player">video_player</a>，<a href="https://pub.dev/packages/macos_ui">macos_ui</a> 和 <a href="https://pub.dev/packages/fpdart">fpdart</a> 指定為新的 Flutter Favorite。在 8 月份，我們為套件生態系統舉辦了首次虛擬峰會，超過 50 位非 Google 員工和 Google 員工貢獻者參加了 <a href="https://pub.dev/">pub.dev</a> 的峰會。</p>
<p>我們還見證了幾個強大的新套件和 Plugin 的到來。我最喜歡的幾個是 <a href="https://github.com/flutter/packages/tree/main/packages/camera/camera_android_camerax#usage">camera Plugin 中的 CameraX 支援</a>，高效能的 <a href="https://pub.dev/packages/two_dimensional_scrollables">2D 可捲軸 TableView</a> 以及 <a href="https://pub.dev/packages/flutterflow_ui">flutterflow_ui</a> 套件，它允許設計師和開發者使用拖放功能建立 UI 組件，然後將它們導出到 Flutter Widget 程式碼（<a href="https://www.youtube.com/watch?v=yopCfhepAsM">演示影片</a>）。此外，google_maps 套件現在支援 <a href="https://developers.google.com/maps/documentation/cloud-customization/overview">雲地圖樣式</a>，因此開發者可以從 Google Cloud Console 中更新他們的樣式，而 <a href="https://pub.dev/packages/home_widget">home_widget</a> 套件現在支援建立 <a href="https://medium.com/@ABausG/interactive-homescreen-widgets-with-flutter-using-home-widget-83cb0706a417">互動式 iOS 主畫面 Widget</a>。</p>
<h3 id="新興架構"><a href="#新興架構" class="headerlink" title="新興架構"></a>新興架構</h3><h4 id="Dart-互操作性"><a href="#Dart-互操作性" class="headerlink" title="Dart 互操作性"></a>Dart 互操作性</h4><p>Dart 基於核心承諾，讓跨平台 Dart 程式碼可以在 <a href="https://dart.dev/overview#platform">廣泛的平台</a> 上運行。但是，這通常需要補充以與現有程式碼進行互操作的能力，無論這些程式碼來自舊的專案還是其他函式庫或系統 API 中提供的 API。為了實現這一點，Dart 提供了 <a href="https://dart.dev/guides/libraries/c-interop">與原生 C API 的互操作性</a>，並且正在努力擴展它以支援與 <a href="https://dart.dev/guides/libraries/java-interop">Java + Kotlin</a> 和 <a href="https://dart.dev/guides/libraries/objective-c-interop">Objective C + Swift</a> 的互操作性。有關更多詳細信息，請查看今天的 <a href="https://medium.com/dartlang/dart-3-2-c8de8fe1b91f">Dart 3.2 部落格發文</a>。</p>
<h4 id="WebAssembly-之路"><a href="#WebAssembly-之路" class="headerlink" title="WebAssembly 之路"></a>WebAssembly 之路</h4><p>Wasm（也稱為 <a href="https://webassembly.org/">WebAssembly</a>）是一種 Web 瀏覽器的令人興奮的新指令格式，它提供了一種可移植的、平台中立的、二進位程式碼格式，可以在現代瀏覽器中執行。像 Dart 這樣的高級受控語言使用垃圾收集，而垃圾收集正在被加入到 WebAssembly 標準中。截至 Chrome 119，<a href="https://developer.chrome.com/blog/wasmgc/">WebAssembly 的垃圾收集支援</a>（Wasm-GC）預設啟用。Wasm-GC 支援也將在 Firefox 120（他們的下一個穩定版本）中推出。</p>
<p>Dart 編譯器對 Wasm 的支援幾乎已完成，而 Flutter Web 現在使用了一個新的渲染引擎，它可以讓所有渲染都在 WebAssembly 程式碼中進行。雖然還有更多工作要做，支援仍然被認為是實驗性的，但我們已經能夠運行一些應用程式，例如 <a href="https://flutterweb-wasm.web.app/">Material 3 演示</a>。<a href="https://medium.com/dartlang/dart-3-2-c8de8fe1b91f">Dart 3.2 部落格發文</a> 中有更多詳細信息。</p>
<h3 id="生動社群的力量"><a href="#生動社群的力量" class="headerlink" title="生動社群的力量"></a>生動社群的力量</h3><p>今天的部落格發文僅僅是過去幾個季度中數千個改進的示例。更重要的是，越來越多的改進來自Google以外的開發者貢獻——最近發佈的 <a href="https://github.blog/2023-11-08-the-state-of-open-source-and-ai/">2023 年 GitHub Octoverse 報告</a> 關於開源活動，將 Flutter 專案列為所有 GitHub 開源專案中的前 3 名。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*PY9bV7cnRCdxV2jU" />
</figure>

<p>感謝您的非凡支援，我們度過了美好的一年。對於 Dart 和 Flutter 社群的多樣性、熱情和友善精神，我們表示感謝，他們在產品成功中發揮了至關重要的作用。我們迫不及待地想看看您接下來會建立什麼。在下次更新之前，感謝您的支援 🙏，並祝您編碼愉快！</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=b9218b17f0f7" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/major-steps-this-year-on-the-journey-to-multiplatform-development-b9218b17f0f7">今年邁向跨平台開發的重要里程碑</a> 最初發佈在 <a href="https://medium.com/flutter">Flutter</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p> </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/43e7a3d0.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/43e7a3d0.html" class="post-title-link" itemprop="url">【文章翻譯】Building your next casual game with Flutter</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-11-15 20:35:49" itemprop="dateCreated datePublished" datetime="2023-11-15T20:35:49+08:00">2023-11-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 16:55:14" itemprop="dateModified" datetime="2024-09-30T16:55:14+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="在-Flutter-中進行免費且開源的跨平台-2D-遊戲開發"><a href="#在-Flutter-中進行免費且開源的跨平台-2D-遊戲開發" class="headerlink" title="在 Flutter 中進行免費且開源的跨平台 2D 遊戲開發"></a>在 Flutter 中進行免費且開源的跨平台 2D 遊戲開發</h2><p>今天，我很興奮地向您介紹 <a href="http://flutter.dev/games">Flutter 休閒遊戲工具包</a> 的重大更新，它是一組新的範本和新的開發者資源，旨在讓遊戲開發者在 Flutter 上提高生產力。</p>
<p>Flutter 是 Google 的開源 UI 架構，用於建立美觀的跨平台應用程式。如今，從早期階段的創業公司到 ByteDance、騰訊、BMW 和 Google 等大型公司，Flutter 被用於超過一百萬個應用程式，從單一程式碼庫提供美觀、高效能且可移植的跨平台體驗。</p>
<p>在過去的幾年中，我們目睹了圍繞休閒遊戲開發的社群不斷增長。使用 Flutter 發佈了數以萬計的遊戲，從簡單卻有趣的益智遊戲到更複雜的街機遊戲。我們最喜歡的遊戲包括 Etermax 的 <a href="https://triviacrack.com/">Trivia Crack</a>、Lotum 的 <a href="https://flutter.dev/showcase/lotum">4 Pics 1 Word</a>（猜詞遊戲）、Dong Digital 的 <a href="https://play.google.com/store/apps/details?id=net.countrymania.brick&amp;hl=en">Brick Mania</a>（街機遊戲）、Onrizon 的 <a href="https://play.google.com/store/apps/details?id=com.gartic.StopotS&amp;hl=en">StopotS</a>（分類遊戲）、我們在 I&#x2F;O 為 Flutter 建立的 <a href="https://pinball.flutter.dev/">復古彈珠台遊戲</a>，以及在社交和選單螢幕中使用 Flutter 的 <a href="https://flutter.dev/showcase/pubg-mobile">PUBG</a> 行動版。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/942/0*3DmGJe1yD4eKdnfs.gif" />
<figcaption>一個動畫的 GIF，展示了多款基於 Flutter 的遊戲，例如 Trivia Crack、Debertz 和 Landover 在行動裝置、網頁和桌面設備上運行。</figcaption>
</figure>

<h3 id="為什麼選擇-Flutter-來開發休閒遊戲"><a href="#為什麼選擇-Flutter-來開發休閒遊戲" class="headerlink" title="為什麼選擇 Flutter 來開發休閒遊戲"></a>為什麼選擇 Flutter 來開發休閒遊戲</h3><p>Flutter 是遊戲開發者的絕佳選擇。首先，它是免費且開源的，讓您能夠對遊戲的渲染和輸入處理邏輯進行精細的控制。這讓您能夠在核心問題上進行除錯，並根據需要自訂引擎。Flutter 的開放性也體現在我們的生態系統中。所有 <a href="http://pub.dev/">Flutter Plugin 和套件</a> 也可供免費整合。</p>
<p>其次，在 Flutter 中進行開發效率很高。Flutter 引入了革命性的功能，稱為 <a href="https://docs.flutter.dev/tools/hot-reload#how-to-perform-a-hot-reload">熱重裝</a>，允許開發者在進行程式碼更改後立即看到 UI 更新，從而使開發過程更加反覆和高效。此外，Flutter 支援跨平台遊戲開發，因此您可以從單一共享程式碼庫為 <strong>iOS 和 Android、網頁以及桌面</strong> 建立遊戲。這可以節省您的時間和精力，並讓您的遊戲從第一天起就能接觸到更廣泛的受眾。</p>
<p>最後，Flutter 遊戲載入速度快，並且通常效能非常好，即使是在低端設備或瀏覽器中也是如此。捆綁包大小可以更小，因為 Flutter 引擎只會為您的遊戲增加幾兆位元組。</p>
<h3 id="更新後的-Flutter-休閒遊戲工具包"><a href="#更新後的-Flutter-休閒遊戲工具包" class="headerlink" title="更新後的 Flutter 休閒遊戲工具包"></a>更新後的 Flutter 休閒遊戲工具包</h3><p>自 2022 年發佈工具包的第一個版本以來，我們看到了 Flutter 社群的熱烈反響，但我們也收到了強烈的回饋，表明您需要更多開發成功遊戲的資源和指導。因此，我們正在使用新的遊戲範本和資源更新 Flutter 休閒遊戲工具包，以幫助您在 Flutter 中輕鬆建立休閒遊戲。僅僅列舉幾個更新：</p>
<h4 id="多種類型遊戲的範本"><a href="#多種類型遊戲的範本" class="headerlink" title="多種類型遊戲的範本"></a>多種類型遊戲的範本</h4><p>我們新增了三個新的遊戲範本，為建立休閒遊戲提供起點。首先，您會找到一個 <a href="https://github.com/flutter/games/tree/main/templates/basic">基本範本</a>，它具有用於主選單、設定螢幕、簡單關卡選擇和音訊整合的簡單 UI。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/0*_MYAbH0pmAhJ3D6B" />
<figcaption>一個展示基本範本的動畫 GIF</figcaption>
</figure>

<p>其次，您會找到一個 <a href="https://github.com/flutter/games/tree/main/templates/card">卡牌遊戲範本</a>，它建立在基本範本之上，並新增了基本的卡片拖放功能，並已準備好整合多人遊戲。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/0*0GvQrqyBDG2NVb42" />
<figcaption>一個展示卡牌範本的動畫 GIF</figcaption>
</figure>

<p>第三，我們與開源遊戲引擎 <a href="http://flame-engine.org/">Flame</a>（基於 Flutter 建造）合作，提供了一個 <a href="https://github.com/flutter/games/tree/main/templates/endless_runner">無限跑酷範本</a>。雖然您已經可以使用 <em>僅</em> Flutter 來建立許多回合制遊戲，例如卡牌遊戲、文字謎題和棋盤遊戲，這些遊戲對簡單的使用者輸入做出反應，但您可能也想要建立實時遊戲，例如無限跑酷、射擊遊戲和賽車遊戲，這些遊戲需要遊戲循環。在這些情況下，您可以使用 Flame 來實作遊戲方向、碰撞偵測、視差、生成和不同的視覺效果。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/0*SDayAkeAnC_NtiLU" />
<figcaption>一個展示無限跑酷範本的動畫 GIF</figcaption>
</figure>

<p>若要使用這些範本，請查看 <a href="https://github.com/flutter/games">儲存庫</a>，並使用最符合您需求的範本開始建立遊戲。</p>
<h4 id="遊戲服務整合的開發者資源"><a href="#遊戲服務整合的開發者資源" class="headerlink" title="遊戲服務整合的開發者資源"></a>遊戲服務整合的開發者資源</h4><p>工具包包含用於整合必需服務的開發者指南，以使您的遊戲更成功。例如，我們包含了幾個新的食譜和 codelab，以向您展示如何：</p>
<ul>
<li>使用 Cloud Firestore 建立 <a href="https://docs.flutter.dev/cookbook/games/firestore-multiplayer">多人遊戲</a>。</li>
<li>使用 <a href="https://docs.flutter.dev/cookbook/games/achievements-leaderboard">排行榜和成就</a> 使您的遊戲更具吸引力。</li>
<li>使用 <a href="https://docs.flutter.dev/cookbook/games/google-mobile-ads">遊戲內廣告</a> 和 <a href="https://codelabs.developers.google.com/codelabs/flutter-in-app-purchases#0">應用內購買</a> 為您的遊戲變現。</li>
<li>使用 <a href="https://firebase.google.com/codelabs/firebase-auth-in-flutter-apps#0">Firebase 驗證</a> 添加使用者驗證流程。</li>
<li>使用 <a href="https://firebase.flutter.dev/docs/crashlytics/overview/">Firebase Crashlytics</a> 收集有關崩潰和錯誤的分析。</li>
</ul>
<p>Flutter 休閒遊戲工具包，與 Flutter 一樣，是免費的（<a href="https://github.com/flutter/flutter/blob/master/LICENSE">BSD 3 授權</a>）且開源的。您可以在 flutter.dev&#x2F;games 上了解更多資訊並開始使用。我們希望透過更多類型專用的範本和開發者資源，為工具包發佈進一步的更新。請發送電子郵件至 <a href="mailto:flutter-games@google.com">flutter-games@google.com</a> 告知我們還有哪些可以讓您的遊戲開發體驗更輕鬆！</p>
<h3 id="在-Flutter-中開始建立您的遊戲"><a href="#在-Flutter-中開始建立您的遊戲" class="headerlink" title="在 Flutter 中開始建立您的遊戲"></a>在 Flutter 中開始建立您的遊戲</h3><p>我們很興奮地看到您使用 Flutter 休閒遊戲工具包建立的內容。無論您是經驗豐富的遊戲開發者還是剛剛起步，我們都擁有您創建出色的休閒遊戲所需的工具和資源。您還在等什麼？今天就開始建立吧！</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=716ef457e440" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/building-your-next-casual-game-with-flutter-716ef457e440">使用 Flutter 建立您的下一個休閒遊戲</a> 最初發佈在 <a href="https://medium.com/flutter">Flutter</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/4b2de658.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/4b2de658.html" class="post-title-link" itemprop="url">【文章翻譯】Developing Flutter apps for Large screens</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-09-26 05:18:09" itemprop="dateCreated datePublished" datetime="2023-09-26T05:18:09+08:00">2023-09-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 16:55:14" itemprop="dateModified" datetime="2024-09-30T16:55:14+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="開發大型螢幕的-Flutter-應用程式"><a href="#開發大型螢幕的-Flutter-應用程式" class="headerlink" title="開發大型螢幕的 Flutter 應用程式"></a>開發大型螢幕的 Flutter 應用程式</h2><p>去年，我們與 gSkinner 團隊合作開發了 <a href="https://wonderous.app/">Wonderous</a>，這是一個參考應用程式，用於展示 Flutter 可以實現的高品質體驗。</p>
<p><a href="https://medium.com/flutter/wonderous-explore-the-world-with-flutter-f43cce052e1">建立 Wonderous 的目標之一</a> 是提供一個開源的範例，展示最佳實務。本著同樣的精神，我們根據 <a href="https://developer.android.com/docs/quality-guidelines/large-screen-app-quality">Android 大型螢幕指南</a> 審查了 Wonderous。我們希望確保在所有 Android 設備上提供高品質的 Flutter 應用程式。Android 有三個層級來滿足其指南：</p>
<p><strong>第三層級</strong> - 大型螢幕就緒 - 應用程式在全螢幕（或多視窗模式下的全視窗）中運行，但應用程式佈局可能不理想。</p>
<p><strong>第二層級</strong> - 大型螢幕優化 - 應用程式佈局針對所有螢幕尺寸進行優化，並處理外部輸入設備。</p>
<p><strong>第一層級</strong> - 大型螢幕差異化 - 應用程式專為摺疊裝置而設計，確保佈局支援具有鉸鏈的桌面模式。</p>
<p>2023 年 1 月，我們更新了 <a href="https://medium.com/flutter/adapting-wonderous-to-larger-device-formats-ac51e1c00bc0">Wonderous 應用程式以適應不同的設備格式</a>。雖然這些更新使應用程式「大型螢幕就緒」，但應用程式尚未「大型螢幕優化」。</p>
<p>因此，我們再次與 gSkinner 合作，將 Wonderous 提升到第二層級（或更高）並針對 <a href="https://android-developers.googleblog.com/2023/06/the-new-pixel-fold-pixel-tablet-are-here-optimizing-for-large-screens.html">Android 的全新大型螢幕 Pixel 設備</a> 進行優化。</p>
<p>在本文中，我們將分享我們的學習心得，以及您在開發應用程式以滿足 Android 大型螢幕指南時應該考慮的因素。</p>
<h3 id="大型螢幕為何重要"><a href="#大型螢幕為何重要" class="headerlink" title="大型螢幕為何重要"></a>大型螢幕為何重要</h3><p>在深入探討我們如何優化 Wonderous 以滿足 Android 大型螢幕指南之前，讓我們先了解支援大型螢幕的好處。</p>
<p>當我們說 <a href="https://developer.android.com/guide/topics/large-screens/get-started-with-large-screens">大型螢幕</a> 時，我們指的是平板電腦、摺疊裝置和運行 Android 的 ChromeOS 設備。對大型螢幕的需求正在增加。如今，超過 <a href="https://developer.android.com/large-screens#:~:text=More%20than%20270%20million%20large%20screen%20Android%20devices">2.7 億台活躍大型螢幕</a> 和摺疊裝置在 Android 上運行。</p>
<p>這對開發人員很重要：</p>
<ul>
<li>提高業務指標，例如，對佈局優化為填滿全螢幕的應用程式來說，平板電腦上的使用者參與度提高。</li>
<li>提高 <a href="https://developer.android.com/quality/technical">技術品質</a>，以提高您的應用程式在 Play 商店中這些設備上的可見度。最近的 <a href="https://android-developers.googleblog.com/2022/03/helping-users-discover-quality-apps-on.html">Play 商店更新</a> 顯示了按設備類型劃分的評分，並且在應用程式缺乏大型螢幕支援時會通知使用者。</li>
</ul>
<h3 id="從優化-Wonderous-中的學習心得"><a href="#從優化-Wonderous-中的學習心得" class="headerlink" title="從優化 Wonderous 中的學習心得"></a>從優化 Wonderous 中的學習心得</h3><p>Wonderous 應用程式的另一個目標是作為建立學習材料和文件的來源。在本節中，我們將分享 Wonderous 未能滿足大型螢幕要求的地方。這些問題可能是 Flutter 開發人員遇到的常見問題，因此我們將分享我們的解決方法。</p>
<h3 id="應用程式延續性與設定變更"><a href="#應用程式延續性與設定變更" class="headerlink" title="應用程式延續性與設定變更"></a>應用程式延續性與設定變更</h3><p><strong>要求：</strong> 應用程式應隨著設備旋轉、變更視窗大小或摺疊和展開而變更方向，並保持或還原狀態。</p>
<h4 id="問題：摺疊-展開導致狀態丟失"><a href="#問題：摺疊-展開導致狀態丟失" class="headerlink" title="問題：摺疊&#x2F;展開導致狀態丟失"></a>問題：摺疊&#x2F;展開導致狀態丟失</h4><p>當 Wonderous 被摺疊和展開時，應用程式會遇到狀態丟失，並且始終會返回到初始螢幕。這個問題讓我們花費了很長時間才弄清楚。我們最初認為這是 Flutter 在摺疊&#x2F;展開設備時預設的行為，但無法使用 Flutter 計數器應用程式重現它。然後我們意識到可能是某個外掛導致狀態丟失，特別是 <a href="https://pub.dev/packages/flutter_inappwebview">flutter_inappwebview</a> 外掛。</p>
<p><strong>解決方法：</strong> 將 flutter_inappwebview 外掛替換為 <a href="https://pub.dev/packages/webview_flutter">webview_flutter</a>，這解決了在設備設定期間保持狀態的問題。</p>
<p><strong>學習心得：</strong> 您的應用程式在設備摺疊&#x2F;展開時不應丟失狀態，Flutter 預設應保持狀態。如果您的應用程式正在丟失狀態，請確認您使用的外掛支援大型螢幕設備。原生擴展可能會在設備位置變更時導致狀態丟失。</p>
<h4 id="問題：保持捲軸位置狀態"><a href="#問題：保持捲軸位置狀態" class="headerlink" title="問題：保持捲軸位置狀態"></a>問題：保持捲軸位置狀態</h4><p>我們認為我們可能需要很多重複的程式碼來確保清單在螢幕尺寸變更時保持其捲軸位置。我們首先使用了 <code>key:PageStorageKey</code> API，它修復了我們的大部分清單視圖。「學習心得」部分描述了您需要進一步操作的情況。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/0*4I4h-v1nPuUbxBt4" />
<figcaption>Wonderous 應用程式中的集合頁面未保持捲軸位置</figcaption>
</figure>

<p><strong>解決方法：</strong> 使用 <code>key: PageStorageKey</code> API 來保持清單的捲軸位置，這些清單在設備方向變更時保持相同的佈局。透過 <a href="https://github.com/gskinnerTeam/flutter-wonderous-app/blob/8a29d6709668980340b1b59c3d3588f123edd4d8/lib/ui/screens/wonder_events/widgets/_events_list.dart#L64">為集合頁面新增 PageStorageKey</a>，<code>SingleChildScrollView</code> Widget 的捲軸位置將會 <a href="https://api.flutter.dev/flutter/widgets/PageStorage-class.html">自動儲存</a>。</p>
<p><strong>學習心得：</strong> 雖然 <code>key: PageStorageKey</code> 提供了一種優雅的方式來使用清單保持捲軸位置，但如果您的清單在設備方向變更時從垂直變更為水平，它將不起作用。以前的 GIF 顯示了 Wonderous 的某些頁面發生了什麼。在這種情況下，您可能需要 <a href="https://github.com/gskinnerTeam/flutter-wonderous-app/blob/34e49a08084fbbe69ed67be948ab00ef23819313/lib/ui/screens/collection/widgets/_collection_list.dart#L39">進行一些數學運算並在螢幕旋轉時變更捲軸位置</a>。</p>
<h3 id="多視窗與分割畫面"><a href="#多視窗與分割畫面" class="headerlink" title="多視窗與分割畫面"></a>多視窗與分割畫面</h3><p><strong>要求：</strong> 應用程式在多視窗模式下具有完整的功能。例如，當應用程式沒有最高焦點時，應用程式會更新其 UI，繼續播放媒體。</p>
<h4 id="問題：由於分割畫面視圖導致-Letterboxing"><a href="#問題：由於分割畫面視圖導致-Letterboxing" class="headerlink" title="問題：由於分割畫面視圖導致 Letterboxing"></a>問題：由於分割畫面視圖導致 Letterboxing</h4><p>隨著 <a href="https://developer.android.com/guide/topics/large-screens/multi-window-support">「螢幕分割」</a> 的出現，使用者可以（在某些方向和縱橫比下）將應用程式置於不到兩英寸的垂直空間中。當螢幕被分割到顯示區域的 ⅓ 時，Wonderous 應用程式被 <a href="https://developer.android.com/guide/topics/large-screens/large-screen-compatibility-mode#letterboxing">Letterboxed</a> 或放置在顯示區域的中心，實心色背景填補了未使用的區域（如下所示）。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/0*CUG7wMHjzHSFKMpV" />
<figcaption>Wonderous 應用程式在 Pixel Fold 上的分割畫面模式下被 Letterboxed</figcaption>
</figure>

<p>這是因為我們選擇透過使用 MediaQuery 來確定設備的大小，在較小的螢幕上禁用橫向模式。不幸的是，MediaQuery 在您處於分割畫面模式時實際上無法提供螢幕尺寸，並且錯誤地將具有分割畫面的大型設備識別為小型設備。</p>
<p><strong>解決方法：</strong> 我們在 Flutter 中加入了一個新的 API，為 <a href="https://developer.android.com/guide/topics/large-screens/support-different-screen-sizes#window_size_classes">Android 的新視窗尺寸類別</a> 提供支援。透過切換到 Display API，我們能夠獲得全螢幕尺寸，並準確區分具有多個視窗的小型設備和大型設備。使用此 API，您可以擷取顯示器的各種屬性。新的 <a href="https://master-api.flutter.dev/flutter/dart-ui/FlutterView/display.html"><code>FlutterView.display</code></a> getter 會返回一個 <a href="https://master-api.flutter.dev/flutter/dart-ui/Display-class.html">Display</a> 物件。Display 物件會報告顯示器的實體尺寸、設備像素比和更新頻率。若要查看使用新 API 的範例，請訪問 <a href="https://master-api.flutter.dev/flutter/services/SystemChrome/setPreferredOrientations.html">setPreferredMethod API</a>。</p>
<p><strong>學習心得：</strong> 在禁用小型設備上的橫向模式時（使用 <code>SystemChrome.setPreferredOrientations()</code>），請使用 Display API 來確定設備尺寸，而不是 MediaQuery。</p>
<h3 id="鍵盤、滑鼠和觸控板輸入"><a href="#鍵盤、滑鼠和觸控板輸入" class="headerlink" title="鍵盤、滑鼠和觸控板輸入"></a>鍵盤、滑鼠和觸控板輸入</h3><p><strong>要求：</strong> 應用程式應支援基本的滑鼠或觸控板，以及鍵盤捷徑。主要的使用者流程應支援鍵盤導航，以確保無障礙。</p>
<h4 id="問題：焦點狀態"><a href="#問題：焦點狀態" class="headerlink" title="問題：焦點狀態"></a>問題：焦點狀態</h4><p>Flutter 的 Material 按鈕預設會處理基本的焦點狀態。在 Wonderous 的情況下，我們變更了 Material 按鈕的預設樣式，將 <code>overlayColor</code> 設定為透明。這最終破壞了按鈕的焦點狀態。對於具有鍵盤和觸控板的大型螢幕設備，您的應用程式必須處理導航，並為這些週邊設備提供無障礙解決方案。</p>
<p><strong>解決方法：</strong> <a href="https://github.com/gskinnerTeam/flutter-wonderous-app/blob/8a29d6709668980340b1b59c3d3588f123edd4d8/lib/ui/common/controls/buttons.dart#L143">變更按鈕樣式</a>，以便在按鈕獲得焦點時顯示輪廓。我們使用了 <code>FocusNode</code> 的 <a href="https://api.flutter.dev/flutter/widgets/FocusNode/hasFocus.html"><code>hasFocus</code> 屬性</a> 來檢查按鈕節點何時有焦點輸入，並在按鈕中加入了邊框。</p>
<p><strong>學習心得：</strong> 確保為應用程式中的任何自訂按鈕或手勢偵測器實作焦點狀態。如果您變更了預設的 Material 按鈕樣式，請確保您正在測試鍵盤焦點狀態，並根據需要實作自己的焦點狀態。</p>
<h4 id="問題：滑鼠捲軸速度慢"><a href="#問題：滑鼠捲軸速度慢" class="headerlink" title="問題：滑鼠捲軸速度慢"></a>問題：滑鼠捲軸速度慢</h4><p>滑鼠滾輪在應用程式的某些設備上效果不佳。使用者必須大幅度移動滾輪才能使螢幕響應。這是一個已知的 <a href="https://github.com/flutter/flutter/issues/82973">問題</a>，感謝我們的社群。我們注意到在平板電腦和摺疊裝置上這種情況更加明顯。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/0*-7rhN0eWj8p1EZ3_" />
<figcaption>使用滑鼠捲動 Wonderous 應用程式速度很慢</figcaption>
</figure>

<p><strong>解決方法：</strong> 我們在框架中 <a href="https://github.com/flutter/engine/pull/44724">修復了這個問題</a>，因為它影響了所有 Flutter 應用程式，並且將在下一版 Flutter 穩定版本中提供。</p>
<p><strong>學習心得：</strong> 有時問題不是您的應用程式獨有的，需要 Flutter 團隊來修復 :)</p>
<h3 id="應用程式使用者體驗佈局"><a href="#應用程式使用者體驗佈局" class="headerlink" title="應用程式使用者體驗佈局"></a>應用程式使用者體驗佈局</h3><p><strong>要求：</strong> 應用程式應提供自適應佈局和響應式視覺元素，這些元素會根據可用螢幕空間或設備方向進行變更。</p>
<h4 id="問題：導航軌"><a href="#問題：導航軌" class="headerlink" title="問題：導航軌"></a>問題：導航軌</h4><p>在 Wonderous 的第一個版本中，我們禁用了應用程式在小型外形尺寸上的旋轉，因為應用程式在較小的螢幕上缺乏適當的橫向模式支援。如前所述，我們修正了應用程式，以便在大型螢幕設備上分割畫面模式下，小型螢幕能夠支援橫向模式。雖然這種方法修復了 Letterboxing 問題，但應用程式的導航缺乏大型螢幕的適當人體工學變得更加明顯。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/0*FkMJSwc7jtu4K7HR" />
<figcaption>在使用 Material 的導航軌之前</figcaption>
</figure>

<p>這要求應用程式將導航佈局在螢幕邊緣附近，這些邊緣更容易觸及，例如平板電腦的左側邊緣，以在橫向模式下為應用程式內容釋放寶貴的垂直空間。</p>
<p><strong>解決方法：</strong> 更新設計，並實作類似於 <a href="https://material.io/components/navigation-rail">Material 的導航軌</a> 的導航。</p>
<p><strong>學習心得：</strong> 確保應用程式中的佈局和導航在大型螢幕設備和約 2 英寸的垂直空間（如果螢幕處於分割模式）中可以正常運作。為了使這成為可能，請使用 <a href="https://docs.flutter.dev/ui/layout/responsive/building-adaptive-apps">自適應 Widget</a>，例如 Material 的導航軌。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/1*T0mBXs1X6YdvCQmQlP5ryg.gif" />
<figcaption>使用 Material 的導航軌之後</figcaption>
</figure>

<h3 id="其他事宜"><a href="#其他事宜" class="headerlink" title="其他事宜"></a>其他事宜</h3><h4 id="問題：相機預覽和媒體投影"><a href="#問題：相機預覽和媒體投影" class="headerlink" title="問題：相機預覽和媒體投影"></a>問題：相機預覽和媒體投影</h4><p><a href="https://developer.android.com/docs/quality-guidelines/large-screen-app-quality#T3-7">要達到 Android 的第三層級</a> 狀態，您的應用程式需要在不同的方向、螢幕尺寸和多視窗模式下支援相機預覽和媒體投影。由於 Wonderous 沒有相機功能，因此此要求不適用。</p>
<p><strong>學習心得：</strong> <a href="https://developer.android.com/guide/topics/large-screens/large-screen-app-compatibility#camera_preview">顯示相機預覽</a> 令人驚訝地複雜，但 <a href="https://developer.android.com/training/camerax">Jetpack CameraX 函式庫</a> 處理了其中許多細節。在 Flutter 3.10 中，我們在 Flutter 相機外掛中加入了對 CameraX 的初步支援。若要嘗試它，請透過在您的 <code>pubspec.yaml</code> 檔案中加入以下行來選擇加入。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Dependencies:</span><br><span class="line">camera: ^0.10.4 # 最新相機版本</span><br><span class="line">camera_android_camerax: ^0.5.0</span><br></pre></td></tr></table></figure>

<h4 id="不僅限於-Android"><a href="#不僅限於-Android" class="headerlink" title="不僅限於 Android"></a>不僅限於 Android</h4><p>雖然這些修復和學習心得是針對 Android 大型螢幕設備提出的，但某些可能適用於其他平台。它們可以讓您的應用程式在 iPad、桌面瀏覽器和桌面設備上運行得更好。同樣的學習心得也適用：利用 <code>PageStorageKey</code> API、使用自適應 Widget 和佈局，或確保您使用的外掛能與大型外形尺寸配合良好。</p>
<h3 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h3><p>我們優化 Wonderous 應用程式以滿足 <a href="https://developer.android.com/guide/topics/large-screens/get-started-with-large-screens">大型螢幕</a> 需求的主要目標是展示開發 Flutter 應用程式的最佳實務，這些應用程式可以為所有 Android 設備提供絕佳的體驗。</p>
<p>在滿足 Android 的 <a href="https://developer.android.com/docs/quality-guidelines/large-screen-app-quality#large_screen_optimized">第二層級狀態</a> 的全面要求的過程中，我們發現了如何修復其他在大型螢幕上運行的 Flutter 應用程式中可能遇到的常見問題。以下是一些主要的學習心得：</p>
<ul>
<li>在變更設備方向或摺疊&#x2F;展開設備時，保持並還原 <a href="https://developer.android.com/jetpack/compose/state#store-state">應用程式狀態</a>。</li>
<li>透過使用 <a href="https://master-api.flutter.dev/flutter/services/SystemChrome/setPreferredOrientations.html">Display API</a> 準確確定螢幕尺寸，確保您的應用程式沒有被 Letterboxed。</li>
<li>處理外部 <a href="https://developer.android.com/guide/topics/large-screens/input-compatibility-large-screens">輸入設備</a>，例如使用滑鼠或鍵盤捲動。</li>
<li>專門針對大型螢幕設備設計您的應用程式佈局，例如利用 <a href="https://material.io/components/navigation-rail">Material 的導航軌</a>。</li>
</ul>
<p>您可以在 Android 的開發人員網站上進一步了解 Android 的 <a href="https://developer.android.com/docs/quality-guidelines/large-screen-app-quality">大型螢幕應用程式品質</a> 指南。</p>
<p>我們希望您在開發自己的 Flutter 應用程式以滿足 Android 的大型螢幕要求時，可以將 <a href="https://wonderous.app/">Wonderous</a> 作為參考。</p>
<p>如果您對應用程式有任何回饋，請 <a href="https://github.com/gskinnerTeam/flutter-wonderous-app">在 Github 上提交議題</a>。如果您對 Flutter 的 Android 支援或支援大型螢幕設備有任何想法，請隨時在 <a href="https://twitter.com/marihasnany">X</a> (@marihasnany) 上向我發送訊息。</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=53b7b0e17f10" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/developing-flutter-apps-for-large-screens-53b7b0e17f10">開發大型螢幕的 Flutter 應用程式</a> 最初發佈在 <a href="https://medium.com/flutter">Flutter</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p> </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/f2263cfd.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/f2263cfd.html" class="post-title-link" itemprop="url">【文章翻譯】Introducing the Flutter Consulting Directory</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-09-13 19:01:02" itemprop="dateCreated datePublished" datetime="2023-09-13T19:01:02+08:00">2023-09-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 16:55:14" itemprop="dateModified" datetime="2024-09-30T16:55:14+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="企業可以到哪裡找到顧問來協助打造下一個應用程式？"><a href="#企業可以到哪裡找到顧問來協助打造下一個應用程式？" class="headerlink" title="企業可以到哪裡找到顧問來協助打造下一個應用程式？"></a>企業可以到哪裡找到顧問來協助打造下一個應用程式？</h2><p>設計公司和數位科技顧問在應用程式的成功中扮演著至關重要的角色。企業通常會尋求顧問的協助，以幫助他們建立概念驗證、重新設計現有應用程式，或作為開發專案的專家。新創公司則會尋求代理商來建立品牌識別和製作最小可行產品原型。這些值得信賴的合作夥伴可能很難找到。</p>
<p>因此，我們很興奮地推出 <a href="http://flutter.dev/consultants">Flutter 顧問名錄</a>。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*m5eYW0Qgmdse1bpkqbsPLQ.png" />
<figcaption>flutter.dev/consultants</figcaption>
</figure>

<p>我們推出這個新頁面，簡化尋找值得信賴的 Flutter 合作夥伴的流程。我們會審查名錄中列出的合作夥伴，以驗證他們在 Flutter 專案上的成功記錄、充足的技術熟練開發人員，以及他們對發展 Flutter 社群的承諾。</p>
<h3 id="顧問的資源"><a href="#顧問的資源" class="headerlink" title="顧問的資源"></a>顧問的資源</h3><p>作為此次推出的部分，我們將重點介紹一些資源，以幫助潛在的顧問提升他們的 Flutter 專業知識。這包括：</p>
<h4 id="Flutter-簡報範本"><a href="#Flutter-簡報範本" class="headerlink" title="Flutter 簡報範本"></a><a href="https://docs.google.com/presentation/d/1TblnxXMVO1c75ggdLnA4cPh_nsDVvT--RsFqUIN6Fvg/copy">Flutter 簡報範本</a></h4><p><em>複製一份並加入您團隊的案例研究，向潛在客戶提供有說服力的 Flutter 案例。</em></p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*7xi_G_tYKGROB8su" />
<figcaption>點擊 [連結](https://docs.google.com/presentation/d/1TblnxXMVO1c75ggdLnA4cPh_nsDVvT--RsFqUIN6Fvg/copy) 自行複製一份。</figcaption>
</figure>

<h4 id="用-Flutter-打造奇蹟"><a href="#用-Flutter-打造奇蹟" class="headerlink" title="用 Flutter 打造奇蹟"></a>用 Flutter 打造奇蹟</h4><p><em>來自頂尖 Flutter 設計公司 gSkinner 的見證，說明為什麼 Flutter 對他們的團隊來說是一個寶貴的工具箱。</em></p>
<iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2F6IKhXXFFOuw%3Ffeature%3Doembed&amp;display_name=YouTube&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D6IKhXXFFOuw&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2F6IKhXXFFOuw%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube" width="854" height="480" frameborder="0" scrolling="no"><a href="https://medium.com/media/74e2089a1be1cf51198ae3051d228c7e/href">https://medium.com/media/74e2089a1be1cf51198ae3051d228c7e/href</a></iframe>

<h4 id="FlutterFlow-如何讓顧問更快地完成工作"><a href="#FlutterFlow-如何讓顧問更快地完成工作" class="headerlink" title="FlutterFlow 如何讓顧問更快地完成工作"></a><a href="https://medium.com/flutterflow-enterprise/how-flutterflow-helps-consultants-solve-clients-last-mile-of-digital-transformation-b6d8e7d3b49e">FlutterFlow 如何讓顧問更快地完成工作</a></h4><p><em>了解顧問如何使用 FlutterFlow 更快地交付高品質的客戶專案。</em> <a href="https://medium.com/flutterflow-enterprise/how-flutterflow-helps-consultants-solve-clients-last-mile-of-digital-transformation-b6d8e7d3b49e">閱讀部落格文章</a>。_</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/896/0*H35eVj4imixLHgDv" />
</figure>

<h4 id="IBM-如何建立其-Flutter-優秀中心"><a href="#IBM-如何建立其-Flutter-優秀中心" class="headerlink" title="IBM 如何建立其 Flutter 優秀中心"></a><a href="https://medium.com/flutter/how-ibm-is-creating-a-flutter-center-of-excellence-3c6a3c025441">IBM 如何建立其 Flutter 優秀中心</a></h4><p><em>了解 IBM 為什麼以及如何用數百位 Flutter 開發人員建立 Flutter 優秀中心。</em> <a href="https://medium.com/flutter/how-ibm-is-creating-a-flutter-center-of-excellence-3c6a3c025441">閱讀部落格文章</a>。_</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*wgS4PLHJhlegD-knIZhEFA.png" />
</figure>

<h4 id="訓練客戶使用-Flutter"><a href="#訓練客戶使用-Flutter" class="headerlink" title="訓練客戶使用 Flutter"></a><a href="http://verygood.ventures/blog/training-clients-in-flutter">訓練客戶使用 Flutter</a></h4><p><em>了解 VGV 如何建立成功的 Flutter 訓練課程。您可以提升自己的開發人員或客戶的技能。</em> <a href="https://verygood.ventures/blog/training-clients-in-flutter">閱讀部落格文章</a>。_ </p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*0WsqrUDKa7Uikyh9" />
</figure>

<h3 id="準備好申請了嗎？"><a href="#準備好申請了嗎？" class="headerlink" title="準備好申請了嗎？"></a>準備好申請了嗎？</h3><p>要申請，代理商和顧問應該填寫 <a href="https://docs.google.com/forms/d/1CS1Ysbwyeya4o0kzu1acPFie8ozHrUgEmAK4kx0_MZM/edit?usp=drive_open&amp;resourcekey=0-Qi5RvEWxp_WT86zHombxgg">這個 Google 表單</a>。我們會定期審查提交的內容，並會在適當的時間通知您申請狀態。我們要求顧問每季更新其資訊，以確保名錄的準確性和相關性。</p>
<h3 id="有任何回饋嗎？"><a href="#有任何回饋嗎？" class="headerlink" title="有任何回饋嗎？"></a>有任何回饋嗎？</h3><p>我們總是樂於接受回饋。如果您對如何改進名錄或合作夥伴資源有任何想法，請發送電子郵件至 <a href="mailto:flutter-partner-program@google.com">flutter-partner-program@google.com</a>。</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=f6fc4c1d2ba3" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/introducing-the-flutter-consulting-directory-f6fc4c1d2ba3">介紹 Flutter 顧問名錄</a> 最初發佈在 <a href="https://medium.com/flutter">Flutter</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/e7a8a0d3.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/e7a8a0d3.html" class="post-title-link" itemprop="url">【文章翻譯】How IBM is creating a Flutter Center of Excellence</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-09-13 19:01:01" itemprop="dateCreated datePublished" datetime="2023-09-13T19:01:01+08:00">2023-09-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 16:55:14" itemprop="dateModified" datetime="2024-09-30T16:55:14+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="了解-IBM-如何透過-Flutter-助客戶成功"><a href="#了解-IBM-如何透過-Flutter-助客戶成功" class="headerlink" title="了解 IBM 如何透過 Flutter 助客戶成功"></a>了解 IBM 如何透過 Flutter 助客戶成功</h2><p>有效的客戶合作包含兩項關鍵因素：資源的明智運用和及時的交付。</p>
<p>在當今以行動裝置和數位為先的環境中，客戶對體驗、速度、個人化和便利性的期望呈指數級增長。透過使用 Flutter，開發人員和設計師可以更快、更有效地建立跨平台的網頁和行動應用程式。</p>
<h3 id="我們為何要擴展-Flutter-的實務"><a href="#我們為何要擴展-Flutter-的實務" class="headerlink" title="我們為何要擴展 Flutter 的實務"></a>我們為何要擴展 Flutter 的實務</h3><h4 id="Flutter-幫助我們更快地交付客戶專案"><a href="#Flutter-幫助我們更快地交付客戶專案" class="headerlink" title="Flutter 幫助我們更快地交付客戶專案"></a><em>Flutter 幫助我們更快地交付客戶專案</em></h4><p>透過從單一程式碼庫中針對多個平台進行開發，我們的團隊可以比以往更快地進行原型設計、改進和部署客戶應用程式。使用 Flutter，我們可以將專案交付速度提高三倍，而不會犧牲品質。</p>
<p>在 COVID-19 爆發初期，西班牙比斯開省政府聯繫 IBM，希望獲得協助，向其公民傳達最新行動和消息。他們需要一個行動應用程式，而且需要在兩週內完成。透過使用 Flutter，應用程式的第一個版本在短短 11 天內就發佈了。它迅速成為該地區下載量第三高的應用程式。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*YqawQ_2If_xPlvIbC0mj3g.png" />
</figure>

<blockquote>“在如此緊迫的時間限制下，Flutter 成為我們的救星。這是我們做出的最快的困難決定，也是我們做出的最相關的決定之一。為 iOS 和 Android 建立應用程式就如同為我們的開發團隊賦予超能力，讓我們在與時間賽跑中獲勝。” <br>— IBM 專案總監 Joanra Mallart</blockquote>

<h4 id="Flutter-幫助我們的客戶以更少的資金獲得更多"><a href="#Flutter-幫助我們的客戶以更少的資金獲得更多" class="headerlink" title="Flutter 幫助我們的客戶以更少的資金獲得更多"></a><em>Flutter 幫助我們的客戶以更少的資金獲得更多</em></h4><p>交付絕佳的使用者體驗始終是我們首要考量。然而，許多客戶的預算很緊，這往往需要放棄會幫助其應用程式成功的平台或功能。透過使用 Flutter，我們能夠透過無妥協的開發來超越客戶的期望。</p>
<h4 id="客戶正在詢問-Flutter"><a href="#客戶正在詢問-Flutter" class="headerlink" title="客戶正在詢問 Flutter"></a><em>客戶正在詢問 Flutter</em></h4><p>Flutter 的普及程度不斷提高，這從最近的 <a href="https://stackoverflow.blog/2022/02/21/why-flutter-is-the-most-popular-cross-platform-mobile-sdk/">StackOverflow 報告</a> 中可以看出，該報告將其列為最受歡迎的 UI 框架。因此，我們看到越來越多的客戶向我們詢問如何在他們的應用程式中使用 Flutter。開發人員和業務利益相關者都對利用 Flutter 的優點感興趣。</p>
<h4 id="與-Google-的無縫協作"><a href="#與-Google-的無縫協作" class="headerlink" title="與 Google 的無縫協作"></a><em>與 Google 的無縫協作</em></h4><p>作為 Google Cloud 的主要合作夥伴，IBM 和 Google 已經建立了緊密的關係。透過採用 Flutter，我們能夠利用開發人員產品之間的無縫整合，並在需要時獲得 Google 團隊的支援。</p>
<h3 id="我們如何建立卓越中心"><a href="#我們如何建立卓越中心" class="headerlink" title="我們如何建立卓越中心"></a>我們如何建立卓越中心</h3><p>數十年來，IBM 一直處於以使用者為中心的行動創新的最前沿，由 IBM iX 領導，IBM iX 是 IBM 諮詢的體驗和設計合作夥伴。我們在全球 60 個 IBM iX 工作室中擁有超過 15,000 名開發、設計和策略實務者，為全球客戶提供傑出的行動體驗。</p>
<p>然而，對於一個龐大且分散的團隊來說，建立一個知識共享的單一場所至關重要。建立卓越中心有助於我們的團隊推薦最佳實務、重複利用經驗教訓，並在整合的社群中慶祝客戶的成功。</p>
<p>以下是我們為建立 IBM 諮詢的 Flutter 開發和設計卓越中心而設定的優先事項：</p>
<h4 id="1-定期舉辦社群論壇"><a href="#1-定期舉辦社群論壇" class="headerlink" title="1. 定期舉辦社群論壇"></a>1. 定期舉辦社群論壇</h4><p>在 IBM，我們每季度舉辦一次 Flutter 社群電話會議。在這個電話會議中，開發人員和設計師可以分享客戶參與的經驗教訓、討論 Flutter 和 Dart 的新功能，以及從更廣泛的 Flutter 社群中獲得更新。</p>
<h4 id="2-建立一個提問的環境"><a href="#2-建立一個提問的環境" class="headerlink" title="2. 建立一個提問的環境"></a>2. 建立一個提問的環境</h4><p>我們建立了一個專用的聊天室，讓開發人員和設計師可以隨時提出與 Flutter 相關的問題。我們有一群 Flutter 專家可以協助解決問題或推薦特定方法。</p>
<h4 id="3-將知識共享和可重複使用的組件集中化"><a href="#3-將知識共享和可重複使用的組件集中化" class="headerlink" title="3. 將知識共享和可重複使用的組件集中化"></a>3. 將知識共享和可重複使用的組件集中化</h4><p>許多客戶專案在架構上存在相似之處。因此，我們建立了簡單的專案範本，實務者可以從中提取這些範本以加快開發速度。</p>
<h4 id="4-為客戶建立教育材料"><a href="#4-為客戶建立教育材料" class="headerlink" title="4. 為客戶建立教育材料"></a>4. 為客戶建立教育材料</h4><p>雖然許多客戶了解 Flutter 的優點，但有些人可能想要更好地了解 Flutter 如何幫助 _他們_。基於 <a href="https://docs.google.com/presentation/d/1TblnxXMVO1c75ggdLnA4cPh_nsDVvT--RsFqUIN6Fvg/copy">Flutter 推介資料</a>，我們開發了材料來教育客戶了解 Flutter 與其他框架的不同之處。我們建立了一個客戶案例研究的中心儲存庫，以便輕鬆展示 Flutter 如何幫助以前的客戶。</p>
<h4 id="5-為-Flutter-實務者建立學習路徑"><a href="#5-為-Flutter-實務者建立學習路徑" class="headerlink" title="5. 為 Flutter 實務者建立學習路徑"></a>5. 為 Flutter 實務者建立學習路徑</h4><p>在 IBM，實務者可以獲得特定技術或領域的認證。我們建立了一個專用的學習路徑，幫助開發人員學習 Flutter 並將這些知識應用於新的客戶參與中。當實務者完成此路徑後，他們將在我們的資料庫中被記錄為 Flutter 實務者 - 因此可以輕鬆快速地為 Flutter 專案配備人員。</p>
<p>透過建立這個卓越中心，我們幫助實務者加快了他們對 Flutter 的學習。藉由這些資訊，我們可以更好地、更快地交付客戶專案。</p>
<h3 id="未來：推動-Flutter-的卓越"><a href="#未來：推動-Flutter-的卓越" class="headerlink" title="未來：推動 Flutter 的卓越"></a>未來：推動 Flutter 的卓越</h3><p>到目前為止，IBM 在交付 Flutter 專案方面取得了重大成功。我們的客戶包括全球銀行、聯邦和州政府以及國際軍方人員。我們還在全球範圍內交付了許多概念驗證。</p>
<p>憑藉 Flutter 的靈活性以及 IBM 諮詢的創新傳統，我們正在努力塑造出色的行動體驗，讓企業及其客戶產生共鳴。隨著我們擁抱這個新的合作階段，我們邀請您加入我們這個轉變之旅。</p>
<p>立即聯繫我們，了解 <a href="https://www.ibm.com/consulting/ibmix">IBM 諮詢</a> 如何利用 Flutter 的速度、效率和卓越來賦能您的業務。</p>
<p><em>John Mutter 是 IBM 全球 CTO 體驗工程師，也是 IBM 傑出工程師。</em></p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=3c6a3c025441" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/how-ibm-is-creating-a-flutter-center-of-excellence-3c6a3c025441">IBM 如何建立 Flutter 卓越中心</a> 最初發佈在 <a href="https://medium.com/flutter">Flutter</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/c274465a.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/c274465a.html" class="post-title-link" itemprop="url">【文章翻譯】What’s new in Flutter 3.13</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-08-16 18:02:25" itemprop="dateCreated datePublished" datetime="2023-08-16T18:02:25+08:00">2023-08-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-09-30 16:55:14" itemprop="dateModified" datetime="2024-09-30T16:55:14+08:00">2024-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="Flutter-3-13-的新功能：2D-捲軸、更快的圖形、Material-3-更新等等"><a href="#Flutter-3-13-的新功能：2D-捲軸、更快的圖形、Material-3-更新等等" class="headerlink" title="Flutter 3.13 的新功能：2D 捲軸、更快的圖形、Material 3 更新等等"></a>Flutter 3.13 的新功能：2D 捲軸、更快的圖形、Material 3 更新等等</h2><figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*H4kTD2wabl_kscFq" />
</figure>

<p>歡迎回到我們的季度 Flutter 穩定版本發布，這次是 Flutter 3.13！在我們上一次版本發布後的短短三個月內，我們已經合併了 724 個 pull 請求，並且有 55 位社群成員為 Flutter 貢獻了他們的第一次提交！</p>
<p>繼續閱讀，了解 Flutter 社群為這個最新版本貢獻的所有最新功能和改進！</p>
<h3 id="引擎"><a href="#引擎" class="headerlink" title="引擎"></a>引擎</h3><p>我們對 Impeller（我們新的圖形渲染器）進行了一些改進，並為可折疊設備添加了新的引擎 API。</p>
<h3 id="Impeller"><a href="#Impeller" class="headerlink" title="Impeller"></a>Impeller</h3><h4 id="iOS-效能改進"><a href="#iOS-效能改進" class="headerlink" title="iOS 效能改進"></a>iOS 效能改進</h4><p>感謝 Flutter 用戶的高品質回饋，在此版本中，我們繼續改進 Impeller 在 iOS 上的效能。由於許多不同的優化，Impeller 渲染器在 iOS 上現在不僅具有更低的延遲（透過完全消除著色器編譯卡頓），而且在某些基準測試中還具有更高的平均吞吐量。特別是在我們的 flutter&#x2F;gallery 轉場效能基準測試中，平均畫面柵格化時間現在大約是 Skia 的一半。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*ivWbcnIt-1Mln5Lx" />
</figure>

<p><em>iPhone 11 上的 Flutter Gallery 轉場效能基準測試中平均畫面柵格化時間的改進。涵蓋的時間段大約是從 3.10 分支切換到 3.13 分支的時間。</em></p>
<p>這些進展要歸功於這些和其他優化，包括：</p>
<ul>
<li>啟用髒污區域管理和局部重繪 (<a href="https://github.com/flutter/engine/pull/40959">flutter&#x2F;engine#40959</a>)</li>
<li>實作並行渲染傳遞編碼 (<a href="https://github.com/flutter/engine/pull/42028">flutter&#x2F;engine#42028</a>)</li>
<li>對文字渲染進行了許多改進 (<a href="https://github.com/flutter/engine/pull/41290">flutter&#x2F;engine#41290</a>，<a href="https://github.com/flutter/engine/pull/41780">flutter&#x2F;engine#41780</a>，<a href="https://github.com/flutter/engine/pull/42417">flutter&#x2F;engine#42417</a>)</li>
<li>為凸形狀添加了快速路徑，以避免昂貴的細分函數調用 (<a href="https://github.com/flutter/engine/pull/41834">flutter&#x2F;engine#41834</a>)</li>
<li>開始為少數操作使用計算著色器 (<a href="https://github.com/flutter/engine/pull/42192">flutter&#x2F;engine#42192</a>)</li>
<li>更積極地剔除超出界限的繪製操作 (<a href="https://github.com/flutter/engine/pull/41606">flutter&#x2F;engine#41606</a>)</li>
</ul>
<h4 id="保真度改進"><a href="#保真度改進" class="headerlink" title="保真度改進"></a>保真度改進</h4><p>在 3.10 中，我們宣布在使用 Impeller 時，廣色域色彩在標記下可用。在聽取並解決了用戶的回饋後，廣色域色彩現在是使用 Impeller 時 iOS 上的預設值。</p>
<h4 id="Impeller-在-Android-上的進展更新"><a href="#Impeller-在-Android-上的進展更新" class="headerlink" title="Impeller 在 Android 上的進展更新"></a>Impeller 在 Android 上的進展更新</h4><p>我們繼續在 Impeller 的 Vulkan 後端取得進展，但它尚未達到可以使用官方預覽期的品質水準。我們希望確保用戶在 Android 上第一次使用 Impeller 的體驗是高品質的，而我們還沒有達到這個水準。我們希望在今年晚些時候的穩定版本中進入 Android 上 Impeller 的預覽期。儘管 Android 上的 Impeller 尚未準備好進行預覽，但 OpenGL 和 Vulkan 後端從我們在過去一年中對 Impeller 的 HAL 進行的許多後端無關優化中受益。特別是在 flutter&#x2F;gallery 轉場效能基準測試中，Android 的平均畫面柵格化時間也顯著提高。正在進行進一步的改進，以便 Android 上的預覽可以達到高品質。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*_hbW2fQla6t5bDSg" />
</figure>

<p>再次感謝社群的貢獻，特別是 GitHub 用戶 <a href="https://github.com/ColdPaleLight">ColdPaleLight</a>，他撰寫了幾個非常受歡迎的與 Impeller 相關的修補程式，改進了保真度和效能，包括添加了 <a href="https://github.com/flutter/engine/pull/42567">對圓錐形漸變的支援</a>。</p>
<p>請繼續使用 Impeller 的 <a href="https://github.com/orgs/flutter/projects/21">專案儀表板</a> 在 GitHub 上追蹤我們的進度。我們非常感謝所有回饋，並鼓勵用戶繼續在 <a href="https://github.com/flutter/flutter/issues">問題追蹤器</a> 中提交保真度和效能問題。</p>
<h4 id="Impeller（以及-Wonderous）在-macOS-上"><a href="#Impeller（以及-Wonderous）在-macOS-上" class="headerlink" title="Impeller（以及 Wonderous）在 macOS 上"></a>Impeller（以及 Wonderous）在 macOS 上</h4><p>在我們上次穩定版本發布中，我們宣布 Impeller（我們渲染引擎的重寫版本）將在 iOS 上預設啟用。從那以後，我們聽到了客戶的良好回饋。現在，我們很興奮地宣布 macOS 的 Impeller 已在預覽版中提供。您可以透過遵循 <a href="https://docs.flutter.dev/perf/impeller#availability">Impeller 頁面</a> 上的指南來測試 Impeller 並在您的應用程式中啟用它。</p>
<p>我們渴望您測試並提供回饋。幫助我們改進 macOS 的 Impeller 的最佳方法是透過在沒有 SkSL 預熱的情況下運行您的 macOS 應用程式，並使用 DevTools 找出由於著色器編譯導致 <a href="https://docs.flutter.dev/tools/devtools/performance#shader-compilation">卡頓</a> 的實例，來建立基準指標。接下來，使用 Impeller 測試您的應用程式 - 點擊並檢查錯誤、效能改進或效能回歸。如果您發現任何問題，我們強烈建議您在 GitHub 上提交它們。請務必包含您正在運行的設備資訊、影片錄製以及 <a href="https://docs.flutter.dev/tools/devtools/performance#import-and-export">效能追蹤導出的檔案</a>。</p>
<p>想要在 macOS 上嘗試 Impeller 嗎？<a href="https://apps.apple.com/us/app/wonderous/id1612491897">從 Mac App Store 安裝 Wonderous</a>！</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/880/0*mr1oUAyNBl6RWCOD" />
</figure>

<h3 id="新的引擎-API"><a href="#新的引擎-API" class="headerlink" title="新的引擎 API"></a>新的引擎 API</h3><h4 id="改進的可折疊設備支援"><a href="#改進的可折疊設備支援" class="headerlink" title="改進的可折疊設備支援"></a>改進的可折疊設備支援</h4><p>為了更好地支援可折疊設備，我們添加了一個新的 API 來擷取顯示器的各種屬性。新的 getter <a href="https://master-api.flutter.dev/flutter/dart-ui/FlutterView/display.html">FlutterView.display</a> 返回一個 <a href="https://master-api.flutter.dev/flutter/dart-ui/Display-class.html">Display</a> 物件。Display 物件報告顯示器的物理尺寸、設備像素比和更新速率。查看 <a href="https://master-api.flutter.dev/flutter/services/SystemChrome/setPreferredOrientations.html">setPreferredOrientations</a> 以獲取使用新 API 的範例。</p>
<h3 id="架構"><a href="#架構" class="headerlink" title="架構"></a>架構</h3><h3 id="Material"><a href="#Material" class="headerlink" title="Material"></a>Material</h3><p>我們在 Material Framework 中進行了一些改進，以 1) 提供更多平台適應性，2) 允許更多自訂，以及 3) 添加新功能。</p>
<h4 id="TextField-中的字元辨識"><a href="#TextField-中的字元辨識" class="headerlink" title="TextField 中的字元辨識"></a>TextField 中的字元辨識</h4><p>在 iOS 上使用 TextField 時，使用者會自動看到一個選項，可以使用裝置相機來辨識字元並將它們插入到欄位中。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/796/1*J-fzkm7jc2ORDimcTWRPxg.gif" />
</figure>

<p>這個功能要感謝社群成員 <a href="https://github.com/luckysmg">luckysmg</a>（作者）和 <a href="https://github.com/tgucio">tgucio</a>（審查者）的貢獻。這個功能是一個擁有 1000 行程式碼和 70 次提交的努力，它連接了 <a href="https://github.com/flutter/engine/pull/34751">引擎</a> 和 <a href="https://github.com/flutter/flutter/pull/96637">框架</a>！謝謝！</p>
<h4 id="平台自適應對話方塊"><a href="#平台自適應對話方塊" class="headerlink" title="平台自適應對話方塊"></a>平台自適應對話方塊</h4><p>已在 AlertDialog 中添加了一個自適應建構函數，以及自適應函數 showAdaptiveDialog，根據當前平台顯示 Material 或 Cupertino 對話方塊。</p>
<p>現在使用 AlertDialog.adaptive() 在 iOS 上使用 <a href="https://api.flutter.dev/flutter/cupertino/CupertinoAlertDialog-class.html">CupertinoAlertDialog</a> Widget：</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/714/0*-F0HReZy8hO7g4Ua" />
</figure>

<p>以及在 Android 上的 Material <a href="https://api.flutter.dev/flutter/material/AlertDialog-class.html">AlertDialog</a>：</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/700/0*mXhB49hbDgipj12y" />
</figure>

<h4 id="具有月份和年份的-CupertinoDatePicker"><a href="#具有月份和年份的-CupertinoDatePicker" class="headerlink" title="具有月份和年份的 CupertinoDatePicker"></a>具有月份和年份的 CupertinoDatePicker</h4><p>為 CupertinoDatePicker 添加了一個 monthYear 模式。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/416/0*hduILuHCxPFxzZwT" />
</figure>

<h4 id="Cupertino（iOS-風格）檢查樣式的單選按鈕"><a href="#Cupertino（iOS-風格）檢查樣式的單選按鈕" class="headerlink" title="Cupertino（iOS 風格）檢查樣式的單選按鈕"></a>Cupertino（iOS 風格）檢查樣式的單選按鈕</h4><p>已在 CupertinoRadio 中添加了 useCheckmarkStyle 屬性。這也允許 Radio.adaptive 和 RadioListTile.adaptive Widget 控制它們是否在 iOS 上使用檢查樣式。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/0*cmIR1i5jjDqtSf7e" />
</figure>

<h4 id="Material-Widget-的更多自訂選項"><a href="#Material-Widget-的更多自訂選項" class="headerlink" title="Material Widget 的更多自訂選項"></a>Material Widget 的更多自訂選項</h4><p>有一些改進讓自訂 Material Widget 的設計變得更容易：</p>
<ul>
<li>您現在可以使用 InputDecoration 的 error 屬性（而不是字串）來自訂顯示在文字欄位上的錯誤 Widget：</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/680/0*GxTex9TCfT9Hwmzg" />
</figure>

<ul>
<li>您現在可以為 ButtonSegment 添加工具提示：</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/530/0*HCwY_q2qHScr7iYn" />
</figure>

<ul>
<li>您現在可以使用 materialGapSize 屬性自訂 ExpansionPanelList 中的間隙：</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*_kpFAizvZpn1TbiX" />
</figure>

<ul>
<li>您現在可以自訂 Switch 的 trackOutlineWidth：</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/154/0*2iGWjI0i3e6CztlR" />
</figure>

<ul>
<li>您現在可以使用 NavigationDrawer 上的 tilePadding 屬性自訂內距：</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*h1eFxKZNaxJoWshN" />
</figure>

<ul>
<li>您可以使用 TabBar 的 alignment 屬性選擇如何對齊標籤：</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*ALRxynRXg1MkS-nB" />
</figure>

<h4 id="MaterialState-顏色用於晶片"><a href="#MaterialState-顏色用於晶片" class="headerlink" title="MaterialState 顏色用於晶片"></a>MaterialState 顏色用於晶片</h4><p><a href="https://github.com/flutter/flutter/pull/128584">這個</a> 使得能夠在所有不同的狀態下自訂晶片的顏色。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/912/0*EzVRz68A8GCFiuJN" />
</figure>

<h4 id="凸顯的晶片"><a href="#凸顯的晶片" class="headerlink" title="凸顯的晶片"></a>凸顯的晶片</h4><p>根據 <a href="https://m3.material.io/components/chips/overview">Material 3 規格</a>，已添加了 FilterChip.elevated、ChoiceChip.elevated 和 ActionChip.elevated 變體。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/779/0*VxRhItQg2lCdN5ka" />
</figure>

<h4 id="onSubmitted-到-SearchBar"><a href="#onSubmitted-到-SearchBar" class="headerlink" title="onSubmitted 到 SearchBar"></a>onSubmitted 到 SearchBar</h4><p>允許在使用者完成文字輸入並按下鍵盤上的完成按鈕時啟動不同的操作。</p>
<h4 id="BaseTapAndDragGestureRecognizer"><a href="#BaseTapAndDragGestureRecognizer" class="headerlink" title="BaseTapAndDragGestureRecognizer"></a>BaseTapAndDragGestureRecognizer</h4><p>已為一組類別添加了一個基類，其中包括對點擊 + 拖曳（TapAndPanGestureRecognizer）和點擊 + 水平拖曳（TapAndHorizontalDragGestureRecognizer）的支援。這些類別已經用於實作原生文字欄位手勢。但是，它們也適用於其他用例 - 例如，使用雙擊 + 垂直拖曳手勢來縮放 Widget。</p>
<h3 id="應用程式生命週期變更"><a href="#應用程式生命週期變更" class="headerlink" title="應用程式生命週期變更"></a>應用程式生命週期變更</h3><h4 id="AppLifeCycleListener"><a href="#AppLifeCycleListener" class="headerlink" title="AppLifeCycleListener"></a>AppLifeCycleListener</h4><p><a href="https://github.com/flutter/flutter/pull/123274">添加了</a> AppLifecycleListener 類別，用於偵聽應用程式生命週期的變化並回應退出應用程式的請求。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/920/0*bN0QtrIRWGDMC9LJ" />
</figure>

<h3 id="捲軸"><a href="#捲軸" class="headerlink" title="捲軸"></a>捲軸</h3><h4 id="二維捲軸基礎"><a href="#二維捲軸基礎" class="headerlink" title="二維捲軸基礎"></a>二維捲軸基礎</h4><p>此版本的 Flutter 還包含建立在兩個維度中捲軸的 Widget 的基礎，這意味著可以使用的許多新類別，包括：</p>
<ul>
<li><a href="https://master-api.flutter.dev/flutter/widgets/ChildVicinity-class.html">ChildVicinity</a>，一個類似於一維捲軸視圖中的索引的表示，代表子元素在兩個維度中的相對位置。</li>
<li><a href="https://master-api.flutter.dev/flutter/widgets/TwoDimensionalChildDelegate-class.html">TwoDimensionalChildDelegate</a>，類似於 SliverChildDelegate，具有同樣相似的子類別：<a href="https://master-api.flutter.dev/flutter/widgets/TwoDimensionalChildBuilderDelegate-class.html">TwoDimensionalChildBuilderDelegate</a> 和 <a href="https://master-api.flutter.dev/flutter/widgets/TwoDimensionalChildListDelegate-class.html">TwoDimensionalChildListDelegate</a></li>
<li><a href="https://master-api.flutter.dev/flutter/widgets/TwoDimensionalScrollView-class.html">TwoDimensionalScrollView</a>，一個抽象基類，它建立一個 <a href="https://master-api.flutter.dev/flutter/widgets/TwoDimensionalScrollable-class.html">TwoDimensionalScrollable</a> 和 <a href="https://master-api.flutter.dev/flutter/widgets/TwoDimensionalViewport-class.html">TwoDimensionalViewport</a>，與一維 ScrollView 的模型相同。</li>
<li><a href="https://master-api.flutter.dev/flutter/widgets/RenderTwoDimensionalViewport-class.html">RenderTwoDimensionalViewport</a>，最後，在兩個維度中佈局方塊子元素的工作主力。</li>
</ul>
<p>在兩個維度中捲軸還帶來了新的互動，包括對角線捲軸。查看 <a href="https://master-api.flutter.dev/flutter/widgets/DiagonalDragBehavior.html">DiagonalDragBehavior</a> 以獲取新的互動類型，並在您的 TwoDimensionalScrollView 或 TwoDimensionalScrollable 上配置它們。</p>
<p>我們進行了一項用戶研究，以便為開發人員建立這個基礎，使他們能夠在所有方向捲軸時建立他們可以想像的任何東西。查看在 <a href="https://dartpad.dev/?id=4424936c57ed13093eb389123383e894">這個 DartPad</a> 中實作的簡單、延遲加載的二維網格的範例，大約 200 行程式碼！</p>
<p>Flutter 團隊已經在努力在這個框架之上建立二維捲軸 Widget，即將在 two_dimensional_scrollables 套件中推出。</p>
<h4 id="新的-Sliver"><a href="#新的-Sliver" class="headerlink" title="新的 Sliver"></a>新的 Sliver</h4><p>Flutter 3.13 帶來了一組新的 Sliver，用於組合獨特的捲軸效果。</p>
<p><a href="https://master-api.flutter.dev/flutter/widgets/SliverMainAxisGroup-class.html">SliverMainAxisGroup</a> 和 <a href="https://master-api.flutter.dev/flutter/widgets/SliverCrossAxisGroup-class.html">SliverCrossAxisGroup</a> 都支援將多個 Sliver 安排在一起。在主軸中，這可以創造出一個效果，就是粘性標題，允許固定的標題在每個 Sliver 組在視圖中捲動時被推離視圖。</p>
<p>橫軸分組允許 Sliver 在視圖中並排排列，以及（同樣新的）Widget，例如 <a href="https://master-api.flutter.dev/flutter/widgets/SliverCrossAxisExpanded-class.html">SliverCrossAxisExpanded</a> 和 <a href="https://master-api.flutter.dev/flutter/widgets/SliverConstrainedCrossAxis-class.html">SliverConstrainedCrossAxis</a>，能夠確定橫軸中每個分組 Sliver 的空間分配。</p>
<p>Sliver 函式庫中新增的還有 <a href="https://master-api.flutter.dev/flutter/widgets/DecoratedSliver-class.html">DecoratedSliver</a>，類似於 <a href="https://master-api.flutter.dev/flutter/widgets/DecoratedBox-class.html">DecoratedBox</a>。這允許用戶使用 <a href="https://master-api.flutter.dev/flutter/painting/Decoration-class.html">Decoration</a> 來修飾 Sliver，甚至可以是 Sliver 組。</p>
<p>在 <a href="https://dartpad.dev/?id=6e2b7245063001576a3a83adb23f1121">這個 DartPad</a> 範例中查看所有這些新的 Sliver 的實際操作。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/595/0*OY76w1Hu7LqTODA9" />
</figure>

<h3 id="無障礙功能"><a href="#無障礙功能" class="headerlink" title="無障礙功能"></a>無障礙功能</h3><h4 id="無障礙功能更新"><a href="#無障礙功能更新" class="headerlink" title="無障礙功能更新"></a>無障礙功能更新</h4><ul>
<li>為 CupertinoSwitch 添加了 onOffSwitchLabels 無障礙功能屬性，以顯示 I&#x2F;O 標籤</li>
</ul>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/158/0*aKqjrDI5zXHm7Dza" />
</figure>

<ul>
<li><a href="https://github.com/flutter/flutter/pull/126171">已添加 FocusSemanticEvent</a>。但是，應該謹慎使用它，因為它可能會打破使用者對 a11y 焦點運作方式的預期。</li>
<li>IconButton 的 isSelected <a href="https://github.com/flutter/flutter/issues/127145">現在對螢幕閱讀器可用</a>。</li>
</ul>
<h3 id="平台"><a href="#平台" class="headerlink" title="平台"></a>平台</h3><h3 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h3><h4 id="新的支援目標"><a href="#新的支援目標" class="headerlink" title="新的支援目標"></a>新的支援目標</h4><p>有了這個版本，Flutter 現在支援針對 <a href="https://developer.android.com/about/versions/14">Android 14&#x2F; API 34</a> 進行目標設定。雖然我們仍在為 Android 14 中的一些新功能努力（例如預測性後退導航），但我們已針對新的 Android SDK 徹底測試了這個版本，並優先解決您可能遇到的任何相關問題。</p>
<h3 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h3><h4 id="iOS-上減少旋轉失真"><a href="#iOS-上減少旋轉失真" class="headerlink" title="iOS 上減少旋轉失真"></a>iOS 上減少旋轉失真</h4><p>當 iOS 螢幕旋轉時，Flutter 應用程式以前會遇到一些失真，看起來與原生 iOS 應用程式不同。我們進行了一些修改以減少 <a href="https://github.com/flutter/flutter/issues/16322">失真</a>：</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/737/0*veAtL_lhOkJ7kU7b" />
</figure>

<h4 id="重新命名-Runner"><a href="#重新命名-Runner" class="headerlink" title="重新命名 Runner"></a>重新命名 Runner</h4><p>當創建 Flutter iOS 應用程式時，會在 &#x2F;ios 文件夾中創建一個 Runner Xcode 專案和 Xcode 工作區。現在，您可以重新命名工作區或專案，這樣您就不會得到一堆 Runner。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/598/0*HuzkGU7owliBNi5N" />
</figure>

<h4 id="準備好迎接-iOS-17-和-Xcode-15"><a href="#準備好迎接-iOS-17-和-Xcode-15" class="headerlink" title="準備好迎接 iOS 17 和 Xcode 15"></a>準備好迎接 iOS 17 和 Xcode 15</h4><p>隨著 iOS 17 和 Xcode 15 的即將發布，想要使用這個工具鏈進行開發的用戶需要使用 Flutter 3.13。此外，在下載 Xcode 15 時，請務必也下載 iOS 17 模擬器。</p>
<h3 id="遊戲"><a href="#遊戲" class="headerlink" title="遊戲"></a>遊戲</h3><h4 id="Flutter-遊戲更新"><a href="#Flutter-遊戲更新" class="headerlink" title="Flutter 遊戲更新"></a>Flutter 遊戲更新</h4><p>我們在 2022 年推出了 <a href="http://flutter.dev/games">Flutter 休閒遊戲工具包</a>，其中包含遊戲範本、教程、文件、社群空間以及 GCP&#x2F;Firebase&#x2F;Ad 積分，以幫助 Flutter 開發人員快速開始遊戲開發。從那以後，已經使用 Flutter 發布了數萬個遊戲！自發布以來，我們一直在積極與 Flutter 遊戲開發人員互動和調查，以了解如何改進遊戲工具包。幾乎所有開發人員都提到了想要更多資源和範例程式碼，以幫助他們更好地設計、開發和變現他們的遊戲。</p>
<p>今天，我們將發布對 <a href="https://flutter.dev/games">Flutter 遊戲網頁</a> 的最新更新，其中包含一個輪播視圖，用於展示在 Flutter 中構建時可以學習的影片資源和新遊戲。在接下來的幾個月裡，我們將為工具包提供一些新的更新，其中將提供額外的資源和樣本，以幫助您開始遊戲開發之旅。</p>
<p>作為第一步，我們於 2023 年 7 月與 AdMob 合作，共同舉辦了一場專為 Flutter 遊戲開發者提供的獨家 UX 設計和變現研討會。大約 100 位開發人員透過現場互動式網路研討會加入了我們，並且給予了該研討會 4.6&#x2F;5.0 的滿意度評分。我們希望能夠很快總結研討會的內容，並與大家分享這些見解。</p>
<p>我們正在積極努力更新，敬請期待！如果您已經在使用遊戲工具包，並且想要向我們提供未來改進的想法，請隨時發送電子郵件到 <a href="mailto:flutter-games@google.com">flutter-games@google.com</a>。</p>
<h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><h3 id="DevTools"><a href="#DevTools" class="headerlink" title="DevTools"></a>DevTools</h3><h4 id="新的-DevTools-功能"><a href="#新的-DevTools-功能" class="headerlink" title="新的 DevTools 功能"></a>新的 DevTools 功能</h4><p>我們對 DevTools 的效能和可用性進行了一些改進，包括：</p>
<p>我們在導航欄上添加了一個新的溢出選單，用於處理當標籤列表無法一次顯示時的情況。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*5Z-VWLi5EB_4_s1x" />
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/272/0*eenzRMajhOc8R62L" />
</figure>

<p>我們在記憶體標籤上添加了一個類別類型的圖例。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/890/0*K_zKIHXbEXlHt-Jz" />
</figure>

<p>此外，我們還使在 CPU 分析工具中捲軸樹表格變得更快、更流暢。在除錯工具中，我們已使在檔案中搜索或搜索檔案的速度提高了 5 倍。</p>
<p>若要進一步了解，請查看 <a href="https://docs.flutter.dev/tools/devtools/release-notes/release-notes-2.25.0">DevTools 2.25.0</a> 和 <a href="https://docs.flutter.dev/tools/devtools/release-notes/release-notes-2.24.0">DevTools 2.24.0</a> 的發行備註。</p>
<h3 id="重大變更和棄用"><a href="#重大變更和棄用" class="headerlink" title="重大變更和棄用"></a>重大變更和棄用</h3><h3 id="重大變更"><a href="#重大變更" class="headerlink" title="重大變更"></a>重大變更</h3><h4 id="下一個版本中預設使用-Material-3"><a href="#下一個版本中預設使用-Material-3" class="headerlink" title="下一個版本中預設使用 Material 3"></a>下一個版本中預設使用 Material 3</h4><p>我們很興奮地宣布，在 <strong>下一個</strong> Flutter 穩定版本中，我們計劃將 ThemeData useMaterial3 預設值從 false 變更為 true。換句話說，應用程式將預設獲得 Material 3 顏色、文字樣式和其他視覺效果。</p>
<p><a href="https://flutter.github.io/samples/web/material_3_demo/#/">Material 3 範例</a> 應該有助於預覽 M2 和 M3 之間的差異。</p>
<h4 id="Android-支援平台"><a href="#Android-支援平台" class="headerlink" title="Android 支援平台"></a>Android 支援平台</h4><p>Flutter 不再支援 Android Jelly Bean API 層級（16、17 和 18）。好消息是，大多數應用程式應該可以 <a href="https://github.com/flutter/flutter/pull/129729">預設遷移到這個新的 minSdkVersion</a>。</p>
<p>但是，如果您沒有自動遷移，可能是因為您對模組級別 build.gradle 進行了更改，您可能需要手動增加 minSdkVersion。若要更新，請從 Flutter 專案的根目錄定位模組級別 build.gradle。它通常位於 <YOUR PROJECT>&#x2F;android&#x2F;app&#x2F;build.gradle。將 minSdkVersion 版本提升到 19。如果看到 flutter.minSdkVersion 且它至少為 19，那麼您的最小版本設定正確。</p>
<p>Flutter Plugin 默認情況下不會遷移，因此 Plugin 作者應該在位於 <YOUR PLUGIN>&#x2F;android&#x2F;build.gradle 的頂級 build.gradle 檔案中更新 minSdkVersion。</p>
<h4 id="變更和遷移指南列表"><a href="#變更和遷移指南列表" class="headerlink" title="變更和遷移指南列表"></a>變更和遷移指南列表</h4><p>此版本中的重大變更包括在 v3.10 發布後過期的已棄用 API。若要查看所有受影響的 API，以及其他背景資訊和遷移指南，請參閱 <a href="https://docs.flutter.dev/release/breaking-changes/3-10-deprecations">此版本的棄用指南</a>。其中許多由 <a href="https://docs.flutter.dev/development/tools/flutter-fix">Flutter Fix</a> 支援，包括 IDE 中的快速修復以及使用 dart fix 命令進行批次應用。</p>
<p>與往常一樣，非常感謝社群為 <a href="https://github.com/flutter/tests/blob/master/README.md">貢獻測試</a>，它們幫助我們識別出這些重大變更。若要進一步了解，請查看 <a href="https://github.com/flutter/flutter/wiki/Tree-hygiene#handling-breaking-changes">Flutter 的重大變更政策</a>。</p>
<h3 id="貢獻"><a href="#貢獻" class="headerlink" title="貢獻"></a>貢獻</h3><h3 id="Flutter-儲存庫的優先順序和分類"><a href="#Flutter-儲存庫的優先順序和分類" class="headerlink" title="Flutter 儲存庫的優先順序和分類"></a>Flutter 儲存庫的優先順序和分類</h3><h4 id="分類更新"><a href="#分類更新" class="headerlink" title="分類更新"></a>分類更新</h4><p>在過去的幾個月裡，我們採用了一套新的優先順序定義（P0-P3）。這使我們更符合大多數其他開源專案使用的定義，並簡化了我們必須做出的有關錯誤重要性的決策 - 我們現在只有 4 個類別，而不是 7 個。希望這也能幫助我們更有效地與那些提交錯誤並想知道 <a href="https://github.com/flutter/flutter/wiki/Issue-hygiene#when-will-my-bug-be-fixed">何時修復</a> 的人交流！</p>
<p>我們還為我們的團隊引入了一個 <a href="https://github.com/flutter/flutter/wiki/Triage">新的分類方案</a>，我們希望這將使問題更難以遺漏。如果您在我們的問題資料庫中很活躍，您可能會看到我們的全新機器人添加評論以及添加或移除標籤：</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*xDizfkUpX6Kk5wCR" />
</figure>

<p>這個機器人也與 <a href="https://discord.com/invite/N7Yshp4">我們的 Discord</a> 整合，幫助我們掌握 GitHub 上發生的事件。我們希望它能從長遠來看提高我們的生產力，但在我們適應新系統的過程中，請耐心等待！</p>
<h3 id="結語"><a href="#結語" class="headerlink" title="結語"></a>結語</h3><p>隨著我們接近這個公告的尾聲，我想承認，沒有我們出色的社群的努力，我們不可能達到今天的成就！</p>
<p>若要查看此版本中包含的所有 PR 的完整列表，請查看此版本的 <a href="https://docs.flutter.dev/release/release-notes">發行備註和變更日誌</a> 部分。</p>
<p>Flutter 3.13 今天在 stable channel 中提供，並且包含 <a href="https://medium.com/dartlang/a1f4b3a7cdda/">Dart 3.1</a>。若要開始使用這些最新的更新，只需要執行 <a href="https://docs.flutter.dev/release/upgrade">flutter upgrade</a>。</p>
<p>很快再見！</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=479d9b11df4d" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/whats-new-in-flutter-3-13-479d9b11df4d">Flutter 3.13 的新功能</a> 最初發佈在 <a href="https://medium.com/flutter">Flutter</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p> </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw,default">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/46a8336.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/46a8336.html" class="post-title-link" itemprop="url">【文章翻譯】Dart 3.1 & a retrospective on functional style programming in Dart 3</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-08-16 18:00:21" itemprop="dateCreated datePublished" datetime="2023-08-16T18:00:21+08:00">2023-08-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-12-18 15:24:22" itemprop="dateModified" datetime="2024-12-18T15:24:22+08:00">2024-12-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Dart/" itemprop="url" rel="index"><span itemprop="name">Dart</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>【文章內容使用 Gemini 1.5 Pro 自動產生】</p>
<h2 id="Dart-3-1：回顧-Dart-3-中的功能式程式設計風格"><a href="#Dart-3-1：回顧-Dart-3-中的功能式程式設計風格" class="headerlink" title="Dart 3.1：回顧 Dart 3 中的功能式程式設計風格"></a>Dart 3.1：回顧 Dart 3 中的功能式程式設計風格</h2><p><strong>模式匹配和窮舉式切換結合在一起，可以啟用與 Dart 的物件導向核心無縫融合的功能式風格資料模型。</strong></p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*IWd8aRO__OzDkJVsjfoe2A.png" />
<figcaption>Dart 3 重構使用功能式風格特性的內部程式碼庫的 diff</figcaption>
</figure>

<p><em>今天我們發佈 Dart 3.1，這是自 5 月份重大 <a href="https://medium.com/dartlang/announcing-dart-3-53f065a10635">Dart 3.0</a> 發佈以來，我們的第一个穩定版本。Dart 3.1 包含一些次要更新，以及一些 API 調整，以進一步使用 3.0 中介紹的類別修飾符（您可以在 <a href="https://github.com/dart-lang/sdk/blob/main/CHANGELOG.md#310">變更日誌</a> 中了解更多資訊）。不過，大多數情況下，我們一直在花時間研究新的路線圖項目，我們希望看到它們在未來的版本中達到 beta 和穩定版本。敬請期待未來關於這方面的更多資訊！</em></p>
<p><em>因此，作為傳統發佈文章的替代，我們將回顧 Dart 3 中主要功能的一部分，討論它們如何徹底改變（在某些情況下）以及如何大幅改進您撰寫和組織 Dart 程式碼的方式。</em></p>
<h3 id="您如何建模資料？"><a href="#您如何建模資料？" class="headerlink" title="您如何建模資料？"></a>您如何建模資料？</h3><p>物件導向 (OO) 和函數式語言在許多方面有所不同，但可以說，<em>每種範式如何建模資料</em> 是區分它們的決定性特徵。具體來說，建模相關資料的不同變體以及對這些變體的操作的問題。</p>
<p>但<em>「我應該如何建模這些資料？」</em> 通常不是我們在開始新專案時會意識地思考的事情。我們傾向於使用我們所使用語言類型中常見的任何資料建模範式，而不是相反，根據對我們的資料最有意義的模型來選擇語言。</p>
<p>如果您使用的是 OO 語言，您將使用類別階層和對子類別的操作來建模資料。如果您使用的是某些函數式語言，與類別階層模型等效的是 <a href="https://en.wikipedia.org/wiki/Algebraic_data_type">代數資料類型</a> 模型，其對操作子類別的操作等效於使用 <a href="https://en.wikipedia.org/wiki/Pattern_matching">模式匹配</a> 在它們之間切換。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*mA116alArq7XKrm_PSCjyw.png" />
<figcaption>物件導向類別階層模型和函數式代數資料類型模型的簡化並列比較</figcaption>
</figure>

<p>Dart 是一種物件導向語言，但隨著時間推移一直在穩步地整合函數式特性，允許以更多多範式方法進行資料建模。最近，Dart 3 添加了 <a href="https://dart.dev/language/patterns">模式匹配</a>，<a href="https://dart.dev/language/patterns#switch-statements-and-expressions">switch</a> 上的新功能，以及 <a href="https://dart.dev/language/class-modifiers#sealed">封閉類型</a>。這些特性使在 Dart 中實作出代數資料類型成為可能，讓您可以在繼續最大限度地利用 Dart 的物件導向核心的同時，撰寫功能式風格的程式碼。</p>
<p>像 Dart 這樣的多範式語言為您提供了從單行運算式到整個類別階層的設計工具和機會。您可以考慮哪個模型最適合您的專案，或者僅僅只是考慮您的個人喜好。為了幫助您做出最佳決定，本文將分別總結每個範式的結構和優勢，然後教您如何在 Dart 3 中使用新特性來重構一些經典的物件導向設計，這些設計最適合以函數式風格撰寫。</p>
<h4 id="物件導向方法"><a href="#物件導向方法" class="headerlink" title="物件導向方法"></a>物件導向方法</h4><p>當您針對不同的資料類型具有特定操作時，在 OO 語言中，標準組織方法是在基類上建立一個方法，以及一組覆寫基類以定義其唯一行為的子類別。每個子類別都將其資料和操作放在其宣告中的一個位置。</p>
<p>以這個（高級偽程式碼）建模食譜的範例來說。將食材和步驟與食譜結合在一起，擁有食譜物件是有意義的。食譜基類可能具有用於烹飪方法的一些函數，每個食譜都會覆寫這些函數，以滿足其唯一的需求：</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/3a6f22bcd1ef1ff84f0fe4b47689a631/href">https://medium.com/media/3a6f22bcd1ef1ff84f0fe4b47689a631/href</a></iframe>

<p>具有實例方法的類別階層使您能夠輕鬆地新增新的子類別，而無需觸摸任何現有程式碼。這適用於某些領域，例如 Flutter，您在其中有數不盡的 Widget 都擴展了 Widget 類別。每個 Widget 都可以唯一地擴展和覆寫其定義中的任何必要行為。您 <em>絕對</em> 不需要知道每個 Widget 子類型如何定義其方法來新增專門的行為到您的自己的 Widget。</p>
<h4 id="函數式方法（代數資料類型）"><a href="#函數式方法（代數資料類型）" class="headerlink" title="函數式方法（代數資料類型）"></a>函數式方法（代數資料類型）</h4><p>您可以將函數式風格架構視為 OO 架構的逆向。與將 <em>一種類型的所有程式碼放在一個位置</em>（OO 實例方法在子類別宣告中）不同，您將 <em>一個操作的所有程式碼放在一個位置</em>（函數式切換類型以定義行為）。</p>
<p>這引發了一個問題，什麼時候 <em>有必要</em> 知道階層中每個子類型如何定義操作？可能基於以下幾個原因：</p>
<ul>
<li>當在程式碼中並排新增、維護和理解同一操作行為的變體更容易時。</li>
<li>當您無法修改子類別本身，但又想定義特定於每個子類別的新行為時。</li>
<li>當操作行為對於不同類型的變體之間的關係比它們與它們所操作的類型之間的關係更緊密時。</li>
</ul>
<p>有時這很明顯，但大多數情況下隻是一種觀點轉變。再次思考食譜範例。從某種意義上說，例如烤箱手冊，將烤箱說明按每個食譜分組到一個位置更有意義：</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/fce49155327bfd44fd1f78a4ca589728/href">https://medium.com/media/fce49155327bfd44fd1f78a4ca589728/href</a></iframe>

<p>在此範例中，程式結構側重於 bake 操作。無論 bake 對哪些類型進行操作，它們都隻是同一函數的不同可能的輸出；bake 與其操作的類型無關。</p>
<p>這就是 <strong>代數資料類型模型</strong>（以數學集合論中的「代數」命名）。它是函數式語言的核心組織模型，如同類別階層是 OO 語言的核心一樣。代數資料類型透過按操作將所有類型的行為分組在一起，來將行為與資料分開。</p>
<p>現在，可以使用 Dart 3 協調一致地實作出代數資料類型！</p>
<h3 id="建模物件導向代數資料類型"><a href="#建模物件導向代數資料類型" class="headerlink" title="建模物件導向代數資料類型"></a>建模物件導向代數資料類型</h3><p>函數式語言通常透過對 <a href="https://en.wikipedia.org/wiki/Tagged_union">總和類型</a> 中的案例進行模式匹配來實作出 <a href="https://en.wikipedia.org/wiki/Algebraic_data_type">代數資料類型</a> ，以將行為分配給每個變體。Dart 3 在 switch 案例中使用 <a href="https://dart.dev/language/patterns#switch-statements-and-expressions">模式匹配</a> 來實現同樣的效果，並利用了 OO 子類型自然地建模總和類型的特性。這使我們可以使用與 Dart 無縫融合的物件來實作真正 <a href="https://dart.dev/language/patterns#algebraic-data-types">多範式代數資料類型</a>。</p>
<p>以下各節將向您展示如何在 Dart 中設計代數資料類型模型，以及使用前 Dart 3 的相同功能的範例。</p>
<ul>
<li>首先，我們將說明如何透過在 <a href="https://dart.dev/language/pattern-types#object">物件模式</a> 上進行切換來將操作的基於類型的變體分組在一起。</li>
<li>然後，我們將退一步，看看如何使用新的 <a href="https://dart.dev/language/class-modifiers#sealed">封閉</a> 類別修飾符來設計子類別本身，以確保 switch 為 <a href="https://dart.dev/language/branches#exhaustiveness-checking">物件可能採用的所有可能子類型</a> 定義行為。</li>
</ul>
<h4 id="在類型之間分組行為"><a href="#在類型之間分組行為" class="headerlink" title="在類型之間分組行為"></a>在類型之間分組行為</h4><p>Dart 語言的個別部分（例如語句、類別和文字）在類別階層中都有自己的定義，但都受到多個系統（例如解析器、格式化程序和編譯器操作）的操作影響。想像一下，如果每個應用於每個語言元素的函數都必須在這些元素的宣告中定義，語言實作將會變得多麼混亂！它看起來會像這樣：</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/ffb98bc8686a75e1c08e1459a68267a0/href">https://medium.com/media/ffb98bc8686a75e1c08e1459a68267a0/href</a></iframe>

<p>出於這個原因，Dart 的內部程式碼已經自然地傾向於將函數與類型定義分開的功能式方法。以 Dart 編譯器中的 <a href="https://github.com/dart-lang/sdk/blob/main/pkg/analyzer/lib/src/error/annotation_verifier.dart">annotation_verifier</a> 函式庫為例。它包含定義注釋行為的函數（例如 @override 或 @deprecated），具體取決於注釋所附加的程式碼部分（例如 @override 如何影響類別與欄位）。</p>
<p>但根據類型分配行為不像一開始做出將行為分開的決定那麼簡單。根據類型定義行為的標準方法是使用鏈式 if-else 語句，您在注釋驗證器中經常會看到。以以下未使用任何 Dart 3 特性撰寫的驗證函數為例。它驗證了 <a href="https://github.com/dart-lang/sdk/commit/4079a47cc4fb8f88e2dd9b7faff3bd587931a379">最近貢獻的</a> @visibleOutsideTemplate 注釋的行為，該注釋選擇退出另一個注釋 @visibleForTemplate 的級聯效應：</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/a3c434f36ddd91f30755438674324b2b/href">https://medium.com/media/a3c434f36ddd91f30755438674324b2b/href</a></iframe>

<p>該函數使用精心設計的鏈式 if-else 語句，測試注釋的祖父母是否為某種宣告（ClassDeclaration、EnumDeclaration 或 MixinDeclaration），然後根據類型定義其行為。</p>
<p>使用 Dart 3，您可以在 switch 案例中使用物件模式將此結構顯著地重構為更宣告式的風格，使其更短、更容易閱讀。原始作者 <a href="https://github.com/dart-lang/sdk/blob/4079a47cc4fb8f88e2dd9b7faff3bd587931a379/pkg/analyzer/lib/src/error/annotation_verifier.dart#L417-L426">就是這麼做的</a>！16 行鏈式 if-else 語句被精簡為 7 行 switch 語句：</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/80466ddfaaece549a847e51911950a0b/href">https://medium.com/media/80466ddfaaece549a847e51911950a0b/href</a></iframe>

<p>這裡的每個案例都是一個 <a href="https://dart.dev/language/pattern-types#object">物件模式</a>，它與 grandparent 的靜態類型進行比對。與說 if (object is Type &amp;&amp; object.property !&#x3D; null) 不同，每個案例都檢查物件的模式是否與模式 Type(propertyOfType) 相符。此外，當物件與物件模式相符時，它隱含地要求它不為 null，因此無需進行顯式空檢查！</p>
<p>物件模式還可以使用嵌套的 <a href="https://dart.dev/language/pattern-types#variable">變數模式</a>，讓您可以在與之進行比對的同一行程式碼中從物件中提取（或 <a href="https://dart.dev/language/patterns#destructuring">解構</a>）屬性值。語法 (:var metadata) 隻是表示「比對並宣告一個與此 getter 名稱相同的變數」。這就是變數 metadata 如何進入最後的 for 迴圈的範圍。非常簡潔！</p>
<p>請注意，for 迴圈現在在每個案例之間是共用的。每個類型的 declaredElement 屬性實際上是另一個類型 InterfaceElement（classElement、enumElement 或 mixinElement）的不同子類型。因此，前 Dart 3 的鏈式 if-else 語句在每個 if 子句中分別迭代 metadata，以確保最終注釋對於 metadata 可能採用的所有可能類型都是類型安全的。</p>
<p>現在，重構後的結構對每個案例使用深度嵌套的物件模式，將 metadata 提升到其超類型 InterfaceElement。這使單個共用 for 迴圈能夠在案例之間迭代 metadata，成為類型安全的。</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/986/1*qYQb8DZyeJDFD-VKEb4P6Q.png" />
<figcaption>深度嵌套的物件和變數模式的語法註釋圖</figcaption>
</figure>

<p>在 Dart 3 的代數資料類型實作中，在物件模式上進行切換很重要，因為它能夠簡潔地測試子類型並解構值。一個很好的副作用是可以透過單行程式碼提供同時的保證。重申一下，此重構中的每個案例模式都同時驗證：</p>
<ul>
<li>物件是 ClassDeclaration、EnumDeclaration 或 MixinDeclaration 之一。</li>
<li>物件具有 declaredElement 屬性。</li>
<li>declaredElement 具有 metadata 屬性。</li>
<li>metadata 的類型為 InterfaceElement。</li>
<li>所有正在考慮的物件或屬性都不為 null。</li>
</ul>
<p>這是 Dart 3 如何徹底實作模式以考慮 OO 語言的許多細微差別，以及如何真正使物件導向代數資料類型成為 Dart 中的實際設計選項的完美範例。</p>
<p>在物件模式上進行類型測試非常適合將行為與類型分開。但它缺少 OO 子類型的其中一個特性，即編譯器可以讓您知道是否宣告了新的子類型，但沒有為其超類型的抽象方法定義行為。當我們不再處理類型宣告上的實例方法時，Dart 的代數資料類型模型如何實作相同的安全保證？答案是 <em>窮舉式檢查</em>。</p>
<h4 id="窮舉式檢查"><a href="#窮舉式檢查" class="headerlink" title="窮舉式檢查"></a>窮舉式檢查</h4><p>函數式語言對代數資料類型的實作使用可枚舉的總和類型，這意味著編譯器始終知道正在切換的類型的所有可能變體。然後，編譯器可以讓您知道您的 switch 是否缺少案例，因此可能某些值可能會在未被處理的情況下通過該 switch。</p>
<p>這稱為 <a href="https://dart.dev/language/branches#exhaustiveness-checking">窮舉式檢查</a>。從技術上講，它始終存在於 Dart 中，用於可枚舉的類型，例如枚舉和布林值。這些類型具有一組不可變化的可能值，如果您要對它們進行切換，編譯器會在您遺漏一個值時告知您。使用預設子句是另一種偽窮舉式檢查。由於預設會匹配所有未明確考慮的案例，它會導致編譯器在不知道是否實際考慮到所有可能的類型的情況下，認為 switch 是窮舉式的。</p>
<p>如前所述，我們想要使用子類型而不是總和類型來進行 Dart 的代數資料類型建模。但由於 Dart 中的類別可以從任何函式庫中進行擴展，因此編譯器不可能窮舉列舉類別的子類型，因為它不知道任何子類別是否在外部函式庫中宣告。</p>
<p>為了解決這個問題並完成 Dart 的代數資料類型實作，我們在 Dart 3 中加入了 <a href="https://dart.dev/language/class-modifiers#sealed">封閉類別修飾符</a>。封閉類別不能從除了自身以外的任何函式庫（<a href="https://dart.dev/language/libraries">包含其定義的檔案</a>）進行擴展或實作。這確保編譯器始終知道任何和所有可能的子類型，使其完全可枚舉。</p>
<p>以下是一個作為 3.1 版本發佈的一部分加入到 Dart SDK 中的實際重構範例：<a href="https://github.com/dart-lang/sdk/commit/c3e815bc7ad488eddf00344ab4106485a9d1ba32#diff-e98c6de423bf7e0b5b961cd10efed50330004229243aa87c18ad6314fef054b0L879-R879">封閉</a> <a href="https://github.com/dart-lang/sdk/commit/c3e815bc7ad488eddf00344ab4106485a9d1ba32#diff-e98c6de423bf7e0b5b961cd10efed50330004229243aa87c18ad6314fef054b0L879-R879">FileSystemEvent</a>，以便可以對其子類型進行窮舉式切換。做好心理準備，重構很困難…</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/ebbec98bf5109bbc14be7867a3b4c117/href">https://medium.com/media/ebbec98bf5109bbc14be7867a3b4c117/href</a></iframe>

<p>開玩笑的，這一點也不難！不過，需要注意的是，封閉現有的類別階層是一種重大變更。針對舊版本 Dart 的程式碼將無法實作或擴展該類別，因此始終檢查相依性並提醒可能在其他地方子類型化您的類別的任何使用者。</p>
<p>封閉 FileSystemEvent 允許透過 FileSystemEntity.watch 生成的事件（對應於 FileSystemEvent 的子類型）進行窮舉式切換。通常，您會監聽此事件串流並使用 <a href="https://github.com/dart-lang/sdk/issues/52273">鏈式</a> <a href="https://github.com/dart-lang/sdk/issues/52273">if-else</a> 語句來根據發生的事件類型確定操作。</p>
<p>但封閉基類不僅允許您在物件模式上進行切換，例如上一節中的 _checkVisibleOutsideTemplate 範例。它還確保在這樣做的同時，您正在考慮該類型可能產生的所有可能值，而無需使用預設案例：</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/9618c7e18185c98dcb4e4cf9968759f9/href">https://medium.com/media/9618c7e18185c98dcb4e4cf9968759f9/href</a></iframe>

<p>如果曾經新增了新的子類型，例如 FileSystemSyncEvent，編譯器會知道它，因為它隻能新增到 <a href="https://github.com/dart-lang/sdk/blob/main/sdk/lib/io/file_system_entity.dart">與 FileSystemEvent 相同的函式庫</a> 中。由於類別階層是封閉的，因此編譯器要求對其實例進行任何切換都必須是窮舉式的，並且會生成 <a href="https://dart.dev/tools/diagnostic-messages#non_exhaustive_switch_expression">錯誤</a> 來提醒使用者（編寫 switch 的人，而不是函式庫擁有者）未處理的案例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The type &#x27;FileSystemEvent&#x27; is not exhaustively matched by the switch cases since it doesn&#x27;t match &#x27;FileSystemSyncEvent&#x27;</span><br></pre></td></tr></table></figure>

<p>將封閉類別和在物件模式上進行切換結合在一起，可以使 Dart 中的完整、物件導向代數資料類型程式設計架構成為可能。</p>
<h4 id="附加功能式特性"><a href="#附加功能式特性" class="headerlink" title="附加功能式特性"></a>附加功能式特性</h4><p>上面的窮舉式切換範例包含了比促進代數資料類型更多的 Dart 3 功能特性。</p>
<p>請注意，switch 在 _fileListener 函數的 return 語句的右側 - 那是 Dart 3 中新的 <a href="https://dart.dev/language/branches#switch-expressions">switch 運算式</a>。對運算式和函數的一般強調是函數式語言的關鍵元素。Dart 3 允許生成值的 switch 運算式，並且可以在允許使用運算式的任何地方使用。</p>
<p>那麼，_fileListener 在前面的範例中最終返回什麼？那是個 <a href="https://dart.dev/language/records">記錄</a>，這是 Dart 3 的另一個新特性，也與函數式程式設計相關。記錄讓您可以從函數中返回多個異質值，擴展了函數在 Dart 中的用途，並進一步減少了對自訂類別的依賴（這將是除了在過程中不會丟失其類型之外，返回不同類型的多個值的唯一其他方法）。</p>
<h3 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h3><p>您可以透過以下方式在 Dart 中建模代數資料類型：</p>
<ul>
<li>撰寫一個在封閉類別的實例 <em>上</em> 進行切換，並 <em>在</em> 其子類型 <em>上</em> 切換的函數，</li>
<li>並在 switch 案例中定義每個子類型的行為差異。</li>
</ul>
<p>在物件模式上進行切換允許您以簡潔的方式將所有操作保持在一起，而窮舉式檢查確保編譯器會在您遺漏任何類型的行為定義時提醒您。而且所有這些都建立在 Dart 已經使用的物件導向類別之上。</p>
<p>最棒的是，您不必選擇物件導向或函數式風格；這兩種範式可以融合在一起，您可以使用最適合您正在定義的操作的風格。</p>
<p>您可以透過少量修改使現有的類別階層更具函數式特性，甚至可以在同一個類別階層中混合使用實例方法和代數資料類型。無論將行為與類型緊密結合起來是否有意義，還是將不同類型的行為分組到一個函數中，您都可以使用最合理的風格。</p>
<p>我們希望這個介紹能夠激發您對函數式程式設計以及嘗試使用新的 Dart 3 特性的興趣。誰知道呢，也許我們很快就會看到第一個完全使用函數式風格的 Dart 程式出自你們其中一位！</p>
<h4 id="資源"><a href="#資源" class="headerlink" title="資源"></a>資源</h4><ul>
<li>若要進一步了解 Dart 中的函數式程式設計，請查看以下資源：<ul>
<li>有關 <a href="https://dart.dev/language/patterns">模式</a> 和 <a href="https://dart.dev/language/branches#exhaustiveness-checking">窮舉式檢查</a> 的官方 Dart 文件。</li>
<li>有關使用 Dart 3 重構 Flutter 程式碼的 <a href="https://codelabs.developers.google.com/codelabs/dart-patterns-records#0">模式和記錄程式碼實驗室</a>。</li>
<li>來自 FlutterCon 的關於 Dart 中函數式程式設計的 <a href="https://www.droidcon.com/2023/08/07/the-joy-of-functional-programming-in-dart/">社群演講</a>。</li>
<li>這篇 <a href="https://journal.stuffwithstuff.com/2023/08/04/representing-heterogeneous-data/">部落格文章</a> 介紹了 Bob Nystrom（<a href="https://github.com/dart-lang/language/blob/main/accepted/3.0/patterns/feature-specification.md">在 Dart 中設計模式</a> 的作者！）的個人部落格，講述了如何建模異質資料。</li>
</ul>
</li>
</ul>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=a1f4b3a7cdda" width="1" height="1" alt=""><hr><p><a href="https://medium.com/dartlang/dart-3-1-a-retrospective-on-functional-style-programming-in-dart-3-a1f4b3a7cdda">Dart 3.1 和回顧 Dart 3 中的功能式程式設計風格</a> 最初發佈在 <a href="https://medium.com/dartlang">Dart</a> 上的 Medium，人們在那裡透過突出顯示和回應這個故事來繼續討論。</p></p>
<p>undefined</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/25/">25</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Rainvisitor</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">245</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">239</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rainvisitor</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
