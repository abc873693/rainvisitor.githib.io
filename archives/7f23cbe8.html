<!DOCTYPE html>
<html lang="zh-tw,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.rainvisitor.me","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="ã€æ–‡ç« å…§å®¹ä½¿ç”¨ Gemini 1.5 Pro è‡ªå‹•ç¿»è­¯ç”¢ç”Ÿã€‘ æ­£ç¢ºæ“ä½œ Dart å­—ä¸² ğŸ‘‰åƒè¨±å¤šå…¶ä»–åœ¨è¡¨æƒ…ç¬¦è™Ÿé–‹å§‹ä¸»å°æˆ‘å€‘çš„æ—¥å¸¸é€šè¨Šå’Œå¤šèªè¨€æ”¯æ´åœ¨å•†æ¥­æ‡‰ç”¨ç¨‹å¼ä¸­èˆˆèµ·ä¹‹å‰è¨­è¨ˆçš„ç¨‹å¼èªè¨€ä¸€æ¨£ï¼ŒDart å°‡å­—ä¸²è¡¨ç¤ºç‚º UTF-16 ç·¨ç¢¼å–®å…ƒåºåˆ—ã€‚é€™ç¨®ç·¨ç¢¼åœ¨å¤§å¤šæ•¸æƒ…æ³ä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œç›´åˆ°åœ‹éš›åŒ–çš„åŠ å¼·å’Œä¼´éš¨ä»»ä½•èªè¨€å‡ºç¾çš„è¡¨æƒ…ç¬¦è™Ÿçš„å¼•å…¥ï¼Œä½¿å¾—è©²ç·¨ç¢¼çš„å›ºæœ‰å•é¡Œæˆç‚ºæ¯å€‹äººçš„å•é¡Œã€‚ è€ƒæ…®é€™å€‹ä¾‹å­ï¼š     åœ¨å­—ä¸²">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€æ–‡ç« ç¿»è­¯ã€‘Dart string manipulation done right ">
<meta property="og:url" content="https://blog.rainvisitor.me/archives/7f23cbe8.html">
<meta property="og:site_name" content="RainVisitor Blog">
<meta property="og:description" content="ã€æ–‡ç« å…§å®¹ä½¿ç”¨ Gemini 1.5 Pro è‡ªå‹•ç¿»è­¯ç”¢ç”Ÿã€‘ æ­£ç¢ºæ“ä½œ Dart å­—ä¸² ğŸ‘‰åƒè¨±å¤šå…¶ä»–åœ¨è¡¨æƒ…ç¬¦è™Ÿé–‹å§‹ä¸»å°æˆ‘å€‘çš„æ—¥å¸¸é€šè¨Šå’Œå¤šèªè¨€æ”¯æ´åœ¨å•†æ¥­æ‡‰ç”¨ç¨‹å¼ä¸­èˆˆèµ·ä¹‹å‰è¨­è¨ˆçš„ç¨‹å¼èªè¨€ä¸€æ¨£ï¼ŒDart å°‡å­—ä¸²è¡¨ç¤ºç‚º UTF-16 ç·¨ç¢¼å–®å…ƒåºåˆ—ã€‚é€™ç¨®ç·¨ç¢¼åœ¨å¤§å¤šæ•¸æƒ…æ³ä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œç›´åˆ°åœ‹éš›åŒ–çš„åŠ å¼·å’Œä¼´éš¨ä»»ä½•èªè¨€å‡ºç¾çš„è¡¨æƒ…ç¬¦è™Ÿçš„å¼•å…¥ï¼Œä½¿å¾—è©²ç·¨ç¢¼çš„å›ºæœ‰å•é¡Œæˆç‚ºæ¯å€‹äººçš„å•é¡Œã€‚ è€ƒæ…®é€™å€‹ä¾‹å­ï¼š     åœ¨å­—ä¸²">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://cdn-images-1.medium.com/max/1024/1*H_-SP7V6x1cQpGM_6DUReg.png">
<meta property="og:image" content="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=5abd0668ba3e">
<meta property="article:published_time" content="2020-06-30T12:25:58.000Z">
<meta property="article:modified_time" content="2024-12-18T14:43:15.799Z">
<meta property="article:author" content="Rainvisitor">
<meta property="article:tag" content="dart">
<meta property="article:tag" content="flutter">
<meta property="article:tag" content="developer-experience">
<meta property="article:tag" content="programming-languages">
<meta property="article:tag" content="string-manipulation">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn-images-1.medium.com/max/1024/1*H_-SP7V6x1cQpGM_6DUReg.png">

<link rel="canonical" href="https://blog.rainvisitor.me/archives/7f23cbe8.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-tw'
  };
</script>

  <title>ã€æ–‡ç« ç¿»è­¯ã€‘Dart string manipulation done right  | RainVisitor Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">RainVisitor Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">RainVisitor</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://blog.rainvisitor.me/archives/7f23cbe8.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rainvisitor">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RainVisitor Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ã€æ–‡ç« ç¿»è­¯ã€‘Dart string manipulation done right 
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-30 20:25:58" itemprop="dateCreated datePublished" datetime="2020-06-30T20:25:58+08:00">2020-06-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-12-18 22:43:15" itemprop="dateModified" datetime="2024-12-18T22:43:15+08:00">2024-12-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Dart/" itemprop="url" rel="index"><span itemprop="name">Dart</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>ã€æ–‡ç« å…§å®¹ä½¿ç”¨ Gemini 1.5 Pro è‡ªå‹•ç¿»è­¯ç”¢ç”Ÿã€‘</p>
<h2 id="æ­£ç¢ºæ“ä½œ-Dart-å­—ä¸²-ğŸ‘‰"><a href="#æ­£ç¢ºæ“ä½œ-Dart-å­—ä¸²-ğŸ‘‰" class="headerlink" title="æ­£ç¢ºæ“ä½œ Dart å­—ä¸² ğŸ‘‰"></a>æ­£ç¢ºæ“ä½œ Dart å­—ä¸² ğŸ‘‰</h2><p>åƒè¨±å¤šå…¶ä»–åœ¨è¡¨æƒ…ç¬¦è™Ÿé–‹å§‹ä¸»å°æˆ‘å€‘çš„æ—¥å¸¸é€šè¨Šå’Œå¤šèªè¨€æ”¯æ´åœ¨å•†æ¥­æ‡‰ç”¨ç¨‹å¼ä¸­èˆˆèµ·ä¹‹å‰è¨­è¨ˆçš„ç¨‹å¼èªè¨€ä¸€æ¨£ï¼ŒDart å°‡å­—ä¸²è¡¨ç¤ºç‚º <a href="https://api.dart.dev/stable/2.8.4/dart-core/String-class.html">UTF-16 ç·¨ç¢¼å–®å…ƒåºåˆ—</a>ã€‚é€™ç¨®ç·¨ç¢¼åœ¨å¤§å¤šæ•¸æƒ…æ³ä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œç›´åˆ°åœ‹éš›åŒ–çš„åŠ å¼·å’Œä¼´éš¨ä»»ä½•èªè¨€å‡ºç¾çš„è¡¨æƒ…ç¬¦è™Ÿçš„å¼•å…¥ï¼Œä½¿å¾—è©²ç·¨ç¢¼çš„å›ºæœ‰å•é¡Œæˆç‚ºæ¯å€‹äººçš„å•é¡Œã€‚</p>
<p>è€ƒæ…®é€™å€‹ä¾‹å­ï¼š</p>
<figure>
<img alt="The image shows the string â€œHelloâ€ with a handwaving emoji at the end and itâ€™s UTF-16 code units. The emoji takes two units." src="https://cdn-images-1.medium.com/max/1024/1*H_-SP7V6x1cQpGM_6DUReg.png" />
</figure>

<p>åœ¨å­—ä¸² â€œHelloğŸ‘‹â€ ä¸­ï¼Œé™¤äº†æ®æ‰‹è¡¨æƒ…ç¬¦è™Ÿ ğŸ‘‹ ä¹‹å¤–ï¼Œæ¯å€‹ä½¿ç”¨è€…å¯æ„ŸçŸ¥çš„å­—å…ƒéƒ½æ˜ å°„åˆ°ä¸€å€‹ç·¨ç¢¼å–®å…ƒã€‚é€™ç¨®æ˜ å°„çš„ç›´æ¥å¾Œæœæ˜¯å°è©²å­—ä¸²é•·åº¦çš„æ··æ·†ã€‚ä»¥ä¸‹ç¨‹å¼ç¢¼è¡Œçš„è¼¸å‡ºæ˜¯ 6 é‚„æ˜¯ 7ï¼Ÿ</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;HelloğŸ‘‹&#x27;</span>.length);</span><br></pre></td></tr></table></figure>

<p>å°æ–¼ä½¿ç”¨è€…ä¾†èªªï¼Œé€™å€‹å­—ä¸²ä¸­é¡¯ç„¶æœ‰ 6 å€‹å­—å…ƒï¼Œé™¤éä½ é€²è¡Œå“²å­¸æ€è€ƒã€‚ä½† Dart String API æœƒå‘Šè¨´ä½  <a href="https://api.dart.dev/stable/dart-core/String/length.html">é•·åº¦</a> æ˜¯ 7ï¼Œæˆ–è€…æ›´æº–ç¢ºåœ°èªªï¼Œæ˜¯ 7 å€‹ UTF-16 ç·¨ç¢¼å–®å…ƒã€‚é€™ç¨®å·®ç•°æœƒç”¢ç”Ÿå„ç¨®å„æ¨£çš„å¾Œæœï¼Œå› ç‚ºè¨±å¤šæ–‡å­—æ“ä½œä»»å‹™éƒ½æ¶‰åŠåˆ°ä½¿ç”¨ String API çš„å­—å…ƒç´¢å¼•ã€‚ä¾‹å¦‚ï¼Œâ€HelloğŸ‘‹â€[5] ä¸æœƒè¿”å› ğŸ‘‹ è¡¨æƒ…ç¬¦è™Ÿã€‚ç›¸åï¼Œå®ƒæœƒè¿”å›ä¸€å€‹è¡¨ç¤ºè¡¨æƒ…ç¬¦è™Ÿç¬¬ä¸€å€‹ç·¨ç¢¼å–®å…ƒçš„éŒ¯èª¤å­—å…ƒã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼ŒDart æœ‰ä¸€å€‹åç‚º <a href="https://pub.dev/packages/characters">characters</a> çš„æ–°å¥—ä»¶ï¼Œå®ƒæ“ä½œä½¿ç”¨è€…å¯æ„ŸçŸ¥çš„å­—å…ƒï¼Œè€Œä¸æ˜¯ UTF-16 ç·¨ç¢¼å–®å…ƒã€‚ä½†æ˜¯ï¼Œä½œç‚º Dart ç¨‹å¼è¨­è¨ˆå¸«ï¼Œæ‚¨éœ€è¦çŸ¥é“ä½•æ™‚ä½¿ç”¨ <code>characters</code> å¥—ä»¶ã€‚æˆ‘å€‘çš„ç ”ç©¶è¡¨æ˜ï¼Œå³ä½¿æ˜¯ç¶“é©—è±å¯Œçš„ Dart ç¨‹å¼è¨­è¨ˆå¸«åœ¨é–±è®€æ–‡å­—æ“ä½œç¨‹å¼ç¢¼æ™‚ä¹Ÿå¾ˆå®¹æ˜“å¿½ç•¥æ­¤é¡å•é¡Œã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°‡ä»‹ç´¹ä¸€äº›å¸¸è¦‹çš„å ´æ™¯ï¼Œåœ¨é€™äº›å ´æ™¯ä¸­æ‚¨éœ€è¦æ³¨æ„ä¸¦è€ƒæ…®ä½¿ç”¨ <code>characters</code> å¥—ä»¶è€Œä¸æ˜¯ Dart Stringã€‚</p>
<h3 id="éœ€è¦æ³¨æ„çš„å ´æ™¯"><a href="#éœ€è¦æ³¨æ„çš„å ´æ™¯" class="headerlink" title="éœ€è¦æ³¨æ„çš„å ´æ™¯"></a>éœ€è¦æ³¨æ„çš„å ´æ™¯</h3><p>åœ¨æœ¬ç¯€ä¸­ï¼Œæˆ‘å°‡ä»‹ç´¹ä¸€äº›å¸¸è¦‹çš„æ–‡å­—æ“ä½œå ´æ™¯ï¼Œè§£é‡‹ç‚ºä»€éº¼åœ¨é€™äº›å ´æ™¯ä¸­ä½¿ç”¨ Dart çš„ String API å¯èƒ½æœƒå°è‡´å•é¡Œï¼Œä¸¦å±•ç¤ºå¦‚ä½•ä½¿ç”¨ <code>characters</code> å¥—ä»¶ç²å¾—æ›´å¯é çš„çµæœã€‚ä»¥ä¸‹ç”¨ä¾‹é€šå¸¸å‡è¨­æˆ‘å€‘æ­£åœ¨è™•ç†äººé¡ä½¿ç”¨è€…è¼¸å…¥çš„å­—ä¸²ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«è¡¨æƒ…ç¬¦è™Ÿæˆ–æ‡‰ç”¨ç¨‹å¼é–‹ç™¼äººå“¡æœªé æœŸçš„èªè¨€çš„å­—å…ƒã€‚</p>
<h4 id="å ´æ™¯-1ï¼šè¨ˆç®—å­—ä¸²ä¸­çš„å­—å…ƒæ•¸"><a href="#å ´æ™¯-1ï¼šè¨ˆç®—å­—ä¸²ä¸­çš„å­—å…ƒæ•¸" class="headerlink" title="å ´æ™¯ 1ï¼šè¨ˆç®—å­—ä¸²ä¸­çš„å­—å…ƒæ•¸"></a>å ´æ™¯ 1ï¼šè¨ˆç®—å­—ä¸²ä¸­çš„å­—å…ƒæ•¸</h4><p>å‡è¨­æ‚¨æ­£åœ¨æ’°å¯«ä¸€å€‹å‡½æ•¸ï¼Œç”¨æ–¼æª¢æŸ¥ä½¿ç”¨è€…è¼¸å…¥çš„æ–‡å­—æ˜¯å¦è¶…éäº†ç‰¹å®šæ•¸é‡çš„å­—å…ƒã€‚å¦‚æœæœªé”åˆ°é™åˆ¶ï¼Œå‰‡è©²å‡½æ•¸è¿”å›å‰©é¤˜å­—å…ƒçš„æ­£æ•¸ï¼›å¦‚æœè¶…éäº†é™åˆ¶ï¼Œå‰‡è¿”å›é¡å¤–å­—å…ƒçš„è² æ•¸ã€‚</p>
<p>ä½¿ç”¨ String API åŸ·è¡Œæ­¤æ“ä½œéå¸¸ç°¡å–®ï¼š</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> remainingCharacters(<span class="built_in">String</span> text, <span class="built_in">int</span> limit) &#123;</span><br><span class="line">  <span class="keyword">return</span> limit - text.length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œä»¥ä¸‹æ¸¬è©¦æ­ç¤ºäº†æ­¤ç¨‹å¼ç¢¼çš„å•é¡Œï¼š</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&#x27;remainingCharacters emoji&#x27;</span>, () &#123;</span><br><span class="line">  expect(remainingCharacters(<span class="string">&#x27;How are you doing today ğŸ˜€&#x27;</span>, <span class="number">50</span>), <span class="number">47</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯æ¸¬è©¦çµæœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Expected: &lt;47&gt;</span><br><span class="line">  Actual: &lt;46&gt;</span><br></pre></td></tr></table></figure>

<p>æˆ‘å€‘å¯ä»¥ä½¿ç”¨ <code>characters</code> å¥—ä»¶é‡å¯«æ­¤å‡½æ•¸ï¼Œè©²å¥—ä»¶åœ¨ String ä¸Šæä¾›äº†ä¸€å€‹æ–¹ä¾¿çš„æ“´å±•æ–¹æ³•ï¼Œä»¥ç”¢ç”Ÿæ­£ç¢ºçš„å­—å…ƒæ•¸ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> remainingCharacters(<span class="built_in">String</span> text, <span class="built_in">int</span> limit) &#123;</span><br><span class="line">  <span class="keyword">return</span> limit - text.characters.length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å ´æ™¯-2ï¼šæ“·å–å­å­—ä¸²"><a href="#å ´æ™¯-2ï¼šæ“·å–å­å­—ä¸²" class="headerlink" title="å ´æ™¯ 2ï¼šæ“·å–å­å­—ä¸²"></a>å ´æ™¯ 2ï¼šæ“·å–å­å­—ä¸²</h4><p>åœ¨æ­¤å ´æ™¯ä¸­ï¼Œæˆ‘å€‘æƒ³è¦å¯¦ä½œä¸€å€‹å‡½æ•¸ï¼Œè©²å‡½æ•¸å¾å­—ä¸²ä¸­åˆªé™¤æœ€å¾Œä¸€å€‹å­—å…ƒä¸¦å°‡çµæœä½œç‚ºæ–°å­—ä¸²è¿”å›ã€‚è®“æˆ‘å€‘å‡è¨­æ­¤å­—ä¸²ä¾†è‡ªä½¿ç”¨è€…è¼¸å…¥ã€‚</p>
<p>ä½¿ç”¨ String ä¸Šçš„ <code>substring</code> æ–¹æ³•å¯ä»¥è¼•é¬†å¯¦ä½œæ­¤å‡½æ•¸ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> deleteLastCharacter(<span class="built_in">String</span> text) &#123;</span><br><span class="line">  <span class="keyword">return</span> text.substring(<span class="number">0</span>, text.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œä¸€å€‹å¥½çš„è¡¨æƒ…ç¬¦è™Ÿæ¸¬è©¦å¯ä»¥å¿«é€Ÿç ´å£ç¨‹å¼ç¢¼ï¼š</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&#x27;deleteLastCharacter emoji&#x27;</span>, () &#123;</span><br><span class="line">  expect(deleteLastCharacter(<span class="string">&#x27;Hi ğŸ‡©ğŸ‡ª&#x27;</span>), <span class="string">&#x27;Hi &#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯æ¸¬è©¦çµæœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Expected: â€˜Hi â€™</span><br><span class="line">  Actual: â€˜Hi ğŸ‡©???â€™</span><br><span class="line">    Which: is different. Both strings start the same, but the actual value also has the following trailing characters: ğŸ‡©???</span><br></pre></td></tr></table></figure>

<p><code>characters</code> å¥—ä»¶å¯ä»¥è¼•é¬†è™•ç†é€™ç¨®æƒ…æ³ï¼Œå› ç‚ºå®ƒæä¾›äº†é«˜éšæ–¹æ³•ï¼Œä¾‹å¦‚ <a href="https://pub.dev/documentation/characters/latest/characters/Characters/skipLast.html">skipLast(int count)</a>ã€‚æˆ‘å€‘å¯ä»¥å°‡æ­¤ç¨‹å¼ç¢¼ç‰‡æ®µé‡å¯«ç‚ºä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> deleteLastCharacter(<span class="built_in">String</span> text) &#123;</span><br><span class="line">  <span class="keyword">return</span> text.characters.skipLast(<span class="number">1</span>).toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="å ´æ™¯-3ï¼šæ ¹æ“šè¡¨æƒ…ç¬¦è™Ÿåˆ†å‰²å­—ä¸²"><a href="#å ´æ™¯-3ï¼šæ ¹æ“šè¡¨æƒ…ç¬¦è™Ÿåˆ†å‰²å­—ä¸²" class="headerlink" title="å ´æ™¯ 3ï¼šæ ¹æ“šè¡¨æƒ…ç¬¦è™Ÿåˆ†å‰²å­—ä¸²"></a>å ´æ™¯ 3ï¼šæ ¹æ“šè¡¨æƒ…ç¬¦è™Ÿåˆ†å‰²å­—ä¸²</h4><p>åœ¨ç¬¬ä¸‰å€‹å ´æ™¯ä¸­ï¼Œæˆ‘å€‘æƒ³è¦æ ¹æ“šçµ¦å®šçš„è¡¨æƒ…ç¬¦è™Ÿåˆ†å‰²å­—ä¸²ã€‚ä»¥ä¸‹æ˜¯ä¸€å€‹ä½¿ç”¨ String ä¸Šçš„ <code>split</code> æ–¹æ³•åŸ·è¡Œæ­¤æ“ä½œçš„å‡½æ•¸ï¼š</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; splitString(<span class="built_in">String</span> text, <span class="built_in">String</span> emoji) &#123;</span><br><span class="line">  <span class="keyword">return</span> text.split(emoji);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®ƒæœƒèµ·ä½œç”¨å—ï¼Ÿå®ƒå¯èƒ½åœ¨ 99% çš„æƒ…æ³ä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œä½†ä»¥ä¸‹æ¸¬è©¦èªªæ˜äº†ä¸€å€‹ä¾‹å­ï¼Œå…¶ä¸­ä¸Šé¢çš„ç¨‹å¼ç¢¼ç”¢ç”Ÿäº†ç›¸ç•¶ä»¤äººé©šè¨çš„çµæœã€‚</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&#x27;splitString emoji&#x27;</span>, () &#123;</span><br><span class="line">  expect(splitString(<span class="string">&#x27;abcğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦abc abc abc&#x27;</span>, <span class="string">&#x27;ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦&#x27;</span>), [<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯æ¸¬è©¦çµæœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Expected: [&#x27;abcğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦&#x27;, &#x27;abc&#x27;, &#x27;abc&#x27;, &#x27;abc&#x27;]</span><br><span class="line">  Actual: [&#x27;abcğŸ‘¨â€ğŸ‘©â€&#x27;, &#x27;â€ğŸ‘¦&#x27;, &#x27;abc&#x27;, &#x27;abc&#x27;, &#x27;abc&#x27;]</span><br><span class="line">    Which: was &#x27;abcğŸ‘¨â€ğŸ‘©â€&#x27; instead of &#x27;abcğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦&#x27; at location [0]</span><br></pre></td></tr></table></figure>

<p>é‚£éº¼ï¼Œç‚ºä»€éº¼ç•¶å­—ä¸²è¢«åˆ†å‰²æ™‚ï¼ŒğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ è®Šæˆäº†å…©å€‹è¡¨æƒ…ç¬¦è™Ÿ ğŸ‘¨â€ğŸ‘©ï¼Ÿé€™æ˜¯å› ç‚º ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å¯¦éš›ä¸Šç”±å››å€‹ä¸åŒçš„è¡¨æƒ…ç¬¦è™Ÿçµ„æˆï¼šğŸ‘¨ğŸ‘©ğŸ‘§ğŸ‘¦ã€‚ç•¶å­—ä¸²åœ¨ ğŸ‘§ ä¸Šè¢«åˆ†å‰²æ™‚ï¼Œâ€œabcğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦â€ è¢«åˆ†æˆäº†å…©éƒ¨åˆ†ï¼šâ€œabcğŸ‘¨â€ğŸ‘©â€ å’Œ â€œâ€ğŸ‘¦â€ã€‚</p>
<p>æ‚¨å¯ä»¥é€éä½¿ç”¨ Characters é¡åˆ¥ä¸Šçš„ <a href="https://pub.dev/documentation/characters/latest/characters/Characters/split.html">split</a> æ–¹æ³•ä¾†é¿å…æ­¤å•é¡Œï¼Œå¦‚ä¸‹åˆ—ç¨‹å¼ç¢¼æ‰€ç¤ºï¼š</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; splitString(<span class="built_in">String</span> text, <span class="built_in">String</span> emoji) &#123;</span><br><span class="line">  <span class="keyword">return</span> text.characters.split(emoji.characters).map((e) =&gt; e.toString()).toList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å ´æ™¯-4ï¼šæ ¹æ“šç´¢å¼•å­˜å–ç‰¹å®šå­—å…ƒ"><a href="#å ´æ™¯-4ï¼šæ ¹æ“šç´¢å¼•å­˜å–ç‰¹å®šå­—å…ƒ" class="headerlink" title="å ´æ™¯ 4ï¼šæ ¹æ“šç´¢å¼•å­˜å–ç‰¹å®šå­—å…ƒ"></a>å ´æ™¯ 4ï¼šæ ¹æ“šç´¢å¼•å­˜å–ç‰¹å®šå­—å…ƒ</h4><p>åœ¨æ–‡å­—æ“ä½œä¸­ï¼Œé€šå¸¸æ ¹æ“šå­—ä¸²ä¸­çš„ç´¢å¼•ï¼ˆå³ä½ç½®ï¼‰å­˜å–ç‰¹å®šå­—å…ƒã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ç¨‹å¼ç¢¼ç‰‡æ®µé¡¯ç¤ºäº†ä¸€å€‹å‡½æ•¸ï¼Œè©²å‡½æ•¸å¾ä½¿ç”¨è€…åœ¨å…©å€‹å–®ç¨çš„æ–‡å­—æ¬„ä½ä¸­è¼¸å…¥çš„åå’Œå§“ä¸­è¿”å›é¦–å­—æ¯ç¸®å¯«ï¼š</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> getInitials(<span class="built_in">String</span> firstName, <span class="built_in">String</span> lastName) &#123;</span><br><span class="line">  <span class="keyword">return</span> firstName[<span class="number">0</span>] + lastName[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œæ­£å¦‚æˆ‘å€‘åœ¨æœ¬æ–‡é–‹é ­æ‰€æ¼”ç¤ºçš„é‚£æ¨£ï¼Œåœ¨åŸºæ–¼ UTF-16 çš„å­—ä¸²ä¸­ä½¿ç”¨ç´¢å¼•å¯èƒ½æœƒæœ‰é¢¨éšªã€‚è®“æˆ‘å€‘ç”¨ä»¥ä¸‹æ¸¬è©¦æ¡ˆä¾‹é©—è­‰ä¸Šè¿°ç¨‹å¼ç¢¼çš„æ­£ç¢ºæ€§ï¼š</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&#x27;getInitials accent&#x27;</span>, () &#123;</span><br><span class="line">  expect(getInitials(<span class="string">&#x27;Ã‰lise&#x27;</span>, <span class="string">&#x27;Boisson&#x27;</span>), <span class="string">&#x27;Ã‰B&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯æ¸¬è©¦çµæœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Expected: â€˜Ã‰Bâ€™</span><br><span class="line">  Actual: â€˜EBâ€™</span><br><span class="line">    Which: is different.</span><br></pre></td></tr></table></figure>

<p>ç‚ºä»€éº¼æ¸¬è©¦å¤±æ•—äº†ï¼Ÿé€™æ˜¯å› ç‚ºå­—æ¯ â€œÃ‰â€ å¯èƒ½æ˜¯ â€œEâ€ å’Œé‡éŸ³ç¬¦è™Ÿçš„çµ„åˆã€‚æ‚¨å¯ä»¥ä½¿ç”¨ <code>characters</code> å¥—ä»¶è¼•é¬†é¿å…æ­¤å•é¡Œï¼š</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> getInitials(<span class="built_in">String</span> firstName, <span class="built_in">String</span> lastName) &#123;</span><br><span class="line">  <span class="keyword">return</span> firstName.characters.first.toString() + lastName.characters.first.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="ç·´ç¿’ï¼šçœç•¥æ–‡å­—æº¢ä½"><a href="#ç·´ç¿’ï¼šçœç•¥æ–‡å­—æº¢ä½" class="headerlink" title="ç·´ç¿’ï¼šçœç•¥æ–‡å­—æº¢ä½"></a>ç·´ç¿’ï¼šçœç•¥æ–‡å­—æº¢ä½</h3><p>ç¾åœ¨ï¼Œé€™æ˜¯ä¸€å€‹æŒ‘æˆ°ã€‚åœ¨æ­¤å ´æ™¯ä¸­ï¼Œæ‡‰ç”¨ç¨‹å¼éœ€è¦é¡¯ç¤ºè¨Šæ¯åˆ—è¡¨ï¼Œæ¯è¡Œé¡¯ç¤ºä¸€æ¢è¨Šæ¯ã€‚è¦æ±‚æ‚¨æª¢æŸ¥å¯¦ä½œä¸€å€‹å‡½æ•¸çš„ç¨‹å¼ç¢¼ï¼Œè©²å‡½æ•¸åœ¨è¨Šæ¯é•·åº¦è¶…éçµ¦å®šå­—å…ƒé™åˆ¶æ™‚å°‡æ–‡å­—æº¢ä½é¡¯ç¤ºç‚ºçœç•¥è™Ÿã€‚</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> omitTextOverflow(<span class="built_in">String</span> text, <span class="built_in">int</span> limit) &#123;</span><br><span class="line">  <span class="keyword">if</span> (text.length &amp;lt;= limit) &#123;</span><br><span class="line">    <span class="keyword">return</span> text;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> text.substring(<span class="number">0</span>, limit - <span class="number">3</span>) + <span class="string">&#x27;...&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‚¨èƒ½å¦æå‡ºä¸€å€‹æ¸¬è©¦ä¾†æ­ç¤ºæ­¤ç¨‹å¼ç¢¼ç‰‡æ®µçš„æ½›åœ¨å•é¡Œï¼Ÿæ‚¨å°‡å¦‚ä½•ä½¿ç”¨ <code>characters</code> å¥—ä»¶é‡å¯«å®ƒï¼Ÿç­”æ¡ˆåœ¨æœ¬æ–‡æœ«å°¾ã€‚</p>
<h3 id="ç·©è§£æªæ–½å’Œå¯èƒ½çš„é•·æœŸè§£æ±ºæ–¹æ¡ˆ"><a href="#ç·©è§£æªæ–½å’Œå¯èƒ½çš„é•·æœŸè§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="ç·©è§£æªæ–½å’Œå¯èƒ½çš„é•·æœŸè§£æ±ºæ–¹æ¡ˆ"></a>ç·©è§£æªæ–½å’Œå¯èƒ½çš„é•·æœŸè§£æ±ºæ–¹æ¡ˆ</h3><p>æœŸæœ› Dart ä½¿ç”¨è€…å°ä¸Šè¿°é™·é˜±ä¿æŒé«˜åº¦è­¦æƒ•æ˜¯ä¸åˆç†çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨æˆ‘å€‘é€²è¡Œçš„ä¸€é …å¯¦é©—ä¸­ï¼Œ53.7% çš„ Dart ä½¿ç”¨è€…ç„¡æ³•æª¢æ¸¬åˆ°ç¬¬ä¸€å€‹å ´æ™¯ï¼ˆè¨ˆç®—å­—å…ƒæ•¸ï¼‰ä¸­èªªæ˜çš„å•é¡Œï¼Œå³ä½¿ä»–å€‘åœ¨å¹¾åˆ†é˜å‰æ”¶åˆ°äº†å…©é é—œæ–¼ <code>characters</code> å¥—ä»¶ä»¥åŠè©²å¥—ä»¶æ—¨åœ¨è§£æ±ºçš„å•é¡Œçš„è³‡è¨Šã€‚å› æ­¤ï¼Œæˆ‘å€‘æ­£åœ¨æ¡å–å…©éšæ®µæ–¹æ³•ä¾†å¹«åŠ©é–‹ç™¼äººå“¡ç‚ºä»–å€‘çš„æ–‡å­—æ“ä½œéœ€æ±‚é¸æ“‡æœ€åˆé©çš„ APIã€‚</p>
<p>çŸ­æœŸå…§ï¼Œæˆ‘å€‘å°‡åœ¨ Flutter æ¡†æ¶å’Œ Dart åˆ†æå™¨ä¸­å¼•å…¥ä¸€çµ„ç·©è§£æªæ–½ï¼Œä»¥ä½¿ <code>characters</code> å¥—ä»¶æ›´å®¹æ˜“åœ¨ Dart UI ç¨‹å¼è¨­è¨ˆä¸­ç™¼ç¾å’Œèª¿ç”¨ã€‚é€™æ¶‰åŠå¹¾å€‹æ­¥é©Ÿï¼š</p>
<ol>
<li>åœ¨ TextField Widget çš„å…§éƒ¨å¯¦ä½œä¸­ä½¿ç”¨ <code>characters</code> å¥—ä»¶ã€‚æœ‰é—œæ›´å¤šè©³ç´°è³‡è¨Šï¼Œè«‹åƒé–± <a href="https://github.com/flutter/flutter/pull/53381">æ­¤ PR</a> å’Œ <a href="https://docs.google.com/document/d/1OOFW0PEZf0orBl445YXJ3nfjyKOqZdmeQ6KU3glUh7s/edit">æ­¤è¨­è¨ˆæ–‡ä»¶</a>ã€‚</li>
<li>é€é Flutter æ¡†æ¶å…¬é–‹ <code>characters</code> å¥—ä»¶çš„ APIã€‚å®Œæˆæ­¤æ“ä½œå¾Œï¼ŒFlutter ä½¿ç”¨è€…å°‡æ›´æœ‰å¯èƒ½é€éæ“´å±•æ–¹æ³• <a href="https://pub.dev/documentation/characters/latest/characters/StringCharacters.html">String.characters</a> ç™¼ç¾ APIï¼Œè©²æ–¹æ³•å°‡åœ¨å° String åŸ·è¡Œè‡ªå‹•å®Œæˆæ™‚é¡¯ç¤ºã€‚æ­¤å·¥ä½œçš„ç‹€æ…‹åœ¨æ­¤è­°é¡Œä¸­è¿½è¹¤ï¼š<a href="https://github.com/flutter/flutter/issues/55593">https://github.com/flutter/flutter/issues/55593</a>ã€‚</li>
<li>æ›´æ–° Flutter æ¡†æ¶çš„ API æ–‡ä»¶å’Œç¯„ä¾‹ç¨‹å¼ç¢¼ï¼Œä»¥å»ºè­°åœ¨é©ç”¨æ™‚ä½¿ç”¨ <a href="https://pub.dev/documentation/characters/latest/characters/Characters-class.html">Characters</a>  é¡åˆ¥ï¼Œä¾‹å¦‚åœ¨ <a href="https://api.flutter.dev/flutter/material/TextField/onChanged.html">TextField.onChanged</a> çš„å›èª¿ä¸­ã€‚æ­¤å·¥ä½œåœ¨ <a href="https://github.com/flutter/flutter/issues/55598">https://github.com/flutter/flutter/issues/55598</a> ä¸­è¿½è¹¤ï¼Œç›¸é—œè©³ç´°è³‡è¨Šåœ¨ <a href="https://docs.google.com/document/d/18SxWeHpds4modnvo997vIOiq01EspeFgsNvPa5ey88w/edit#heading=h.1isiu2jji0ae">æ­¤æ–‡ä»¶</a> ä¸­ã€‚</li>
<li>è®“ Dart åˆ†æå™¨åœ¨è‡ªå‹•å®Œæˆç”¨æ–¼è™•ç†ä½¿ç”¨è€…è¼¸å…¥æ–‡å­—çš„å›èª¿æ¨¡æ¿æ™‚å»ºè­°å°‡ String ç‰©ä»¶è½‰æ›ç‚º Characters ç‰©ä»¶ã€‚ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨è€…åœ¨ <code>onChanged</code> ä¸Šè‡ªå‹•å®Œæˆå¾Œï¼ŒIDE å¯ä»¥å¡«å¯«ä»¥ä¸‹ç¨‹å¼ç¢¼ç‰‡æ®µä¸­çš„æ‰€æœ‰å…§å®¹ã€‚æ­¤å·¥ä½œåœ¨ <a href="https://github.com/dart-lang/sdk/issues/41677">https://github.com/dart-lang/sdk/issues/41677</a> ä¸­è¿½è¹¤ã€‚</li>
</ol>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">TextField(</span><br><span class="line">onChanged: (text) &#123;</span><br><span class="line">    <span class="keyword">final</span> characters = text.characters;</span><br><span class="line">    <span class="comment">// â€¦</span></span><br><span class="line">&#125;,</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é€™äº›ç·©è§£æªæ–½å¯ä»¥æä¾›å¹«åŠ©ï¼Œä½†å®ƒå€‘åƒ…é™æ–¼åœ¨ Flutter å°ˆæ¡ˆä¸Šä¸‹æ–‡ä¸­åŸ·è¡Œçš„å­—ä¸²æ“ä½œã€‚æˆ‘å€‘éœ€è¦åœ¨å®ƒå€‘å¯ç”¨å¾Œä»”ç´°è¡¡é‡å®ƒå€‘çš„æœ‰æ•ˆæ€§ã€‚Dart èªè¨€å±¤é¢æ›´å®Œæ•´çš„è§£æ±ºæ–¹æ¡ˆå¯èƒ½éœ€è¦é·ç§»è‡³å°‘ä¸€äº›ç¾æœ‰ç¨‹å¼ç¢¼ï¼Œå„˜ç®¡ä¸€äº›é¸é …ï¼ˆä¾‹å¦‚ï¼Œ<a href="https://github.com/dart-lang/language/issues/42">éœæ…‹æ“´å±•é¡å‹</a>ï¼‰<em>å¯èƒ½</em>æœƒä½¿é‡å¤§è®Šæ›´æ˜“æ–¼ç®¡ç†ã€‚éœ€è¦æ›´å¤šæŠ€è¡“èª¿æŸ¥æ‰èƒ½å®Œå…¨äº†è§£æ¬Šè¡¡å–æ¨ã€‚</p>
<h3 id="å¦‚ä½•æä¾›å¹«åŠ©"><a href="#å¦‚ä½•æä¾›å¹«åŠ©" class="headerlink" title="å¦‚ä½•æä¾›å¹«åŠ©"></a>å¦‚ä½•æä¾›å¹«åŠ©</h3><p>è«‹å¹«åŠ©æˆ‘å€‘æé«˜å°å¦‚ä½•ä½¿ç”¨ <code>characters</code> å¥—ä»¶ä¿®å¾©å­—ä¸²å•é¡Œçš„èªè­˜ï¼š</p>
<ul>
<li>åœ¨æ‚¨è‡ªå·±çš„ç¨‹å¼ç¢¼ä¸­å°‹æ‰¾ä½¿ç”¨ <code>String.length</code> æˆ– <code>String.substring</code> çš„å¯¦ä¾‹ã€‚å¦‚æœå­—ä¸²å¯èƒ½æºè‡ªä½¿ç”¨è€…è¼¸å…¥ï¼Œè«‹å˜—è©¦ä½¿ç”¨ <code>characters</code> å¥—ä»¶é‡å¯«ç¨‹å¼ç¢¼ã€‚</li>
<li>èˆ‡ Dart ç¤¾ç¾¤ä¸­çš„å…¶ä»–äººåˆ†äº«é€™ç¯‡æ–‡ç« ã€‚</li>
<li>å˜—è©¦æ›´æ–° StackOverflow ä¸Šé—œæ–¼ Dart æ–‡å­—æ“ä½œçš„ <a href="https://stackoverflow.com/search?q=%5Bdart%5D+or+%5BFlutter%5D+String">ç¾æœ‰ç­”æ¡ˆ</a>ã€‚å¦‚æœå·²æ¥å—çš„ç­”æ¡ˆå¿½ç•¥äº† String API çš„æ­¤é™åˆ¶ï¼Œè«‹æé†’äººå€‘æ³¨æ„é¢¨éšªã€‚</li>
<li>å°ä¸Šé¢åˆ—å‡ºçš„ GitHub è­°é¡Œç™¼è¡¨è©•è«–ï¼Œè®“æˆ‘å€‘çŸ¥é“æ‚¨çš„æƒ³æ³•å’Œæ„è¦‹ã€‚</li>
</ul>
<p>ç¾åœ¨ï¼Œç¥æ‚¨ç·¨ç¢¼æ„‰å¿« ğŸ˜‰ï¼</p>
<h3 id="è‡´è¬"><a href="#è‡´è¬" class="headerlink" title="è‡´è¬"></a>è‡´è¬</h3><p>æ„Ÿè¬ Kathy Walrathã€Lasse Nielsen å’Œ Michael Thomson å¯©é–±æœ¬æ–‡ã€‚æˆ‘é‚„è¦æ„Ÿè¬åƒèˆ‡æˆ‘å€‘ä½¿ç”¨è€…ç ”ç©¶çš„é–‹ç™¼äººå“¡ã€‚ä»–å€‘çš„åƒèˆ‡å¹«åŠ© Dart å’Œ Flutter åœ˜éšŠæ›´å¥½åœ°äº†è§£äº†è™•ç† Dart String API æ­¤é™åˆ¶çš„æŒ‘æˆ°ã€‚</p>
<hr>
<p>PSï¼šä»¥ä¸‹æ˜¯ç·´ç¿’çš„è§£æ±ºæ–¹æ¡ˆï¼š</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> omitTextOverflow(<span class="built_in">String</span> text, <span class="built_in">int</span> limit) &#123;</span><br><span class="line">  <span class="keyword">if</span> (text.characters.length &amp;lt;= limit) &#123;</span><br><span class="line">    <span class="keyword">return</span> text;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> text.characters.take(limit - <span class="number">3</span>).toString() + <span class="string">&#x27;...&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test(<span class="string">&quot;omitTextOverflow doesn&#x27;t break emoji&quot;</span>, () &#123;</span><br><span class="line">    expect(omitTextOverflow(<span class="string">&quot;How are you doing today ğŸ˜€&quot;</span>, <span class="number">20</span>), <span class="string">&quot;How are you doing...&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=5abd0668ba3e" width="1" height="1" alt=""><hr><p><a href="https://medium.com/dartlang/dart-string-manipulation-done-right-5abd0668ba3e">æ­£ç¢ºæ“ä½œ Dart å­—ä¸² ğŸ‘‰</a> æœ€åˆç™¼ä½ˆåœ¨ <a href="https://medium.com/dartlang">Dart</a> ä¸Šçš„ Mediumï¼Œäººå€‘åœ¨é‚£è£¡é€éçªå‡ºé¡¯ç¤ºå’Œå›æ‡‰é€™å€‹æ•…äº‹ä¾†ç¹¼çºŒè¨è«–ã€‚</p></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/dart/" rel="tag"># dart</a>
              <a href="/tags/flutter/" rel="tag"># flutter</a>
              <a href="/tags/developer-experience/" rel="tag"># developer-experience</a>
              <a href="/tags/programming-languages/" rel="tag"># programming-languages</a>
              <a href="/tags/string-manipulation/" rel="tag"># string-manipulation</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/archives/9735e3e.html" rel="prev" title="ã€æ–‡ç« ç¿»è­¯ã€‘Handling 404: Page not found error in Flutter">
      <i class="fa fa-chevron-left"></i> ã€æ–‡ç« ç¿»è­¯ã€‘Handling 404: Page not found error in Flutter
    </a></div>
      <div class="post-nav-item">
    <a href="/archives/4e57f386.html" rel="next" title="ã€æ–‡ç« ç¿»è­¯ã€‘Introducing a brand new pub.dev">
      ã€æ–‡ç« ç¿»è­¯ã€‘Introducing a brand new pub.dev <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A3%E7%A2%BA%E6%93%8D%E4%BD%9C-Dart-%E5%AD%97%E4%B8%B2-%F0%9F%91%89"><span class="nav-number">1.</span> <span class="nav-text">æ­£ç¢ºæ“ä½œ Dart å­—ä¸² ğŸ‘‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%A0%B4%E6%99%AF"><span class="nav-number">1.1.</span> <span class="nav-text">éœ€è¦æ³¨æ„çš„å ´æ™¯</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A0%B4%E6%99%AF-1%EF%BC%9A%E8%A8%88%E7%AE%97%E5%AD%97%E4%B8%B2%E4%B8%AD%E7%9A%84%E5%AD%97%E5%85%83%E6%95%B8"><span class="nav-number">1.1.1.</span> <span class="nav-text">å ´æ™¯ 1ï¼šè¨ˆç®—å­—ä¸²ä¸­çš„å­—å…ƒæ•¸</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A0%B4%E6%99%AF-2%EF%BC%9A%E6%93%B7%E5%8F%96%E5%AD%90%E5%AD%97%E4%B8%B2"><span class="nav-number">1.1.2.</span> <span class="nav-text">å ´æ™¯ 2ï¼šæ“·å–å­å­—ä¸²</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A0%B4%E6%99%AF-3%EF%BC%9A%E6%A0%B9%E6%93%9A%E8%A1%A8%E6%83%85%E7%AC%A6%E8%99%9F%E5%88%86%E5%89%B2%E5%AD%97%E4%B8%B2"><span class="nav-number">1.1.3.</span> <span class="nav-text">å ´æ™¯ 3ï¼šæ ¹æ“šè¡¨æƒ…ç¬¦è™Ÿåˆ†å‰²å­—ä¸²</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A0%B4%E6%99%AF-4%EF%BC%9A%E6%A0%B9%E6%93%9A%E7%B4%A2%E5%BC%95%E5%AD%98%E5%8F%96%E7%89%B9%E5%AE%9A%E5%AD%97%E5%85%83"><span class="nav-number">1.1.4.</span> <span class="nav-text">å ´æ™¯ 4ï¼šæ ¹æ“šç´¢å¼•å­˜å–ç‰¹å®šå­—å…ƒ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B7%B4%E7%BF%92%EF%BC%9A%E7%9C%81%E7%95%A5%E6%96%87%E5%AD%97%E6%BA%A2%E4%BD%8D"><span class="nav-number">1.2.</span> <span class="nav-text">ç·´ç¿’ï¼šçœç•¥æ–‡å­—æº¢ä½</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B7%A9%E8%A7%A3%E6%8E%AA%E6%96%BD%E5%92%8C%E5%8F%AF%E8%83%BD%E7%9A%84%E9%95%B7%E6%9C%9F%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%A1%88"><span class="nav-number">1.3.</span> <span class="nav-text">ç·©è§£æªæ–½å’Œå¯èƒ½çš„é•·æœŸè§£æ±ºæ–¹æ¡ˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E6%8F%90%E4%BE%9B%E5%B9%AB%E5%8A%A9"><span class="nav-number">1.4.</span> <span class="nav-text">å¦‚ä½•æä¾›å¹«åŠ©</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%B4%E8%AC%9D"><span class="nav-number">1.5.</span> <span class="nav-text">è‡´è¬</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Rainvisitor</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">242</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">239</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rainvisitor</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
