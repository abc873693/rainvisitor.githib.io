<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>RainVisitor Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="RainVisitor Blog">
<meta property="og:url" content="https://blog.rainvisitor.me/index.html">
<meta property="og:site_name" content="RainVisitor Blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Rainvisitor">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="RainVisitor Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">RainVisitor Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.rainvisitor.me"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-flutter-3.24" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/8ddf18fb.html" class="article-date">
  <time datetime="2024-09-27T11:51:40.000Z" itemprop="datePublished">2024-09-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Flutter/">Flutter</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/8ddf18fb.html">ã€æ–‡ç« ç¿»è­¯ã€‘ Getting started with Flutter GPU</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ã€æ–‡ç« å…§å®¹ä½¿ç”¨ Gemini 1.5 Pro è‡ªå‹•ç”¢ç”Ÿã€‘</p>
<p>åœ¨ Flutter ä¸­å»ºç«‹è‡ªè¨‚æ¸²æŸ“å™¨ä¸¦æ¸²æŸ“ 3D å ´æ™¯ã€‚</p>
<p>Flutter 3.24 ç‰ˆæœ¬å¼•é€²äº†æ–°çš„ä½éšåœ–å½¢ APIï¼Œç¨±ç‚º Flutter GPUã€‚æ­¤å¤–ï¼Œé‚„æœ‰ä¸€å€‹ç”± Flutter GPU æ”¯æ´çš„ 3D æ¸²æŸ“å‡½å¼åº«ï¼Œç¨±ç‚º Flutter Scene (å¥—ä»¶ï¼šflutter_scene)ã€‚Flutter GPU å’Œ Flutter Scene ç›®å‰éƒ½è™•æ–¼é è¦½éšæ®µï¼Œåƒ…åœ¨ Flutter çš„ä¸»è¦é€šé“ä¸Šæä¾› (ç”±æ–¼ä¾è³´å¯¦é©—æ€§åŠŸèƒ½)ï¼Œéœ€è¦å•Ÿç”¨ Impellerï¼Œä¸¦ä¸”å¯èƒ½æœƒå¶çˆ¾å¼•å…¥é‡å¤§è®Šæ›´ã€‚</p>
<p>æœ¬æ–‡åŒ…å«é€™å…©å€‹å¥—ä»¶çš„å…©å€‹ã€Œå…¥é–€ã€æŒ‡å—ï¼š</p>
<ol>
<li><p>ğŸ”º <strong>é€²éšï¼š</strong>  Flutter GPU å…¥é–€<br>å¦‚æœä½ æ˜¯ç¶“é©—è±å¯Œçš„åœ–å½¢ç¨‹å¼è¨­è¨ˆå¸«ï¼Œæˆ–è€…ä½ å°ä½éšåœ–å½¢æ„Ÿèˆˆè¶£ï¼Œä¸¦å¸Œæœ›åœ¨ Flutter ä¸­å¾é ­é–‹å§‹å»ºç«‹æ¸²æŸ“å™¨ï¼Œé‚£éº¼æœ¬æŒ‡å—å°‡å¹«åŠ©ä½ é–‹å§‹ä½¿ç”¨ Flutter GPUã€‚ä½ å°‡å¾é ­é–‹å§‹ç¹ªè£½ä½ çš„ç¬¬ä¸€å€‹ä¸‰è§’å½¢â€¦â€¦åœ¨ Flutter ä¸­ï¼</p>
</li>
<li><p>ğŸ’š <strong>ä¸­ç´šï¼š</strong>  ä½¿ç”¨ Flutter Scene é€²è¡Œ 3D æ¸²æŸ“<br>å¦‚æœä½ æ˜¯ä¸€ä½å¸Œæœ›å°‡ 3D åŠŸèƒ½æ·»åŠ åˆ°ä½ çš„æ‡‰ç”¨ç¨‹å¼ä¸­çš„ Flutter é–‹ç™¼äººå“¡ï¼Œæˆ–è€…ä½ å¸Œæœ›ä½¿ç”¨ Dart å’Œ Flutter å»ºç«‹ 3D éŠæˆ²ï¼Œé‚£éº¼æœ¬æŒ‡å—é©åˆä½ ï¼ä½ å°‡è¨­å®šä¸€å€‹åŒ¯å…¥ä¸¦åœ¨ Flutter ä¸­æ¸²æŸ“ 3D è³‡ç”¢çš„å°ˆæ¡ˆã€‚</p>
</li>
</ol>
<h3 id="Flutter-GPU-å…¥é–€"><a href="#Flutter-GPU-å…¥é–€" class="headerlink" title="Flutter GPU å…¥é–€"></a>Flutter GPU å…¥é–€</h3><p>âš ï¸ è­¦å‘Šï¼âš ï¸  Flutter GPU æœ¬è³ªä¸Šæ˜¯ä¸€å€‹ä½éš APIã€‚çµ•å¤§å¤šæ•¸å¾ Flutter GPU çš„å­˜åœ¨ä¸­å—ç›Šçš„ Flutter é–‹ç™¼äººå“¡ï¼Œå¾ˆå¯èƒ½æœƒé€šéä½¿ç”¨åœ¨ pub.dev ä¸Šç™¼å¸ƒçš„æ›´é«˜éšæ¸²æŸ“å‡½å¼åº« (ä¾‹å¦‚ Flutter Scene æ¸²æŸ“å¥—ä»¶) ä¾†å¯¦ç¾ã€‚å¦‚æœä½ å° Flutter GPU API æœ¬èº«ä¸æ„Ÿèˆˆè¶£ï¼Œä¸¦ä¸”åªå° 3D æ¸²æŸ“æ„Ÿèˆˆè¶£ï¼Œè«‹è·³è½‰åˆ°  ä½¿ç”¨ Flutter Scene é€²è¡Œ 3D æ¸²æŸ“ã€‚</p>
<figure><br><img alt="" src="https://cdn-images-1.medium.com/max/900/0*hAqIOVkaI1IWnOHE" /><br><figcaption>é–ƒé–ƒç™¼å…‰ã€‚é€™æ˜¯ä¸€å€‹å°„ç·šè¡Œé€²çš„å¸¶ç¬¦è™Ÿè·é›¢å ´ã€‚ä½ å¯ä»¥ä½¿ç”¨ Flutter GPU æ¸²æŸ“å®ƒï¼Œä½†ä½¿ç”¨è‡ªè¨‚ç‰‡æ®µè‘—è‰²å™¨ä¹Ÿå¯ä»¥åšåˆ°ã€‚ </figcaption><br></figure>


<h3 id="Flutter-GPU-å…¥é–€-1"><a href="#Flutter-GPU-å…¥é–€-1" class="headerlink" title="Flutter GPU å…¥é–€"></a>Flutter GPU å…¥é–€</h3><p>Flutter GPU æ˜¯ Flutter å…§å»ºçš„ä½éšåœ–å½¢ APIã€‚å®ƒå…è¨±ä½ é€šéç·¨å¯« Dart ç¨‹å¼ç¢¼å’Œ GLSL è‘—è‰²å™¨åœ¨ Flutter ä¸­å»ºç«‹å’Œæ•´åˆè‡ªè¨‚æ¸²æŸ“å™¨ã€‚ä¸éœ€è¦åŸç”Ÿå¹³å°ç¨‹å¼ç¢¼ã€‚</p>
<p>ç›®å‰ï¼ŒFlutter GPU è™•æ–¼æ—©æœŸé è¦½éšæ®µï¼Œä¸¦æä¾›åŸºæœ¬çš„æŸµæ ¼åŒ– APIï¼Œä½†éš¨è‘— API æ¥è¿‘ç©©å®šç‹€æ…‹ï¼Œå°‡æœƒç¹¼çºŒæ·»åŠ å’Œæ”¹é€²æ›´å¤šåŠŸèƒ½ã€‚</p>
<p>Flutter GPU ä¹Ÿéœ€è¦å•Ÿç”¨ Impellerã€‚é€™æ„å‘³è‘—å®ƒåªèƒ½åœ¨ Impeller æ”¯æ´çš„å¹³å°ä¸Šä½¿ç”¨ã€‚åœ¨æ’°å¯«æœ¬æ–‡æ™‚ï¼ŒImpeller æ”¯æ´ï¼š</p>
<ul>
<li>iOS (é è¨­å•Ÿç”¨)</li>
<li>macOS (å¯é¸é è¦½)</li>
<li>Android (å¯é¸é è¦½)</li>
</ul>
<p>æˆ‘å€‘ä½¿ç”¨ Flutter GPU çš„ç›®æ¨™æ˜¯æœ€çµ‚æ”¯æ´æ‰€æœ‰ Flutter çš„å¹³å°ç›®æ¨™ã€‚æœ€çµ‚ç›®æ¨™æ˜¯åœ¨ Flutter ä¸­åŸ¹é¤Šè·¨å¹³å°æ¸²æŸ“è§£æ±ºæ–¹æ¡ˆçš„ç”Ÿæ…‹ç³»çµ±ï¼Œé€™äº›è§£æ±ºæ–¹æ¡ˆå°å¥—ä»¶ä½œè€…æ˜“æ–¼ç¶­è­·ï¼Œå°ä½¿ç”¨è€…æ˜“æ–¼å®‰è£ã€‚</p>
<p>3D æ¸²æŸ“åªæ˜¯ä¸€å€‹å¯èƒ½çš„ç”¨ä¾‹ã€‚Flutter GPU é‚„å¯ä»¥ç”¨æ–¼å»ºç«‹å°ˆé–€çš„ 2D æ¸²æŸ“å™¨ï¼Œæˆ–è€…åŸ·è¡Œæ›´ç‚ºéæ­£çµ±çš„æ“ä½œï¼Œä¾‹å¦‚æ¸²æŸ“ 4D ç©ºé–“çš„ 3D åˆ‡ç‰‡ï¼Œæˆ–è€…æŠ•å½±éæ­å¹¾é‡Œå¾—ç©ºé–“ã€‚</p>
<p>ä¸€å€‹ç”± Flutter GPU æ”¯æ´çš„è‡ªè¨‚ 2D æ¸²æŸ“å™¨çš„ä¸€å€‹å¾ˆå¥½çš„ç”¨ä¾‹ç¯„ä¾‹æ˜¯ä¾è³´éª¨éª¼ç¶²æ ¼è®Šå½¢çš„ 2D è§’è‰²å‹•ç•«æ ¼å¼ã€‚Spine 2D å°±æ˜¯ä¸€å€‹å¾ˆå¥½çš„ç¯„ä¾‹ã€‚é€™ç¨®éª¨éª¼ç¶²æ ¼è§£æ±ºæ–¹æ¡ˆé€šå¸¸å…·æœ‰å‹•ç•«ç‰‡æ®µï¼Œé€™äº›ç‰‡æ®µå¯ä»¥æ“ä½œå±¤æ¬¡çµæ§‹ä¸­éª¨éª¼çš„å¹³ç§»ã€æ—‹è½‰å’Œç¸®æ”¾å±¬æ€§ï¼Œä¸¦ä¸”æ¯å€‹é ‚é»éƒ½æœ‰å¹¾å€‹ç›¸é—œçš„ã€Œéª¨éª¼æ¬Šé‡ã€ï¼Œé€™äº›æ¬Šé‡æ±ºå®šå“ªäº›éª¨éª¼æ‡‰è©²å½±éŸ¿é ‚é»ä»¥åŠå½±éŸ¿ç¨‹åº¦ã€‚</p>
<p>ä½¿ç”¨ Canvas è§£æ±ºæ–¹æ¡ˆ (ä¾‹å¦‚ drawVertices)ï¼Œéœ€è¦åœ¨ CPU ä¸Šç‚ºæ¯å€‹é ‚é»æ‡‰ç”¨éª¨éª¼æ¬Šé‡è®Šæ›ã€‚ä½¿ç”¨ Flutter GPUï¼Œéª¨éª¼è®Šæ›å¯ä»¥ä»¥çµ±ä¸€é™£åˆ—çš„å½¢å¼å‚³éçµ¦é ‚é»è‘—è‰²å™¨ï¼Œç”šè‡³å¯ä»¥å‚³éçµ¦ç´‹ç†æ¡æ¨£å™¨ï¼Œå…è¨±æ ¹æ“šéª¨éª¼çš„ç‹€æ…‹å’Œæ¯å€‹é ‚é»çš„éª¨éª¼æ¬Šé‡ï¼Œåœ¨ GPU ä¸Šä¸¦è¡Œè¨ˆç®—æ¯å€‹é ‚é»çš„æœ€çµ‚ä½ç½®ã€‚</p>
<p>èªªåˆ°é€™è£¡ï¼Œè®“æˆ‘å€‘é€šéä¸€å€‹æº«å’Œçš„å…¥é–€ä¾†é–‹å§‹ä½¿ç”¨ Flutter GPUï¼šç¹ªè£½ä½ çš„ç¬¬ä¸€å€‹ä¸‰è§’å½¢ï¼</p>
<figure><br><img alt="" src="https://cdn-images-1.medium.com/max/1024/0*JEI3fLDGcRHWKruT" /><br></figure>


<h3 id="å°‡-Flutter-GPU-æ·»åŠ åˆ°ä½ çš„å°ˆæ¡ˆä¸­"><a href="#å°‡-Flutter-GPU-æ·»åŠ åˆ°ä½ çš„å°ˆæ¡ˆä¸­" class="headerlink" title="å°‡ Flutter GPU æ·»åŠ åˆ°ä½ çš„å°ˆæ¡ˆä¸­"></a>å°‡ Flutter GPU æ·»åŠ åˆ°ä½ çš„å°ˆæ¡ˆä¸­</h3><p>é¦–å…ˆï¼Œè«‹æ³¨æ„ï¼ŒFlutter GPU ç›®å‰è™•æ–¼æ—©æœŸé è¦½éšæ®µï¼Œå¯èƒ½æœƒå‡ºç¾ API æ–·è£‚ã€‚ç›®å‰ API å·²ç¶“å¯ä»¥å¯¦ç¾å¾ˆå¤šåŠŸèƒ½ï¼Œä½†ç¶“é©—è±å¯Œçš„åœ–å½¢å·¥ç¨‹å¸«å¯èƒ½æœƒæ³¨æ„åˆ°ä¸€äº›ç¼ºå¤±çš„é€šç”¨åŠŸèƒ½ã€‚åœ¨æ¥ä¸‹ä¾†çš„å¹¾å€‹æœˆä¸­ï¼ŒFlutter GPU å°‡æœƒé€²è¡Œå¾ˆå¤šè¦åŠƒã€‚</p>
<p>å‡ºæ–¼é€™äº›åŸå› ï¼Œå¼·çƒˆå»ºè­°ä½ ç¾åœ¨é‡å° Flutter GPU é–‹ç™¼å¥—ä»¶æ™‚ï¼Œé‡å°  ä¸»è¦é€šé“  çš„é ‚ç«¯é€²è¡Œæ“ä½œã€‚å¦‚æœä½ é‡åˆ°ä»»ä½•æ„å¤–è¡Œç‚ºã€éŒ¯èª¤æˆ–åŠŸèƒ½è«‹æ±‚ï¼Œè«‹ä½¿ç”¨æ¨™æº–  Flutter éŒ¯èª¤ç¯„æœ¬  åœ¨ GitHub ä¸Šæäº¤éŒ¯èª¤ã€‚æ‰€æœ‰èˆ‡ Flutter GPU ç›¸é—œçš„è¿½è¹¤éŒ¯èª¤éƒ½å°‡æ¨™è¨˜ç‚º  flutter-gpu æ¨™ç±¤ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨å˜—è©¦ä½¿ç”¨ Flutter GPU ä¹‹å‰ï¼Œè«‹é€šéåŸ·è¡Œä»¥ä¸‹å‘½ä»¤å°‡ Flutter åˆ‡æ›åˆ°ä¸»è¦é€šé“ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flutter channel main</span><br><span class="line">flutter upgrade</span><br></pre></td></tr></table></figure>
<p>ç¾åœ¨å»ºç«‹ä¸€å€‹æ–°çš„ Flutter å°ˆæ¡ˆã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flutter create my_cool_renderer</span><br><span class="line">cd my_cool_renderer</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹ä¾†ï¼Œå°‡ flutter_gpu SDK å¥—ä»¶æ·»åŠ åˆ°ä½ çš„ pubspec ä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter pub add flutter_gpu --sdk&#x3D;flutter</span><br></pre></td></tr></table></figure>
<h3 id="å»ºç«‹å’ŒåŒ¯å…¥è‘—è‰²å™¨æ†ç¶åŒ…ã€‚"><a href="#å»ºç«‹å’ŒåŒ¯å…¥è‘—è‰²å™¨æ†ç¶åŒ…ã€‚" class="headerlink" title="å»ºç«‹å’ŒåŒ¯å…¥è‘—è‰²å™¨æ†ç¶åŒ…ã€‚"></a>å»ºç«‹å’ŒåŒ¯å…¥è‘—è‰²å™¨æ†ç¶åŒ…ã€‚</h3><p>ç‚ºäº†ä½¿ç”¨ Flutter GPU æ¸²æŸ“ä»»ä½•æ±è¥¿ï¼Œä½ éœ€è¦ç·¨å¯«ä¸€äº› GLSL è‘—è‰²å™¨ã€‚Flutter GPU çš„è‘—è‰²å™¨èˆ‡ Flutter çš„  ç‰‡æ®µè‘—è‰²å™¨  åŠŸèƒ½æ‰€æ¶ˆè€—çš„è‘—è‰²å™¨å…·æœ‰ä¸åŒçš„èªç¾©ï¼Œç‰¹åˆ¥æ˜¯åœ¨çµ±ä¸€ç¶å®šæ–¹é¢ã€‚ä½ é‚„éœ€è¦å®šç¾©ä¸€å€‹é ‚é»è‘—è‰²å™¨èˆ‡ç‰‡æ®µè‘—è‰²å™¨ä¸€èµ·ä½¿ç”¨ã€‚</p>
<p>å¾å®šç¾©æœ€ç°¡å–®çš„è‘—è‰²å™¨é–‹å§‹ã€‚ä½ å¯ä»¥å°‡è‘—è‰²å™¨æ”¾ç½®åœ¨å°ˆæ¡ˆä¸­çš„ä»»ä½•ä½ç½®ï¼Œä½†å°æ–¼æœ¬ç¯„ä¾‹ï¼Œè«‹å»ºç«‹ä¸€å€‹ shaders ç›®éŒ„ï¼Œä¸¦ç”¨å…©å€‹è‘—è‰²å™¨å¡«å……å®ƒï¼šsimple.vert å’Œ simple.fragã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; è¤‡è£½åˆ°ï¼šshaders&#x2F;simple.vert</span><br><span class="line"></span><br><span class="line">in vec2 position;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line"> gl_Position &#x3D; vec4(position, 0.0, 1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ç¹ªè£½ä¸‰è§’å½¢æ™‚ï¼Œä½ å°‡æ“æœ‰ä¸€ä»½æ•¸æ“šåˆ—è¡¨ï¼Œè©²åˆ—è¡¨å®šç¾©æ¯å€‹é ‚é»ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒåªåˆ—å‡ºäº† 2D ä½ç½®ã€‚å°æ–¼é€™äº›é ‚é»ä¸­çš„æ¯ä¸€å€‹ï¼Œç°¡å–®çš„é ‚é»è‘—è‰²å™¨å°‡é€™äº› 2D ä½ç½®åˆ†é…çµ¦å‰ªè¼¯ç©ºé–“è¼¸å‡ºå…§åœ¨ gl_Positionã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; è¤‡è£½åˆ°ï¼šshaders&#x2F;simple.frag</span><br><span class="line"></span><br><span class="line">out vec4 frag_color;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line"> frag_color &#x3D; vec4(0, 1, 0, 1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç‰‡æ®µè‘—è‰²å™¨æ›´ç°¡å–®ï¼›å®ƒè¼¸å‡ºä¸€å€‹ RGBA é¡è‰²ï¼Œç¯„åœç‚º (0, 0, 0, 0) åˆ° (1, 1, 1, 1)ã€‚å› æ­¤ï¼Œæ‰€æœ‰å…§å®¹éƒ½å°‡è¢«é™°å½±ç‚ºç¶ è‰²ã€‚</p>
<p>å¥½äº†ï¼Œç¾åœ¨ä½ æœ‰äº†è‘—è‰²å™¨ï¼Œè«‹ä½¿ç”¨ Flutter çš„æå‰ (AOT) è‘—è‰²å™¨ç·¨è­¯å™¨ç·¨è­¯å®ƒå€‘ã€‚ç‚ºäº†è¨­å®šè‘—è‰²å™¨æ†ç¶åŒ…çš„è‡ªå‹•åŒ–æ§‹å»ºï¼Œæˆ‘å€‘å»ºè­°ä½¿ç”¨  flutter_gpu_shaders  å¥—ä»¶ã€‚</p>
<p>ä½¿ç”¨ pub å°‡ flutter_gpu_shaders ä½œç‚ºä½ çš„å°ˆæ¡ˆä¸­çš„å¸¸è¦ä¾è³´é …æ·»åŠ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter pub add flutter_gpu_shaders</span><br></pre></td></tr></table></figure>
<p>Flutter GPU è‘—è‰²å™¨è¢«æ†ç¶åˆ° .shaderbundle æ–‡ä»¶ä¸­ï¼Œé€™äº›æ–‡ä»¶å¯ä»¥ä½œç‚ºå¸¸è¦è³‡ç”¢æ·»åŠ åˆ°ä½ çš„å°ˆæ¡ˆçš„è³‡ç”¢æ†ç¶åŒ…ä¸­ã€‚è‘—è‰²å™¨æ†ç¶åŒ…åŒ…å«é‡å°å¹³å°ç›®æ¨™çš„ç·¨è­¯å¾Œçš„è‘—è‰²å™¨æºç¨‹å¼ç¢¼ã€‚</p>
<p>æ¥ä¸‹ä¾†ï¼Œå»ºç«‹ä¸€å€‹è‘—è‰²å™¨æ†ç¶åŒ…æ¸…å–®æ–‡ä»¶ï¼Œè©²æ–‡ä»¶æè¿°è‘—è‰²å™¨æ†ç¶åŒ…çš„å…§å®¹ã€‚å°‡ä»¥ä¸‹å…§å®¹æ·»åŠ åˆ°å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸­çš„ my_renderer.shaderbundle.json ä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> &quot;SimpleVertex&quot;: &#123;</span><br><span class="line"> &quot;type&quot;: &quot;vertex&quot;,</span><br><span class="line"> &quot;file&quot;: &quot;shaders&#x2F;simple.vert&quot;</span><br><span class="line"> &#125;,</span><br><span class="line"> &quot;SimpleFragment&quot;: &#123;</span><br><span class="line"> &quot;type&quot;: &quot;fragment&quot;,</span><br><span class="line"> &quot;file&quot;: &quot;shaders&#x2F;simple.frag&quot;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‘—è‰²å™¨æ†ç¶åŒ…ä¸­çš„æ¯å€‹æ¢ç›®éƒ½å¯ä»¥å…·æœ‰ä»»æ„çš„åç¨±ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œåç¨±ç‚ºã€ŒSimpleVertexã€å’Œã€ŒSimpleFragmentã€ã€‚é€™äº›åç¨±ç”¨æ–¼åœ¨ä½ çš„æ‡‰ç”¨ç¨‹å¼ä¸­æŸ¥æ‰¾è‘—è‰²å™¨ã€‚</p>
<p>æ¥ä¸‹ä¾†ï¼Œä½¿ç”¨ flutter_gpu_shaders å¥—ä»¶æ§‹å»º shaderbundleã€‚ä½ å¯ä»¥é€šéå•Ÿç”¨å¯¦é©—æ€§çš„ã€ŒåŸç”Ÿè³‡ç”¢ã€åŠŸèƒ½ä¾†æ·»åŠ ä¸€å€‹è‡ªå‹•è§¸ç™¼æ§‹å»ºçš„é‰¤å­ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¾†å•Ÿç”¨åŸç”Ÿè³‡ç”¢ä¸¦å®‰è£ native_assets_cli å¥—ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flutter config --enable-native-assets</span><br><span class="line">flutter pub add native_assets_cli</span><br></pre></td></tr></table></figure>
<p>å•Ÿç”¨åŸç”Ÿè³‡ç”¢åŠŸèƒ½å¾Œï¼Œåœ¨ hook ç›®éŒ„ä¸‹æ·»åŠ ä¸€å€‹ build.dart è…³æœ¬ï¼Œå®ƒå°‡è‡ªå‹•è§¸ç™¼æ§‹å»ºè‘—è‰²å™¨æ†ç¶åŒ…ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; è¤‡è£½åˆ°ï¼šhook&#x2F;build.dart</span><br><span class="line"></span><br><span class="line">import &#39;package:native_assets_cli&#x2F;native_assets_cli.dart&#39;;</span><br><span class="line">import &#39;package:flutter_gpu_shaders&#x2F;build.dart&#39;;</span><br><span class="line"></span><br><span class="line">void main(List&lt;String&gt; args) async &#123;</span><br><span class="line"> await build(args, (config, output) async &#123;</span><br><span class="line"> await buildShaderBundleJson(</span><br><span class="line"> buildConfig: config,</span><br><span class="line"> buildOutput: output,</span><br><span class="line"> manifestFileName: &#39;my_renderer.shaderbundle.json&#39;</span><br><span class="line"> );</span><br><span class="line"> &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€²è¡Œæ­¤æ›´æ”¹å¾Œï¼Œç•¶ Flutter å·¥å…·æ§‹å»ºå°ˆæ¡ˆæ™‚ï¼ŒbuildShaderBundleJson å°‡æ§‹å»ºè‘—è‰²å™¨æ†ç¶åŒ…ï¼Œä¸¦å°‡çµæœè¼¸å‡ºåˆ°å¥—ä»¶æ ¹ç›®éŒ„ä¸‹çš„ build/shaderbundles/my_renderer.shaderbundleã€‚</p>
<p>è‘—è‰²å™¨æ†ç¶åŒ…æ ¼å¼æœ¬èº«èˆ‡ä½ ä½¿ç”¨çš„ Flutter ç‰¹å®šç‰ˆæœ¬ç›¸é—œè¯ï¼Œä¸¦ä¸”å¯èƒ½æœƒéš¨è‘—æ™‚é–“çš„æ¨ç§»è€Œæ›´æ”¹ã€‚å¦‚æœä½ æ­£åœ¨ç·¨å¯«ä¸€å€‹æ§‹å»ºè‘—è‰²å™¨æ†ç¶åŒ…çš„å¥—ä»¶ï¼Œè«‹ä¸è¦å°‡ç”Ÿæˆçš„ .shaderbundle æ–‡ä»¶æª¢æŸ¥åˆ°ä½ çš„æºç¨‹å¼ç¢¼æ¨¹ä¸­ã€‚ç›¸åï¼Œè«‹ä½¿ç”¨æ§‹å»ºé‰¤å­è‡ªå‹•åŒ–æ§‹å»ºéç¨‹ (å¦‚å‰æ‰€è¿°)ã€‚</p>
<p>é€™æ¨£ä¸€ä¾†ï¼Œä½¿ç”¨ä½ çš„å‡½å¼åº«çš„é–‹ç™¼äººå“¡å°‡å§‹çµ‚ä½¿ç”¨æ­£ç¢ºæ ¼å¼æ§‹å»ºæ–°çš„è‘—è‰²å™¨æ†ç¶åŒ…ï¼</p>
<p>ç¾åœ¨ä½ å·²ç¶“è‡ªå‹•æ§‹å»ºäº†è‘—è‰²å™¨æ†ç¶åŒ…ï¼Œè«‹åƒåŒ¯å…¥å¸¸è¦è³‡ç”¢ä¸€æ¨£åŒ¯å…¥å®ƒã€‚åœ¨ä½ çš„å°ˆæ¡ˆçš„ pubspec.yaml ä¸­æ·»åŠ ä¸€å€‹è³‡ç”¢æ¢ç›®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flutter:</span><br><span class="line"> assets:</span><br><span class="line"> - build&#x2F;shaderbundles&#x2F;</span><br></pre></td></tr></table></figure>
<p>å°‡ä¾†ï¼ŒåŸç”Ÿè³‡ç”¢åŠŸèƒ½å°‡å…è¨±æ§‹å»ºé‰¤å­å°‡æ•¸æ“šè³‡ç”¢é™„åŠ åˆ°æ†ç¶åŒ…ä¸­ã€‚ä¸€æ—¦ç™¼ç”Ÿé€™ç¨®æƒ…æ³ï¼Œå°±ä¸å†éœ€è¦æ·»åŠ è³‡ç”¢åŒ¯å…¥è¦å‰‡ä»¥åŠæ§‹å»ºé‰¤å­ã€‚</p>
<p>æ¥ä¸‹ä¾†ï¼Œæ·»åŠ ä¸€äº›ç¨‹å¼ç¢¼åœ¨åŸ·è¡Œæ™‚è¼‰å…¥è‘—è‰²å™¨ã€‚å»ºç«‹ lib/shaders.dart ä¸¦æ·»åŠ ä»¥ä¸‹ç¨‹å¼ç¢¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; è¤‡è£½åˆ°ï¼šlib&#x2F;shaders.dart</span><br><span class="line"></span><br><span class="line">import &#39;package:flutter_gpu&#x2F;gpu.dart&#39; as gpu;</span><br><span class="line"></span><br><span class="line">const String _kShaderBundlePath &#x3D;</span><br><span class="line"> &#39;build&#x2F;shaderbundles&#x2F;my_renderer.shaderbundle&#39;;</span><br><span class="line">&#x2F;&#x2F; æ³¨æ„ï¼šå¦‚æœä½ æ­£åœ¨æ§‹å»ºä¸€å€‹å‡½å¼åº«ï¼Œå‰‡è·¯å¾‘å¿…é ˆä»¥å¥—ä»¶åç¨±ç‚ºå‰ç¶´ã€‚ä¾‹å¦‚ï¼š</span><br><span class="line">&#x2F;&#x2F; &#39;packages&#x2F;my_cool_renderer&#x2F;build&#x2F;shaderbundles&#x2F;my_renderer.shaderbundle&#39;</span><br><span class="line"></span><br><span class="line">gpu.ShaderLibrary? _shaderLibrary;</span><br><span class="line">gpu.ShaderLibrary get shaderLibrary &#123;</span><br><span class="line"> if (_shaderLibrary !&#x3D; null) &#123;</span><br><span class="line"> return _shaderLibrary!;</span><br><span class="line"> &#125;</span><br><span class="line"> _shaderLibrary &#x3D; gpu.ShaderLibrary.fromAsset(_kShaderBundlePath);</span><br><span class="line"> if (_shaderLibrary !&#x3D; null) &#123;</span><br><span class="line"> return _shaderLibrary!;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> throw Exception(&quot;Failed to load shader bundle! ($_kShaderBundlePath)&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€™æ®µç¨‹å¼ç¢¼ç‚º Flutter GPU è‘—è‰²å™¨åŸ·è¡Œæ™‚å‡½å¼åº«å»ºç«‹äº†ä¸€å€‹å–®ä¾‹ç²å–å™¨ã€‚ç¬¬ä¸€æ¬¡è¨ªå• shaderLibrary æ™‚ï¼Œå°‡ä½¿ç”¨ gpu.ShaderLibrary.fromAsset(shader_bundle_path) ä½¿ç”¨æ§‹å»ºçš„è³‡ç”¢æ†ç¶åŒ…åˆå§‹åŒ–åŸ·è¡Œæ™‚è‘—è‰²å™¨å‡½å¼åº«ã€‚</p>
<p>ç¾åœ¨å°ˆæ¡ˆå·²ç¶“è¨­å®šå¥½äº†ï¼Œå¯ä»¥ä½¿ç”¨ Flutter GPU è‘—è‰²å™¨ã€‚æ˜¯æ™‚å€™æ¸²æŸ“é‚£å€‹ä¸‰è§’å½¢äº†ï¼</p>
<h3 id="ç¹ªè£½ä½ çš„ç¬¬ä¸€å€‹ä¸‰è§’å½¢"><a href="#ç¹ªè£½ä½ çš„ç¬¬ä¸€å€‹ä¸‰è§’å½¢" class="headerlink" title="ç¹ªè£½ä½ çš„ç¬¬ä¸€å€‹ä¸‰è§’å½¢"></a>ç¹ªè£½ä½ çš„ç¬¬ä¸€å€‹ä¸‰è§’å½¢</h3><p>åœ¨æœ¬æŒ‡å—ä¸­ï¼Œä½ å°‡å»ºç«‹ä¸€å€‹ RGBA Flutter GPU ç´‹ç†å’Œä¸€å€‹æ¸²æŸ“é€šé“ï¼Œå°‡ç´‹ç†é™„åŠ ç‚ºé¡è‰²è¼¸å‡ºã€‚ç„¶å¾Œï¼Œä½ å°‡ä½¿ç”¨  Canvas.drawImage  åœ¨å°éƒ¨ä»¶ä¸­æ¸²æŸ“ç´‹ç†ã€‚</p>
<p>ç‚ºäº†ç°¡æ½”èµ·è¦‹ï¼Œä½ å°‡æ”¾æ£„æœ€ä½³å¯¦è¸ï¼Œä¸¦åƒ…ç‚ºæ¯å€‹å¹€é‡å»ºæ‰€æœ‰è³‡æºã€‚</p>
<p>åªè¦åœ¨åˆ†é…ç´‹ç†æ™‚å°‡å…¶æ¨™è¨˜ç‚ºã€Œè‘—è‰²å™¨å¯è®€ã€ï¼Œä½ å°±å¯ä»¥å°‡å…¶è½‰æ›ç‚º dart:ui.Imageã€‚è¦å°‡æ¸²æŸ“çµæœé¡¯ç¤ºåœ¨å°éƒ¨ä»¶æ¨¹ä¸­ï¼Œè«‹å°‡å…¶ç¹ªè£½åˆ° dart:ui.Canvas ä¸­ï¼</p>
<p>ä½ å¯ä»¥é€šéä½¿ç”¨è‡ªè¨‚ç¹ªè£½å™¨æ­å»ºå°éƒ¨ä»¶æ¨¹ä¾†è¨ªå• Canvasã€‚å°‡ lib/main.dart çš„å…§å®¹æ›¿æ›ç‚ºä»¥ä¸‹å…§å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import &#39;dart:typed_data&#39;;</span><br><span class="line"></span><br><span class="line">import &#39;package:flutter&#x2F;material.dart&#39;;</span><br><span class="line">import &#39;package:flutter_gpu&#x2F;gpu.dart&#39; as gpu;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æ³¨æ„ï¼šæˆ‘å€‘ä¹‹å‰åœ¨è¨­å®šè‘—è‰²å™¨æ†ç¶åŒ…åŒ¯å…¥æ™‚å‰µå»ºäº†é€™å€‹ï¼</span><br><span class="line">import &#39;shaders.dart&#39;;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line"> runApp(const MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MyApp extends StatelessWidget &#123;</span><br><span class="line"> const MyApp(&#123;super.key&#125;);</span><br><span class="line"></span><br><span class="line"> @override</span><br><span class="line"> Widget build(BuildContext context) &#123;</span><br><span class="line"> return MaterialApp(</span><br><span class="line"> title: &#39;Flutter GPU Triangle Example&#39;,</span><br><span class="line"> home: CustomPaint(</span><br><span class="line"> painter: TrianglePainter(),</span><br><span class="line"> ),</span><br><span class="line"> );</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class TrianglePainter extends CustomPainter &#123;</span><br><span class="line"> @override</span><br><span class="line"> void paint(Canvas canvas, Size size) &#123;</span><br><span class="line"> &#x2F;&#x2F; å˜—è©¦è¨ªå• &#96;gpu.gpuContext&#96;ã€‚</span><br><span class="line"> &#x2F;&#x2F; å¦‚æœ Flutter GPU ä¸å—æ”¯æ´ï¼Œå‰‡å°‡æ‹‹å‡ºç•°å¸¸ã€‚</span><br><span class="line"> print(&#39;Default color format: &#39; +</span><br><span class="line"> gpu.gpuContext.defaultColorFormat.toString());</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> @override</span><br><span class="line"> bool shouldRepaint(covariant CustomPainter oldDelegate) &#x3D;&gt; true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¾åœ¨ï¼ŒåŸ·è¡Œæ‡‰ç”¨ç¨‹å¼ã€‚è«‹æé†’ä¸€ä¸‹ï¼ŒFlutter GPU ç›®å‰éœ€è¦å•Ÿç”¨ Impellerã€‚å› æ­¤ä½ å¿…é ˆä½¿ç”¨ Impeller æ”¯æ´çš„å¹³å°ã€‚åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘å°‡é‡å° macOSã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter run -d macos --enable-impeller</span><br></pre></td></tr></table></figure>
<figure><br><img alt="" src="https://cdn-images-1.medium.com/max/1024/0*lKTtaX2ih6dFpSMQ" /><br></figure>

<p>å¦‚æœ Flutter GPU æ­£åœ¨é‹ä½œï¼Œé‚£éº¼ä½ æ‡‰è©²æœƒçœ‹åˆ°é è¨­é¡è‰²æ ¼å¼è¢«åˆ—å°åˆ°æ§åˆ¶å°ä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter: Default color format: PixelFormat.b8g8r8a8UNormInt</span><br></pre></td></tr></table></figure>
<p>å¦‚æœ Impeller æœªå•Ÿç”¨ï¼Œå‰‡åœ¨å˜—è©¦è¨ªå• gpu.gpuContext æ™‚å°‡æ‹‹å‡ºç•°å¸¸ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Exception: Flutter GPU requires the Impeller rendering backend to be enabled.</span><br><span class="line"></span><br><span class="line">The relevant error-causing widget was:</span><br><span class="line"> CustomPaint</span><br></pre></td></tr></table></figure>
<p>ç‚ºäº†ç°¡å–®èµ·è¦‹ï¼Œä½ åªæœƒå¾é€™è£¡é–‹å§‹ä¿®æ”¹ paint æ–¹æ³•ã€‚</p>
<p>é¦–å…ˆï¼Œå»ºç«‹ä¸€å€‹ Flutter GPU ç´‹ç†ï¼Œæ¸…é™¤å®ƒï¼Œç„¶å¾Œé€šéå°‡å…¶ç¹ªè£½åˆ° Canvas ä¸­ä¾†é¡¯ç¤ºå®ƒã€‚</p>
<p>å»ºç«‹ä¸€å€‹èˆ‡ Canvas å¤§å°ç›¸åŒçš„ç´‹ç†ã€‚å¿…é ˆé¸æ“‡ä¸€å€‹å„²å­˜æ¨¡å¼ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œä½ å°‡ç´‹ç†æ¨™è¨˜ç‚º devicePrivateï¼Œå› ç‚ºä½ åªæœƒä½¿ç”¨å¾è£ç½® (GPU) è¨ªå•ç´‹ç†è¨˜æ†¶é«”çš„æŒ‡ä»¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">final texture &#x3D; gpu.gpuContext.createTexture(gpu.StorageMode.devicePrivate,</span><br><span class="line"> size.width.toInt(), size.height.toInt())!;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœé€šéå¾ä¸»æ©Ÿ (CPU) ä¸Šè¼‰ç´‹ç†çš„æ•¸æ“šä¾†è¦†è“‹ç´‹ç†çš„æ•¸æ“šï¼Œé‚£éº¼è«‹æ”¹ç”¨ StorageMode.hostVisibleã€‚</p>
<p>ç¬¬ä¸‰å€‹å¯ç”¨çš„é¸é …æ˜¯ StorageMode.deviceTransientï¼Œå®ƒé©ç”¨æ–¼ä¸éœ€è¦è¶…éå–®å€‹æ¸²æŸ“é€šé“çš„å£½å‘½çš„é™„ä»¶ (å› æ­¤å®ƒå€‘å¯ä»¥åªå­˜åœ¨æ–¼ç£ç£šè¨˜æ†¶é«”ä¸­ï¼Œä¸¦ä¸”ä¸éœ€è¦ç”± VRAM åˆ†é…æ”¯æ´)ã€‚å¾ˆå¤šæ™‚å€™ï¼Œæ·±åº¦/æ¨¡æ¿ç´‹ç†ç¬¦åˆé€™å€‹æ¨™æº–ã€‚</p>
<p>æ¥ä¸‹ä¾†ï¼Œå®šç¾©ä¸€å€‹ RenderTargetã€‚æ¸²æŸ“ç›®æ¨™åŒ…å«ä¸€å€‹ã€Œé™„ä»¶ã€é›†åˆï¼Œé€™äº›é™„ä»¶æè¿°äº†æ¯å€‹ç‰‡æ®µè¨˜æ†¶é«”ä½ˆå±€åŠå…¶åœ¨æ¸²æŸ“é€šé“é–‹å§‹å’ŒçµæŸæ™‚çš„è¨­ç½®/æ‹†å¸è¡Œç‚ºã€‚</p>
<p>æœ¬è³ªä¸Šï¼Œæ¸²æŸ“ç›®æ¨™æ˜¯æ¸²æŸ“é€šé“çš„å¯é‡è¤‡ä½¿ç”¨æè¿°ç¬¦ã€‚</p>
<p>ç¾åœ¨ï¼Œå®šç¾©ä¸€å€‹ç”±ä¸€å€‹é¡è‰²é™„ä»¶çµ„æˆçš„éå¸¸ç°¡å–®çš„æ¸²æŸ“ç›®æ¨™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">final renderTarget &#x3D; gpu.RenderTarget.singleColor(</span><br><span class="line"> gpu.ColorAttachment(texture: texture, clearValue: Colors.lightBlue));</span><br></pre></td></tr></table></figure>
<p>è«‹æ³¨æ„ï¼Œé€™æ®µç¨‹å¼ç¢¼å°‡ clearValue è¨­ç½®ç‚ºæ·ºè—è‰²ã€‚æ¯å€‹é™„ä»¶éƒ½æœ‰ä¸€å€‹ LoadAction å’Œä¸€å€‹ StoreActionï¼Œå®ƒå€‘åˆ†åˆ¥æ±ºå®šåœ¨é€šé“é–‹å§‹å’ŒçµæŸæ™‚æ‡‰è©²å°é™„ä»¶çš„è‡¨æ™‚ç£ç£šè¨˜æ†¶é«”åŸ·è¡Œä»€éº¼æ“ä½œã€‚</p>
<p>é è¨­æƒ…æ³ä¸‹ï¼Œé¡è‰²é™„ä»¶è¢«è¨­ç½®ç‚º LoadAction.clear (å®ƒå°‡ç£ç£šè¨˜æ†¶é«”åˆå§‹åŒ–ç‚ºçµ¦å®šçš„é¡è‰²)ï¼Œä»¥åŠ StoreAction.store (å®ƒå°‡çµæœä¿å­˜åˆ°é™„åŠ çš„ç´‹ç†çš„ VRAM åˆ†é…ä¸­)ã€‚</p>
<p>ç¾åœ¨ï¼Œå»ºç«‹ä¸€å€‹å‘½ä»¤ç·©è¡å€ï¼Œä½¿ç”¨å‰é¢çš„æ¸²æŸ“ç›®æ¨™å¾ä¸­ç”Ÿæˆä¸€å€‹æ¸²æŸ“é€šé“ï¼Œç„¶å¾Œç«‹å³æäº¤å‘½ä»¤ç·©è¡å€ä»¥æ¸…é™¤ç´‹ç†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">final commandBuffer &#x3D; gpu.gpuContext.createCommandBuffer();</span><br><span class="line">final renderPass &#x3D; commandBuffer.createRenderPass(renderTarget);</span><br><span class="line">&#x2F;&#x2F; ... ç¹ªè£½å‘¼å«å°‡åœ¨é€™è£¡åŸ·è¡Œï¼</span><br><span class="line">commandBuffer.submit();</span><br></pre></td></tr></table></figure>
<p>å‰©ä¸‹çš„å°±æ˜¯å°‡åˆå§‹åŒ–çš„ç´‹ç†ç¹ªè£½åˆ° Canvas ä¸­ï¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">final image &#x3D; texture.asImage();</span><br><span class="line">canvas.drawImage(image, Offset.zero, Paint());</span><br></pre></td></tr></table></figure>
<figure><br><img alt="" src="https://cdn-images-1.medium.com/max/1024/0*ebUDtzQOuIGmdlop" /><br></figure>

<p>ç¾åœ¨ä½ å·²ç¶“å°‡ä¸€å€‹æ¸²æŸ“é€šé“èˆ‡é¡¯ç¤ºåˆ°è¢å¹•ä¸Šçš„çµæœé€£æ¥èµ·ä¾†äº†ï¼Œä½ å°±å¯ä»¥é–‹å§‹ç¹ªè£½ä¸‰è§’å½¢äº†ã€‚ç‚ºæ­¤ï¼Œè«‹è¨­ç½®ä»¥ä¸‹å…§å®¹ï¼š</p>
<ol>
<li>å¾æˆ‘å€‘çš„è‘—è‰²å™¨å»ºç«‹çš„æ¸²æŸ“ç®¡é“ï¼Œä»¥åŠ</li>
<li>ä¸€å€‹åŒ…å«æˆ‘å€‘å¹¾ä½•é«”çš„ GPU å¯è¨ªå•ç·©è¡å€ (ä¸‰å€‹é ‚é»ä½ç½®)ã€‚</li>
</ol>
<p>å»ºç«‹æ¸²æŸ“ç®¡é“å¾ˆå®¹æ˜“ã€‚ä½ åªéœ€è¦å°‡ä½ çš„å‡½å¼åº«ä¸­çš„é ‚é»è‘—è‰²å™¨å’Œç‰‡æ®µè‘—è‰²å™¨çµ„åˆèµ·ä¾†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">final vert &#x3D; shaderLibrary[&#39;SimpleVertex&#39;]!;</span><br><span class="line">final frag &#x3D; shaderLibrary[&#39;SimpleFragment&#39;]!;</span><br><span class="line">final pipeline &#x3D; gpu.gpuContext.createRenderPipeline(vert, frag);</span><br></pre></td></tr></table></figure>
<p>ç¾åœ¨æ˜¯å¹¾ä½•é«”ã€‚å›æƒ³ä¸€ä¸‹ï¼Œã€ŒSimpleVertexã€è‘—è‰²å™¨åªæœ‰ä¸€å€‹è¼¸å…¥ï¼šin vec2 positionã€‚å› æ­¤ï¼Œè¦ç¹ªè£½ä¸‰å€‹é ‚é»ï¼Œä½ éœ€è¦ä¸‰çµ„å…©å€‹æµ®é»æ•¸ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">final vertices &#x3D; Float32List.fromList([</span><br><span class="line"> -0.5, -0.5, &#x2F;&#x2F; ç¬¬ä¸€å€‹é ‚é»</span><br><span class="line"> 0.5, -0.5, &#x2F;&#x2F; ç¬¬äºŒå€‹é ‚é»</span><br><span class="line"> 0.0, 0.5, &#x2F;&#x2F; ç¬¬ä¸‰å€‹é ‚é»</span><br><span class="line">]);</span><br><span class="line">final verticesDeviceBuffer &#x3D; gpu.gpuContext</span><br><span class="line"> .createDeviceBufferWithCopy(ByteData.sublistView(vertices))!;</span><br></pre></td></tr></table></figure>
<p>å‰©ä¸‹çš„å°±æ˜¯ç¶å®šæ–°çš„è³‡æºä¸¦å‘¼å« renderPass.draw() ä¾†å®Œæˆè¨˜éŒ„ç¹ªè£½å‘¼å«ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">renderPass.bindPipeline(pipeline);</span><br><span class="line"></span><br><span class="line">final verticesView &#x3D; gpu.BufferView(</span><br><span class="line"> verticesDeviceBuffer,</span><br><span class="line"> offsetInBytes: 0,</span><br><span class="line"> lengthInBytes: verticesDeviceBuffer.sizeInBytes,</span><br><span class="line">);</span><br><span class="line">renderPass.bindVertexBuffer(verticesView, 3);</span><br><span class="line"></span><br><span class="line">renderPass.draw();</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼ï¼Œä½ ç¾åœ¨æ‡‰è©²æœƒçœ‹åˆ°ä¸€å€‹ç¶ è‰²çš„ä¸‰è§’å½¢ï¼</p>
<figure><br><img alt="" src="https://cdn-images-1.medium.com/max/1024/0*LWnGU5WPT_Eom0wJ" /><br></figure>

<p>å¤ªæ£’äº†ï¼Œä½ ä½¿ç”¨ Flutterã€Dart å’Œä¸€äº› GLSL å¾é ­é–‹å§‹å»ºç«‹äº†ä¸€å€‹æ¸²æŸ“å™¨ï¼</p>
<p>ç„¡è«–é€™æ˜¯å¦æ˜¯ä½ ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¸‰è§’å½¢ï¼Œæˆ–è€…ä½ æ˜¯ä¸€ä½ç¶“é©—è±å¯Œçš„åœ–å½¢å°ˆå®¶ï¼Œæˆ‘éƒ½å¸Œæœ›ä½ ç¹¼çºŒä½¿ç”¨ Flutter GPU ä¸¦æŸ¥çœ‹æˆ‘å€‘æ­£åœ¨é–‹ç™¼çš„å¥—ä»¶ï¼Œä¾‹å¦‚ Flutter Sceneã€‚</p>
<p>å°‡ä¾†ï¼Œæˆ‘å€‘å¸Œæœ›ç™¼å¸ƒå‹å¥½çš„å…¥é–€ç¨‹å¼ç¢¼å¯¦é©—å®¤ï¼Œæ·±å…¥æ¢è¨ Flutter GPU çš„é è¨­è¡Œç‚ºå’Œæœ€ä½³å¯¦è¸ã€‚æˆ‘å€‘é‚„æ²’æœ‰è¨è«–é ‚é»å±¬æ€§ä½ˆå±€ã€ç´‹ç†ç¶å®šã€çµ±ä¸€å’Œå°é½Šè¦æ±‚ã€ç®¡é“æ··åˆã€æ·±åº¦å’Œæ¨¡æ¿é™„ä»¶ã€é€è¦–æ ¡æ­£ç­‰ç­‰ï¼</p>
<p>åœ¨é‚£ä¹‹å‰ï¼Œæˆ‘å»ºè­°ä½ æ¢ç´¢  Flutter Scene  ï¼Œä½œç‚ºå¦‚ä½•ä½¿ç”¨ Flutter GPU çš„ä¸€å€‹æ›´å…¨é¢çš„ç¯„ä¾‹ã€‚</p>
<h3 id="ä½¿ç”¨-Flutter-Scene-é€²è¡Œ-3D-æ¸²æŸ“"><a href="#ä½¿ç”¨-Flutter-Scene-é€²è¡Œ-3D-æ¸²æŸ“" class="headerlink" title="ä½¿ç”¨ Flutter Scene é€²è¡Œ 3D æ¸²æŸ“"></a>ä½¿ç”¨ Flutter Scene é€²è¡Œ 3D æ¸²æŸ“</h3><p>Flutter Scene (å¥—ä»¶ flutter_scene) æ˜¯ä¸€å€‹æ–°çš„ç”± Flutter GPU æ”¯æ´çš„ 3D å ´æ™¯åœ–å¥—ä»¶ï¼Œå®ƒä½¿ Flutter é–‹ç™¼äººå“¡èƒ½å¤ åŒ¯å…¥å‹•ç•« glTF æ¨¡å‹ä¸¦æ¸²æŸ“å¯¦æ™‚ 3D å ´æ™¯ã€‚</p>
<p>æˆ‘å€‘çš„ç›®æ¨™æ˜¯æä¾›ä¸€å€‹å¥—ä»¶ï¼Œè®“ä½¿ç”¨ Flutter å»ºç«‹äº’å‹•å¼ 3D æ‡‰ç”¨ç¨‹å¼å’ŒéŠæˆ²è®Šå¾—å®¹æ˜“ã€‚</p>
<figure><br><img alt="" src="https://cdn-images-1.medium.com/max/1024/0*tC68CbPLef2rJp1e" /><br></figure>

<p>é€™å€‹å¥—ä»¶æœ€åˆæ˜¯ä¸€å€‹ä½¿ç”¨ C++ ç·¨å¯«çš„ 3D æ¸²æŸ“å™¨çš„ dart:ui æ“´å±•ï¼Œä¸¦ç›´æ¥æ§‹å»ºåˆ° Flutter çš„åŸç”ŸåŸ·è¡Œæ™‚ä¸­ï¼Œä½†å®ƒå·²é‡å° Flutter GPU é‡æ–°ç·¨å¯«ï¼Œä¸¦å…·æœ‰æ›´éˆæ´»çš„ä»‹é¢ã€‚</p>
<p>èˆ‡ Flutter GPU API æœ¬èº«ä¸€æ¨£ï¼ŒFlutter Scene ç›®å‰è™•æ–¼æ—©æœŸé è¦½éšæ®µï¼Œéœ€è¦å•Ÿç”¨ Impellerã€‚Flutter Scene é€šå¸¸èˆ‡ Flutter GPU API çš„é‡å¤§è®Šæ›´ä¿æŒåŒæ­¥ï¼Œå› æ­¤å¼·çƒˆå»ºè­°ä½ åœ¨å˜—è©¦ä½¿ç”¨ Flutter Scene æ™‚ä½¿ç”¨  ä¸»è¦é€šé“ã€‚</p>
<p>æ¥ä¸‹ä¾†ï¼Œä½¿ç”¨ Flutter Scene å»ºç«‹ä¸€å€‹æ‡‰ç”¨ç¨‹å¼ï¼</p>
<h3 id="è¨­å®šä¸€å€‹-Flutter-Scene-å°ˆæ¡ˆ"><a href="#è¨­å®šä¸€å€‹-Flutter-Scene-å°ˆæ¡ˆ" class="headerlink" title="è¨­å®šä¸€å€‹ Flutter Scene å°ˆæ¡ˆ"></a>è¨­å®šä¸€å€‹ Flutter Scene å°ˆæ¡ˆ</h3><p>ç”±æ–¼å¼·çƒˆå»ºè­°ä½ é‡å°  ä¸»è¦é€šé“  ä½¿ç”¨ Flutter Sceneï¼Œå› æ­¤è«‹å¾åˆ‡æ›åˆ°ä¸»è¦é€šé“é–‹å§‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flutter channel main</span><br><span class="line">flutter upgrade</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹ä¾†ï¼Œå»ºç«‹ä¸€å€‹æ–°çš„ Flutter å°ˆæ¡ˆã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flutter create my_3d_app</span><br><span class="line">cd my_3d_app</span><br></pre></td></tr></table></figure>
<p>Flutter Scene ä¾è³´æ–¼å¯¦é©—æ€§çš„ã€ŒåŸç”Ÿè³‡ç”¢ã€åŠŸèƒ½ï¼Œä»¥è‡ªå‹•æ§‹å»ºè‘—è‰²å™¨ã€‚ä½ å°‡åœ¨ç¨å¾Œä½¿ç”¨åŸç”Ÿè³‡ç”¢ä¾†è¨­ç½® Flutter Scene çš„ 3D æ¨¡å‹çš„è‡ªå‹•åŒ¯å…¥ã€‚</p>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å•Ÿç”¨åŸç”Ÿè³‡ç”¢ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter config --enable-native-assets</span><br></pre></td></tr></table></figure>
<p>æœ€å¾Œï¼Œå°‡ Flutter Scene ä½œç‚ºå°ˆæ¡ˆä¾è³´é …æ·»åŠ ã€‚</p>
<p>ä½ é‚„éœ€è¦åœ¨èˆ‡ Flutter Scene çš„ API äº’å‹•æ™‚ä½¿ç”¨å¹¾å€‹ vector_math æ§‹é€ ï¼Œå› æ­¤ä¹Ÿæ·»åŠ  vector_math å¥—ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter pub add flutter_scene vector_math</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹ä¾†ï¼ŒåŒ¯å…¥ä¸€å€‹ 3D æ¨¡å‹ï¼</p>
<h3 id="åŒ¯å…¥ä¸€å€‹-3D-æ¨¡å‹"><a href="#åŒ¯å…¥ä¸€å€‹-3D-æ¨¡å‹" class="headerlink" title="åŒ¯å…¥ä¸€å€‹ 3D æ¨¡å‹"></a>åŒ¯å…¥ä¸€å€‹ 3D æ¨¡å‹</h3><p>é¦–å…ˆï¼Œä½ éœ€è¦ä¸€å€‹è¦æ¸²æŸ“çš„ 3D æ¨¡å‹ã€‚åœ¨æœ¬æŒ‡å—ä¸­ï¼Œä½ å°‡ä½¿ç”¨ä¸€å€‹é€šç”¨çš„  glTF  æ¨£æœ¬è³‡ç”¢ï¼š  DamagedHelmet.glbã€‚ä»¥ä¸‹æ˜¯å®ƒçš„æ¨£å­ã€‚</p>
<figure><br><img alt="" src="https://cdn-images-1.medium.com/max/912/0*vVWRLxJ348tCxv7T" /><br><figcaption>åŸå§‹çš„ Damaged Helmet æ¨¡å‹æ˜¯ç”± theblueturtle_ åœ¨ 2016 å¹´å‰µå»ºçš„ (è¨±å¯è­‰ï¼š  CC BY-NC 4.0 åœ‹éš›è¨±å¯è­‰)ã€‚è½‰æ›å¾Œçš„ glTF ç‰ˆæœ¬æ˜¯ç”± ctxwing åœ¨ 2018 å¹´å‰µå»ºçš„ (è¨±å¯è­‰ï¼š  CC BY 4.0 åœ‹éš›è¨±å¯è­‰)</figcaption><br></figure>

<p>ä½ å¯ä»¥å¾  GitHub ä¸Šè¨—ç®¡çš„ glTF æ¨£æœ¬è³‡ç”¢åº«  ä¸­ç²å–å®ƒã€‚å°‡ DamagedHelmet.glb æ”¾ç½®åœ¨ä½ çš„å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -O https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;KhronosGroup&#x2F;glTF-Sample-Models&#x2F;main&#x2F;2.0&#x2F;DamagedHelmet&#x2F;glTF-Binary&#x2F;DamagedHelmet.glb</span><br></pre></td></tr></table></figure>
<p>èˆ‡å¤§å¤šæ•¸å¯¦æ™‚ 3D æ¸²æŸ“å™¨ä¸€æ¨£ï¼ŒFlutter Scene åœ¨å…§éƒ¨ä½¿ç”¨å°ˆç”¨çš„ 3D æ¨¡å‹æ ¼å¼ã€‚ä½ å¯ä»¥ä½¿ç”¨ Flutter Scene çš„é›¢ç·šåŒ¯å…¥å·¥å…·å°‡æ¨™æº– glTF äºŒé€²åˆ¶æ–‡ä»¶ (.glb æ–‡ä»¶) è½‰æ›ç‚ºé€™ç¨®æ ¼å¼ã€‚</p>
<p>å°‡ flutter_scene_importer å¥—ä»¶ä½œç‚ºå¸¸è¦ä¾è³´é …æ·»åŠ åˆ°å°ˆæ¡ˆä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter pub add flutter_scene_importer</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ é€™å€‹å¥—ä»¶å¾Œï¼Œå¯ä»¥ä½¿ç”¨ dart run æ‰‹å‹•å‘¼å«åŒ¯å…¥å™¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dart --enable-experiment&#x3D;native-assets \</span><br><span class="line"> run flutter_scene_importer:import \</span><br><span class="line"> --input &quot;path&#x2F;to&#x2F;my&#x2F;source_model.glb&quot; \</span><br><span class="line"> --output &quot;path&#x2F;to&#x2F;my&#x2F;imported_model.model&quot;</span><br></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥é€šéä½¿ç”¨åŸç”Ÿè³‡ç”¢æ§‹å»ºé‰¤å­ä¾†è‡ªå‹•åŸ·è¡ŒåŒ¯å…¥å™¨ã€‚ç‚ºæ­¤ï¼Œé¦–å…ˆå°‡ native_assets_cli ä½œç‚ºå¸¸è¦å°ˆæ¡ˆä¾è³´é …å®‰è£ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter pub add native_assets_cli</span><br></pre></td></tr></table></figure>
<p>ç¾åœ¨ä½ å¯ä»¥ç·¨å¯«æ§‹å»ºé‰¤å­äº†ã€‚ä½¿ç”¨ä»¥ä¸‹å…§å®¹å»ºç«‹ hook/build.dartã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import &#39;package:native_assets_cli&#x2F;native_assets_cli.dart&#39;;</span><br><span class="line">import &#39;package:flutter_scene_importer&#x2F;build_hooks.dart&#39;;</span><br><span class="line"></span><br><span class="line">void main(List&lt;String&gt; args) &#123;</span><br><span class="line"> build(args, (config, output) async &#123;</span><br><span class="line"> buildModels(buildConfig: config, inputFilePaths: [</span><br><span class="line"> &#39;DamagedHelmet.glb&#39;,</span><br><span class="line"> ]);</span><br><span class="line"> &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ flutter_scene_importer ä¸­çš„ buildModels å·¥å…·ï¼Œæä¾›è¦æ§‹å»ºçš„æ¨¡å‹åˆ—è¡¨ã€‚é€™äº›è·¯å¾‘ç›¸å°æ–¼å°ˆæ¡ˆçš„æ§‹å»ºæ ¹ç›®éŒ„ã€‚</p>
<p>ç•¶ Flutter å·¥å…·æ§‹å»ºå°ˆæ¡ˆæ™‚ï¼ŒbuildModels ç¾åœ¨å°‡æ§‹å»ºè‘—è‰²å™¨æ†ç¶åŒ…ï¼Œä¸¦å°‡çµæœè¼¸å‡ºåˆ°å¥—ä»¶æ ¹ç›®éŒ„ä¸‹çš„ build/models/DamagedModel.modelã€‚</p>
<p>åŒ¯å…¥çš„æ¨¡å‹æ ¼å¼æœ¬èº«èˆ‡ä½ ä½¿ç”¨çš„ Flutter Scene ç‰¹å®šç‰ˆæœ¬ç›¸é—œè¯ï¼Œä¸¦ä¸”æœƒéš¨è‘—æ™‚é–“çš„æ¨ç§»è€Œæ›´æ”¹ã€‚åœ¨ç·¨å¯«ä½¿ç”¨ Flutter Scene çš„æ‡‰ç”¨ç¨‹å¼æˆ–å‡½å¼åº«æ™‚ï¼Œè«‹ä¸è¦å°‡ç”Ÿæˆçš„ .model æ–‡ä»¶æª¢æŸ¥åˆ°ä½ çš„æºç¨‹å¼ç¢¼æ¨¹ä¸­ã€‚ç›¸åï¼Œè«‹ä½¿ç”¨æ§‹å»ºé‰¤å­å¾ä½ çš„æºæ¨¡å‹ç”Ÿæˆå®ƒå€‘ (å¦‚å‰æ‰€è¿°)ã€‚</p>
<p>é€™æ¨£ä¸€ä¾†ï¼Œéš¨è‘—ä½ å‡ç´š Flutter Sceneï¼Œä½ å°‡å§‹çµ‚ä½¿ç”¨æ­£ç¢ºæ ¼å¼æ§‹å»ºæ–°çš„ .model æ–‡ä»¶ï¼</p>
<p>æ¥ä¸‹ä¾†ï¼ŒåƒåŒ¯å…¥å¸¸è¦è³‡ç”¢ä¸€æ¨£åŒ¯å…¥æ¨¡å‹ã€‚åœ¨ä½ çš„å°ˆæ¡ˆçš„ pubspec.yaml ä¸­æ·»åŠ ä¸€å€‹è³‡ç”¢æ¢ç›®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flutter:</span><br><span class="line"> assets:</span><br><span class="line"> - build&#x2F;models&#x2F;</span><br></pre></td></tr></table></figure>
<p>å°‡ä¾†ï¼ŒåŸç”Ÿè³‡ç”¢åŠŸèƒ½å°‡å…è¨±æ§‹å»ºé‰¤å­å°‡æ•¸æ“šè³‡ç”¢é™„åŠ åˆ°æ†ç¶åŒ…ä¸­ã€‚ä¸€æ—¦ç™¼ç”Ÿé€™ç¨®æƒ…æ³ï¼Œå°±ä¸å†éœ€è¦æ·»åŠ è³‡ç”¢åŒ¯å…¥è¦å‰‡ä»¥åŠæ§‹å»ºé‰¤å­ã€‚</p>
<h3 id="æ¸²æŸ“ä¸€å€‹-3D-å ´æ™¯"><a href="#æ¸²æŸ“ä¸€å€‹-3D-å ´æ™¯" class="headerlink" title="æ¸²æŸ“ä¸€å€‹ 3D å ´æ™¯"></a>æ¸²æŸ“ä¸€å€‹ 3D å ´æ™¯</h3><p>ç¾åœ¨æ˜¯æ‡‰ç”¨ç¨‹å¼çš„ç¨‹å¼ç¢¼ã€‚</p>
<p>é¦–å…ˆï¼Œå»ºç«‹ä¸€å€‹æœ‰ç‹€æ…‹çš„å°éƒ¨ä»¶ä¾†è·¨å¹€æŒä¹…åŒ–å ´æ™¯ã€‚</p>
<p>ä½ å°‡æ ¹æ“šæ™‚é–“é€²è¡Œå‹•ç•«è™•ç†ï¼Œå› æ­¤å°‡ SingleTickerProviderStateMixin æ·»åŠ åˆ°ç‹€æ…‹ä»¥åŠ elapsedSeconds æˆå“¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import &#39;dart:math&#39;;</span><br><span class="line"></span><br><span class="line">import &#39;package:flutter&#x2F;material.dart&#39;;</span><br><span class="line">import &#39;package:flutter&#x2F;scheduler.dart&#39;;</span><br><span class="line">import &#39;package:flutter_scene&#x2F;camera.dart&#39;;</span><br><span class="line">import &#39;package:flutter_scene&#x2F;node.dart&#39;;</span><br><span class="line">import &#39;package:flutter_scene&#x2F;scene.dart&#39;;</span><br><span class="line">import &#39;package:vector_math&#x2F;vector_math.dart&#39;;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line"> runApp(const MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MyApp extends StatefulWidget&#123;</span><br><span class="line"> const MyApp(&#123;super.key&#125;);</span><br><span class="line"></span><br><span class="line"> @override</span><br><span class="line"> MyAppState createState() &#x3D;&gt; MyAppState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MyAppState extends State&lt;MyApp&gt; with SingleTickerProviderStateMixin &#123;</span><br><span class="line"> double elapsedSeconds &#x3D; 0;</span><br><span class="line"> Scene scene &#x3D; Scene();</span><br><span class="line"></span><br><span class="line"> @override</span><br><span class="line"> Widget build(BuildContext context) &#123;</span><br><span class="line"> return MaterialApp(</span><br><span class="line"> title: &#39;My 3D app&#39;,</span><br><span class="line"> home: Placeholder(),</span><br><span class="line"> );</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼ä½œç‚ºç…™éœ§æ¸¬è©¦ï¼Œä»¥ç¢ºä¿æ²’æœ‰éŒ¯èª¤ã€‚è«‹è¨˜ä½å•Ÿç”¨ Impellerï¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter run -d macos --enable-impeller</span><br></pre></td></tr></table></figure>
<figure><br><img alt="" src="https://cdn-images-1.medium.com/max/912/0*74qs6ytcTjyVHwML" /><br></figure>

<p>åœ¨ç¹¼çºŒä¹‹å‰ï¼Œè«‹ç‚ºå‹•ç•«è¨­ç½®è¨ˆæ™‚å™¨ã€‚è¦†è“‹ MyAppState ä¸­çš„ initState ä»¥å‘¼å« createTickerã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@override</span><br><span class="line">void initState() &#123;</span><br><span class="line">createTicker((elapsed) &#123;</span><br><span class="line">setState(() &#123;</span><br><span class="line">elapsedSeconds &#x3D; elapsed.inMilliseconds.toDouble() &#x2F; 1000;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;).start();</span><br><span class="line"></span><br><span class="line">super.initState();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åªè¦å°éƒ¨ä»¶å¯è¦‹ï¼Œè¨ˆæ™‚å™¨å›å‘¼å°±æœƒç‚ºæ¯ä¸€å¹€å‘¼å«ã€‚å‘¼å« setState å°‡è§¸ç™¼é€™å€‹å°éƒ¨ä»¶åœ¨æ¯ä¸€å¹€é‡æ–°æ§‹å»ºã€‚</p>
<p>æ¥ä¸‹ä¾†ï¼Œè¼‰å…¥ä½ ä¹‹å‰æ”¾ç½®åœ¨å°ˆæ¡ˆä¸­çš„ 3D æ¨¡å‹ï¼Œä¸¦å°‡å…¶æ·»åŠ åˆ°å ´æ™¯ä¸­ã€‚</p>
<p>ä½¿ç”¨ Node.fromAsset å¾è³‡ç”¢æ†ç¶åŒ…ä¸­è¼‰å…¥æ¨¡å‹ã€‚å°‡ä»¥ä¸‹ç¨‹å¼ç¢¼æ”¾åœ¨ initState ä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Node.fromAsset(&#39;build&#x2F;models&#x2F;DamagedHelmet.model&#39;).then((model) &#123;</span><br><span class="line">model.name &#x3D; &#39;Helmet&#39;;</span><br><span class="line">scene.add(model);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Node.fromAsset ç•°æ­¥åœ°å¾è³‡ç”¢æ†ç¶åŒ…ä¸­ååºåˆ—åŒ–æ¨¡å‹ï¼Œä¸¦åœ¨æ¨¡å‹æº–å‚™å¥½æ·»åŠ åˆ°å ´æ™¯ä¸­æ™‚è§£æè¿”å›çš„ Future<Node>ã€‚</p>
<p>ç¾åœ¨ MyAppState.initState æ‡‰è©²å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@override</span><br><span class="line">void initState() &#123;</span><br><span class="line">createTicker((elapsed) &#123;</span><br><span class="line">setState(() &#123;</span><br><span class="line">elapsedSeconds &#x3D; elapsed.inMilliseconds.toDouble() &#x2F; 1000;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;).start();</span><br><span class="line"></span><br><span class="line">Node.fromAsset(&#39;build&#x2F;models&#x2F;DamagedHelmet.model&#39;).then((model) &#123;</span><br><span class="line">model.name &#x3D; &#39;Helmet&#39;;</span><br><span class="line">scene.add(model);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">super.initState();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œä½ ä»ç„¶æ²’æœ‰å¯¦éš›æ¸²æŸ“ 3D å ´æ™¯ï¼ç‚ºæ­¤ï¼Œè«‹ä½¿ç”¨ Scene.renderï¼Œå®ƒæ¥å—ä¸€å€‹ UI Canvasã€ä¸€å€‹ Flutter Scene ç›¸æ©Ÿå’Œä¸€å€‹å¤§å°ã€‚</p>
<p>è¨ªå• Canvas çš„ä¸€ç¨®æ–¹æ³•æ˜¯å»ºç«‹ä¸€å€‹è‡ªè¨‚ç¹ªè£½å™¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class ScenePainter extends CustomPainter &#123;</span><br><span class="line"> ScenePainter(&#123;required this.scene, required this.camera&#125;);</span><br><span class="line"> Scene scene;</span><br><span class="line"> Camera camera;</span><br><span class="line"></span><br><span class="line"> @override</span><br><span class="line"> void paint(Canvas canvas, Size size) &#123;</span><br><span class="line"> scene.render(camera, canvas, viewport: Offset.zero &amp; size);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> @override</span><br><span class="line"> bool shouldRepaint(covariant CustomPainter oldDelegate) &#x3D;&gt; true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸è¦å¿˜è¨˜å°‡ shouldRepaint è¦†è“‹è¨­ç½®ç‚ºè¿”å› trueï¼Œé€™æ¨£è‡ªè¨‚ç¹ªè£½å™¨å°±æœƒåœ¨æ¯æ¬¡é‡å»ºæ™‚é‡æ–°ç¹ªè£½ã€‚</p>
<p>æœ€å¾Œï¼Œå°‡è‡ªè¨‚ç¹ªè£½å™¨æ·»åŠ åˆ°æºç¨‹å¼ç¢¼æ¨¹ä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@override</span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">final painter &#x3D; ScenePainter(</span><br><span class="line">scene: scene,</span><br><span class="line">camera: PerspectiveCamera(</span><br><span class="line">position: Vector3(sin(elapsedSeconds) * 3, 2, cos(elapsedSeconds) * 3),</span><br><span class="line">target: Vector3(0, 0, 0),</span><br><span class="line">),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">return MaterialApp(</span><br><span class="line">title: &#39;My 3D app&#39;,</span><br><span class="line">home: CustomPaint(painter: painter),</span><br><span class="line">);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€™æ®µç¨‹å¼ç¢¼æŒ‡ç¤ºç›¸æ©Ÿä»¥é€£çºŒçš„åœ“åœˆç§»å‹•ï¼Œä½†å§‹çµ‚é¢å‘åŸé»ã€‚</p>
<p>æœ€å¾Œï¼Œå•Ÿå‹•æ‡‰ç”¨ç¨‹å¼ï¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter run -d macos --enable-impeller</span><br></pre></td></tr></table></figure>
<figure><br><img alt="" src="https://cdn-images-1.medium.com/max/796/0*_-OFc0vhBHAhrPrO" /><br></figure>

<p>ä»¥ä¸‹æ˜¯æˆ‘å€‘æ•´ç†çš„å®Œæ•´æºç¨‹å¼ç¢¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">import &#39;dart:math&#39;;</span><br><span class="line"></span><br><span class="line">import &#39;package:flutter&#x2F;material.dart&#39;;</span><br><span class="line">import &#39;package:flutter_scene&#x2F;camera.dart&#39;;</span><br><span class="line">import &#39;package:flutter_scene&#x2F;node.dart&#39;;</span><br><span class="line">import &#39;package:flutter_scene&#x2F;scene.dart&#39;;</span><br><span class="line">import &#39;package:vector_math&#x2F;vector_math.dart&#39;;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line"> runApp(const MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MyApp extends StatefulWidget &#123;</span><br><span class="line"> const MyApp(&#123;super.key&#125;);</span><br><span class="line"></span><br><span class="line"> @override</span><br><span class="line"> MyAppState createState() &#x3D;&gt; MyAppState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MyAppState extends State&lt;MyApp&gt; with SingleTickerProviderStateMixin &#123;</span><br><span class="line"> double elapsedSeconds &#x3D; 0;</span><br><span class="line"> Scene scene &#x3D; Scene();</span><br><span class="line"></span><br><span class="line"> @override</span><br><span class="line"> void initState() &#123;</span><br><span class="line"> createTicker((elapsed) &#123;</span><br><span class="line"> setState(() &#123;</span><br><span class="line"> elapsedSeconds &#x3D; elapsed.inMilliseconds.toDouble() &#x2F; 1000;</span><br><span class="line"> &#125;);</span><br><span class="line"> &#125;).start();</span><br><span class="line"></span><br><span class="line"> Node.fromAsset(&#39;build&#x2F;models&#x2F;DamagedHelmet.model&#39;).then((model) &#123;</span><br><span class="line"> model.name &#x3D; &#39;Helmet&#39;;</span><br><span class="line"> scene.add(model);</span><br><span class="line"> &#125;);</span><br><span class="line"></span><br><span class="line"> super.initState();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> @override</span><br><span class="line"> Widget build(BuildContext context) &#123;</span><br><span class="line"> final painter &#x3D; ScenePainter(</span><br><span class="line"> scene: scene,</span><br><span class="line"> camera: PerspectiveCamera(</span><br><span class="line"> position: Vector3(sin(elapsedSeconds) * 3, 2, cos(elapsedSeconds) * 3),</span><br><span class="line"> target: Vector3(0, 0, 0),</span><br><span class="line"> ),</span><br><span class="line"> );</span><br><span class="line"></span><br><span class="line"> return MaterialApp(</span><br><span class="line"> title: &#39;My 3D app&#39;,</span><br><span class="line"> home: CustomPaint(painter: painter),</span><br><span class="line"> );</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class ScenePainter extends CustomPainter &#123;</span><br><span class="line"> ScenePainter(&#123;required this.scene, required this.camera&#125;);</span><br><span class="line"> Scene scene;</span><br><span class="line"> Camera camera;</span><br><span class="line"></span><br><span class="line"> @override</span><br><span class="line"> void paint(Canvas canvas, Size size) &#123;</span><br><span class="line"> scene.render(camera, canvas, viewport: Offset.zero &amp; size);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> @override</span><br><span class="line"> bool shouldRepaint(covariant CustomPainter oldDelegate) &#x3D;&gt; true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Flutter-å…‰æ˜çš„æœªä¾†"><a href="#Flutter-å…‰æ˜çš„æœªä¾†" class="headerlink" title="Flutter å…‰æ˜çš„æœªä¾†"></a>Flutter å…‰æ˜çš„æœªä¾†</h3><p>å¦‚æœä½ èƒ½å¤ æˆåŠŸåœ°éµå¾ªå…¶ä¸­ä¸€å€‹æŒ‡å—ä¸¦è®“å®ƒé‹è¡Œèµ·ä¾†ï¼šå“‡ï¼Œæ­å–œï¼</p>
<p>Flutter GPU å’Œ Flutter Scene éƒ½éå¸¸å¹´è¼•ï¼Œå¹³å°æ”¯æ´æœ‰é™ã€‚ä½†æˆ‘èªç‚ºæœ‰ä¸€å¤©æˆ‘å€‘æœƒæ‡·å¿µé€™äº›ä¸èµ·çœ¼çš„é–‹ç«¯ã€‚</p>
<p>æ†‘è—‰ Impeller çš„åŠªåŠ›ï¼ŒFlutter åœ˜éšŠå®Œå…¨æ“æœ‰äº†æ¸²æŸ“å †æ£§ï¼Œå› ç‚ºæˆ‘å€‘éœ€è¦å°‡æ¸²æŸ“å™¨å°ˆé–€ç”¨æ–¼ Flutter çš„ç”¨ä¾‹ã€‚ç¾åœ¨ï¼Œæˆ‘å€‘æ­£åœ¨é–‹å•Ÿ Flutter æ­·å²çš„æ–°ç¯‡ç« ã€‚ä¸€å€‹ç”±ä½ å…±åŒæ§åˆ¶æ¸²æŸ“çš„ç¯‡ç« ï¼</p>
<p>Flutter Scene æœ€åˆæ˜¯ Impeller ä¸­çš„ä¸€å€‹ C++ çµ„ä»¶ï¼Œèˆ‡ 2D Canvas æ¸²æŸ“å™¨ä»¥åŠä¸€å€‹ç²¾ç°¡çš„ dart:ui æ“´å±•ä¸€èµ·ã€‚åœ¨æˆ‘æ§‹å»ºå®ƒæ™‚ï¼Œæˆ‘å·²ç¶“æ„è­˜åˆ° Flutter å¼•æ“ä¸æœƒæ˜¯å®ƒçš„æœ€çµ‚ç›®çš„åœ°ã€‚</p>
<p>3D æ¸²æŸ“å™¨çš„æ¶æ§‹æ±ºç­–çš„æµ·æ´‹æ˜¯æµ©ç€šç„¡å çš„ï¼Œæ²’æœ‰å“ªä¸€ç¨®é€šç”¨çš„ 3D æ¸²æŸ“å™¨èƒ½å¤ å¾ˆå¥½åœ°è§£æ±ºæ‰€æœ‰ç”¨ä¾‹ã€‚ã€Œé€šç”¨ã€å’Œã€Œé«˜æ€§èƒ½ã€é€šå¸¸æ˜¯ç›¸äº’çŸ›ç›¾çš„ç›®æ¨™ã€‚</p>
<p>å……å…¶é‡ï¼Œåœ¨æ‰€æœ‰æ–¹é¢éƒ½é”åˆ°è¶³å¤ çš„æ°´æº–ï¼Œå¹¾ä¹ç­‰æ–¼åœ¨æ‰€æœ‰æ–¹é¢éƒ½ç„¡æ³•é”åˆ°å“è¶Šã€‚</p>
<p>åœ¨æ¸²æŸ“æ€§èƒ½çš„ä¸–ç•Œè£¡ï¼Œæƒ…æ³æ›´åŠ ç³Ÿç³•ã€‚å°ˆé–€é‡å°æŸä¸€å€‹ç”¨ä¾‹ï¼Œå¾€å¾€æ„å‘³è‘—é™ä½å¦ä¸€å€‹ç”¨ä¾‹çš„æ€§èƒ½ã€‚</p>
<p>ç°¡è€Œè¨€ä¹‹ï¼Œä¸å¯èƒ½ç™¼å¸ƒä¸€å€‹é€šç”¨çš„ 3D æ¸²æŸ“å™¨ï¼Œèƒ½å¤ ç‚ºæ‰€æœ‰äººè§£æ±ºæ‰€æœ‰ç”¨ä¾‹ã€‚ä½†æ˜¯ï¼Œé€šéå…¬é–‹æ§‹å»ºè‡ªå·±çš„è§£æ±ºæ–¹æ¡ˆæ‰€éœ€çš„ä½éš API (Flutter GPU)ï¼Œä»¥åŠåœ¨å®ƒçš„åŸºç¤ä¸Šæ§‹å»ºä¸€å€‹æœ‰ç”¨çš„é€šç”¨ 3D æ¸²æŸ“å™¨ï¼Œé€™å€‹æ¸²æŸ“å™¨æ˜“æ–¼ Flutter ç¤¾å€æª¢æŸ¥å’Œä¿®æ”¹ (Flutter Scene)ï¼Œæˆ‘å€‘æ­£åœ¨ç‚º Flutter é–‹ç™¼äººå“¡å‰µé€ ä¸€å€‹ç©ºé–“ï¼Œè®“ä»–å€‘å¯ä»¥äº«å—ä½é¢¨éšªçš„éæ™‚é¢¨éšªå’Œé«˜å›å ±ã€‚</p>
<figure><br><img alt="" src="https://cdn-images-1.medium.com/max/506/1*jfeUgpEP9AgAz94yVxVW1g.gif" /><br></figure>

<p>æˆ‘è¿«ä¸åŠå¾…åœ°æƒ³çœ‹çœ‹ä½ æœƒç”¨é€™äº›æ–°åŠŸèƒ½åšäº›ä»€éº¼ã€‚æ•¬è«‹æœŸå¾… Flutter Scene çš„æœªä¾†ç‰ˆæœ¬ã€‚æœ‰å¾ˆå¤šæ±è¥¿æ­£åœ¨è·¯ä¸Šã€‚</p>
<p>åŒæ™‚ï¼Œæˆ‘è¦å›åˆ°å·¥ä½œå´—ä½äº†ã€‚</p>
<p>å¾ˆå¿«å°±æœƒè¦‹åˆ°ä½ ã€‚:)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.rainvisitor.me/archives/8ddf18fb.html" data-id="cm1kbl91d0000fx17bgtwb2at" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flutter/" rel="tag">Flutter</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GPU/" rel="tag">GPU</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-flutter-3-24-news" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/430aae7c.html" class="article-date">
  <time datetime="2024-09-27T08:40:30.000Z" itemprop="datePublished">2024-09-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/430aae7c.html">flutter-3-24-news</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>è§£é– Flutter GPUã€å¤šè¦–åœ–åµŒå…¥ç­‰ç­‰</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/1*EA-cAY6uwkYqYb725vnCIw.png" />
<figcaption>Flutter 3.24 on a blue background</figcaption>
</figure>


<p>æ­¡è¿ä¾†åˆ°æœ€æ–°çš„ Flutter æ›´æ–°ï¼Flutter 3.24 å……æ»¿äº†ä»¤äººèˆˆå¥®çš„æ–°åŠŸèƒ½å’Œå¢å¼·åŠŸèƒ½ï¼Œå¯ä»¥æå‡æ‚¨çš„æ‡‰ç”¨ç¨‹å¼é–‹ç™¼é«”é©—ã€‚æ­¤ç‰ˆæœ¬é‡é»ä»‹ç´¹äº† Flutter GPU çš„é è¦½ï¼Œå®ƒå¯ä»¥åœ¨ Flutter ä¸­ç›´æ¥å•Ÿç”¨é€²éšåœ–å½¢å’Œ 3D å ´æ™¯ã€‚Web æ‡‰ç”¨ç¨‹å¼ç¾åœ¨å¯ä»¥åµŒå…¥å¤šå€‹ Flutter è¦–åœ–ï¼Œå¢å¼·æ‡‰ç”¨ç¨‹å¼çš„å¤šåŠŸèƒ½æ€§ã€‚æœ€å¾Œï¼Œæˆ‘å€‘æ·»åŠ äº†å½±ç‰‡å»£å‘Šè®Šç¾æ”¯æ´ï¼Œä»¥å¹«åŠ©æ‚¨æœ€å¤§é™åº¦åœ°æé«˜æ”¶å…¥ã€‚</p>
<p>åœ¨éå»çš„å¹¾å€‹æœˆè£¡ï¼ŒFlutter ç¤¾å€ä¸€ç›´éå¸¸æ´»èºï¼Œæ“æœ‰ 852 å€‹æ¡†æ¶æäº¤å’Œ 615 å€‹å¼•æ“æäº¤ã€‚æˆ‘å€‘å¾ˆèˆˆå¥®åœ°æ­¡è¿ 49 ä½æ–°è²¢ç»è€…ï¼Œä»–å€‘å¹«åŠ©å¯¦ç¾äº†æ­¤ç‰ˆæœ¬ã€‚æ‚¨çš„å¥‰ç»å’Œç†±æƒ…æ¨å‹•è‘— Flutter çš„å‰é€²ã€‚</p>
<p>å› æ­¤ï¼Œæ·±å…¥äº†è§£ Flutter ç¤¾å€å¸¶çµ¦é€™å€‹æœ€æ–°ç‰ˆæœ¬çš„æœ€æ–°åŠŸèƒ½å’Œå¢å¼·åŠŸèƒ½å§ï¼</p>
<p>Flutter æ¶æ§‹<br>æ–°çš„ Sliver</p>
<p>æ­¤ç‰ˆæœ¬æ·»åŠ äº†æ–°çš„ Sliverï¼Œå¯ä»¥å°‡å®ƒå€‘çµ„åˆåœ¨ä¸€èµ·ä»¥å¯¦ç¾å‹•æ…‹æ‡‰ç”¨ç¨‹å¼åˆ—è¡Œç‚ºï¼š</p>
<p>PinnedHeaderSliver</p>
<p>SliverResizingHeader</p>
<p>æ‚¨å¯ä»¥ä½¿ç”¨é€™äº›æ–°çš„ Sliver ä¾†è£½ä½œæµ®å‹•ã€ä¿æŒå›ºå®šæˆ–åœ¨ä½¿ç”¨è€…æ²å‹•æ™‚èª¿æ•´å¤§å°çš„æ¨™é¡Œã€‚é€™äº›æ–°çš„ Sliver é¡ä¼¼æ–¼ç¾æœ‰çš„ SliverPersistentHeader å’Œ SliverAppBar Sliverï¼Œä½†å…·æœ‰æ›´ç°¡å–®çš„ APIï¼Œå¯ä»¥çµ„åˆåœ¨ä¸€èµ·ä»¥å¯¦ç¾æ›´å¤§çš„æ•ˆæœã€‚</p>
<p>é€™äº›æ–°çš„ Sliver é™„å¸¶äº†æ–°çš„æ¨£æœ¬ç¨‹å¼ç¢¼ã€‚ä¾‹å¦‚ï¼ŒPinnedHeaderSliver çš„ API æ–‡ä»¶æœ‰ä¸€å€‹ç¯„ä¾‹ï¼Œå¯ä»¥é‡æ–°å»ºç«‹ iOS è¨­å®šæ‡‰ç”¨ç¨‹å¼æ‡‰ç”¨ç¨‹å¼åˆ—çš„æ•ˆæœï¼š</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/0*bdcb6KGonosfPZ6m" />
</figure>

<p>Cupertino åº«ä¸­çš„æ›´æ–°</p>
<p>åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œæˆ‘å€‘æ”¹é€²äº† CupertinoActionSheet çš„ä¿çœŸåº¦ã€‚åœ¨å‹•ä½œè¡¨å–®çš„æŒ‰éˆ•ä¸Šæ»‘å‹•æ‰‹æŒ‡ç¾åœ¨å¯ä»¥æä¾›è§¸è¦ºå›é¥‹ã€‚æŒ‰éˆ•çš„å­—é«”å¤§å°å’Œç²—ç´°ç¾åœ¨èˆ‡åŸç”Ÿå°æ‡‰ç‰©ç›¸ç¬¦ã€‚</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/655/0*_o_9V0RlITOZdU4v" />
</figure>


<p>æˆ‘å€‘é‚„ç‚º CupertinoButton æ·»åŠ äº†æ–°çš„ç„¦é»å±¬æ€§ï¼Œç¾åœ¨æ‚¨å¯ä»¥è‡ªè¨‚å·²åœç”¨çš„ CupertinoTextField çš„é¡è‰²ã€‚</p>
<p>Cupertino åº«çš„æ›´æ–°æ­£åœ¨é€²è¡Œä¸­ï¼Œè«‹æœŸå¾…æœªä¾†ç‰ˆæœ¬ä¸­çš„æ›´å¤šæ›´æ–°ï¼</p>
<p>TreeView</p>
<p>two_dimensional_scrollables å¥—ä»¶ç™¼ä½ˆäº† TreeView å°éƒ¨ä»¶ï¼Œä»¥åŠå¹¾å€‹ç”¨æ–¼å»ºç«‹é«˜æ€§èƒ½æ²å‹•æ¨¹çš„é…å¥—é¡åˆ¥ï¼Œé€™äº›æ¨¹å¯ä»¥åœ¨æ¨¹å¢é•·æ™‚å‘æ‰€æœ‰æ–¹å‘æ²å‹•ã€‚å¥—ä»¶ä¸­åŒ…å«çš„æ¨£æœ¬æ‡‰ç”¨ç¨‹å¼ä¹Ÿå·²æ›´æ–°ï¼Œå…¶ä¸­åŒ…å«å¹¾å€‹ä½¿ç”¨ TableView å’Œ TreeView å°éƒ¨ä»¶çš„å…¨æ–°ç¯„ä¾‹ã€‚</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/600/0*wcmJCv-6owwsolRl" />
</figure>


<p>TreeSliver ä¹Ÿè¢«æ·»åŠ åˆ°æ¡†æ¶ä¸­ï¼Œç”¨æ–¼åœ¨ä¸€ç¶­æ²å‹•ä¸­å»ºç«‹æ¨¹ã€‚TreeView å’Œ TreeSliver API ç›¸ç¬¦ï¼Œä½¿æ‚¨èƒ½å¤ è¼•é¬†åœ°åœ¨é©åˆæ‚¨çš„ç”¨ä¾‹çš„é‚£å€‹ä¹‹é–“åˆ‡æ›ã€‚</p>
<p>CarouselView</p>
<p>æ­¤ç‰ˆæœ¬åŒ…å«äº† Material Design è¼ªæ’­ å°éƒ¨ä»¶ï¼šCarouselViewã€‚CarouselView å‘ˆç¾ã€ŒæœªåŒ…å«ã€ä½ˆå±€ï¼šä¸€å€‹å¯æ²å‹•çš„é …ç›®åˆ—è¡¨ï¼Œé€™äº›é …ç›®æœƒæ²å‹•åˆ°å®¹å™¨çš„é‚Šç·£ï¼Œä¸¦ä¸”ç•¶é ˜å…ˆå’Œå°¾éš¨é …ç›®æ²å‡ºè¦–åœ–å’Œæ²å…¥è¦–åœ–æ™‚ï¼Œå®ƒå€‘å¯ä»¥å‹•æ…‹èª¿æ•´å¤§å°ã€‚</p>
<figure>
<img alt="Flutter CarouselView example" src="https://cdn-images-1.medium.com/max/512/1*6ytqSvtR2TJzAE6LntHTGw.gif" />
</figure>

<p>å°éƒ¨ä»¶æä¾›æ›´å¤šåŠŸèƒ½</p>
<p>æ­¤ç‰ˆæœ¬åŒ…å«å°‡æ ¸å¿ƒå°éƒ¨ä»¶é‚è¼¯å¾ Material åº«é‡æ–°å®šä½åˆ° Widgets åº«ä¸­ä»¥ä¾¿æ›´å»£æ³›ä½¿ç”¨çš„éƒ¨åˆ†å·¥ä½œï¼Œé€™äº›é‚è¼¯ä¸æ˜¯è¨­è¨ˆå°ˆç”¨çš„ã€‚é€™åŒ…æ‹¬ï¼š</p>
<p>Feedback å°éƒ¨ä»¶ï¼Œå®ƒæä¾›è¼•é¬†è¨ªå•è¨­å‚™ä¸Šçš„è§¸è¦ºå’ŒéŸ³è¨Šå›é¥‹ï¼Œä»¥éŸ¿æ‡‰é»æ“Šã€é•·æŒ‰ç­‰æ‰‹å‹¢ã€‚</p>
<p>ToggleableStateMixin å’Œ ToggleablePainterï¼Œç”¨æ–¼å»ºç«‹è¤‡é¸æ¡†ã€é–‹é—œå’Œå–®é¸æŒ‰éˆ•ç­‰åˆ‡æ›å°éƒ¨ä»¶çš„åŸºé¡ã€‚</p>
<p>ç‚º AnimationStatus å¢å¼·æšèˆ‰åŠŸèƒ½</p>
<p>åœ¨ç¤¾ç¾¤æˆå“¡ nate-thegrate çš„å‡ºè‰² è²¢ç» ä¸­ï¼Œå¢å¼·çš„æšèˆ‰åŠŸèƒ½è¢«æ·»åŠ åˆ° AnimationStatus ä¸­ï¼ŒåŒ…æ‹¬ getterï¼š</p>
<p>isDismissed</p>
<p>isCompleted</p>
<p>isRunning</p>
<p>isForwardOrCompleted</p>
<p>å…¶ä¸­ä¸€äº› getter å·²ç¶“å­˜åœ¨æ–¼ Animation å­é¡åˆ¥ä¸­ï¼Œä¾‹å¦‚ AnimationController å’Œ CurvedAnimationã€‚ç¾åœ¨ï¼Œæ‰€æœ‰é€™äº›ç‹€æ…‹ getter éƒ½å¯ä»¥åœ¨ Animation å­é¡åˆ¥ä¸­ä½¿ç”¨ï¼Œé™¤äº† AnimationStatus ä¹‹å¤–ã€‚æœ€å¾Œï¼Œä¸€å€‹ toggle æ–¹æ³•è¢«æ·»åŠ åˆ° AnimationController ä¸­ï¼Œç”¨æ–¼åˆ‡æ›å‹•ç•«çš„æ–¹å‘ã€‚</p>
<p>SelectionArea ä¸­çš„æ›´æ–°</p>
<p>Flutter çš„ SelectionArea ç¾åœ¨æ”¯æ´ä½¿ç”¨æ»‘é¼ é€²è¡Œä¸‰æ“Šå’Œåœ¨è§¸æ§è¨­å‚™ä¸Šé›™æ“Šçš„æ›´å¤šåŸç”Ÿæ‰‹å‹¢ã€‚é è¨­æƒ…æ³ä¸‹ï¼ŒSelectionArea å’Œ SelectableRegion å°éƒ¨ä»¶ä½¿ç”¨é€™äº›æ–°çš„æ‰‹å‹¢ã€‚</p>
<p>ä¸‰æ“Š</p>
<p>ä¸‰æ“Š + æ‹–å‹•ï¼šæ“´å±•æ®µè½å¡Šä¸­çš„é¸å–ç¯„åœã€‚</p>
<p>ä¸‰æ“Šï¼šé¸å–é»æ“Šä½ç½®çš„æ®µè½å¡Šã€‚</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*_GmbsIKfnwEAW6G8" />
</figure>


<p>é›™æ“Š</p>
<p>é›™æ“Š + æ‹–å‹•ï¼šæ“´å±•å­—è©å¡Šä¸­çš„é¸å–ç¯„åœï¼ˆæ”¯æ´åŸç”Ÿ Android&#x2F;Fuchsia&#x2F;iOS å’Œ iOS ç¶²é ï¼‰ã€‚</p>
<p>é›™æ“Šï¼šé¸å–é»æ“Šä½ç½®çš„å­—è©ï¼ˆæ”¯æ´åŸç”Ÿ Android&#x2F;Fuchsia&#x2F;iOS å’Œ Android&#x2F;Fuchsia ç¶²é ï¼‰ã€‚</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/770/0*DwZgIybQr3FDFxXd" />
</figure>

<p>å¼•æ“<br>Impeller</p>
<p>æ”¹å–„æ€§èƒ½å’Œä¿çœŸåº¦</p>
<p>ç‚ºäº†åœ¨å³å°‡åˆ°ä¾†çš„ç©©å®šç‰ˆæœ¬ä¸­ç§»é™¤ iOS ä¸Šçš„ Impeller é¸æ“‡é€€å‡ºï¼Œåœ˜éšŠä¸€ç›´åœ¨åŠªåŠ›æ”¹é€² Impeller çš„æ€§èƒ½å’Œä¿çœŸåº¦ã€‚ä¾‹å¦‚ï¼Œé‡å°æ–‡å­—æ¸²æŸ“çš„ä¸€ç³»åˆ—æ”¹é€² å¤§å¹…æé«˜äº† emoji æ²å‹•çš„æ€§èƒ½ï¼Œæ¶ˆé™¤äº†æ²å‹•å¤§é‡ emoji æ™‚çš„å¡é “ï¼Œé€™å° Impeller çš„æ–‡å­—æ¸²æŸ“èƒ½åŠ›ä¾†èªªæ˜¯ä¸€é …æ¥µå¥½çš„å£“åŠ›æ¸¬è©¦ã€‚</p>
<p>æ­¤å¤–ï¼Œé€é è§£æ±ºè¨±å¤šå•é¡Œï¼Œæˆ‘å€‘ä¹Ÿåœ¨æ­¤ç‰ˆæœ¬ä¸­å¤§å¹…æ”¹é€²äº† Impeller æ–‡å­—æ¸²æŸ“çš„ä¿çœŸåº¦ã€‚ç‰¹åˆ¥æ˜¯ï¼Œæ–‡å­—ç²—ç´°ã€é–“è·å’Œå­—è·èª¿æ•´ç¾åœ¨éƒ½èˆ‡å‚³çµ±æ¸²æŸ“å™¨çš„æ–‡å­—ä¿çœŸåº¦ç›¸ç¬¦ã€‚</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*gIu2Wm9mpuMGb1JY" />
<figcaption>Before (Note gaps instead of proper kerning, and lighter than intended font weight.)</figcaption>
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*tt9hlqhTbrmj4ZCt" />
<figcaption>After</figcaption>
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/739/0*eMboSxWLEJBS_EyL" />
<figcaption>Before (Note incorrect spacing, for example in â€œvergelijkenâ€)</figcaption>
</figure>

<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/739/0*uxeGJuIKWu0dPW1d" />
<figcaption>After</figcaption>
</figure>


<p>Android é è¦½</p>
<p>åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œæˆ‘å€‘å°‡ç¹¼çºŒåœ¨ Android ä¸Šé è¦½ Impellerã€‚æˆ‘å€‘å»¶é•·äº†é è¦½æœŸï¼Œå› ç‚º Impeller ç”¨æ–¼å¹³å°è¦–åœ–çš„ API åœ¨ Android 14 ä¸­çš„ä¸€å€‹éŒ¯èª¤ å°è‡´å‡ºç¾å›°é›£ã€‚é€™å€‹éŒ¯èª¤å¾Œä¾†è¢« Android åœ˜éšŠä¿®è£œäº†ï¼Œä½†æ˜¯è¨±å¤šå·²éƒ¨ç½²çš„è¨­å‚™åœ¨å¯é è¦‹çš„å°‡ä¾†å°‡é‹è¡Œæœªä¿®è£œçš„ Android ç‰ˆæœ¬ã€‚è§£æ±ºé€™äº›å•é¡Œæ„å‘³è‘—éœ€è¦é¡å¤–çš„ API é·ç§»ï¼Œå› æ­¤éœ€è¦é¡å¤–çš„ç©©å®šç‰ˆæœ¬é€±æœŸã€‚å‡ºæ–¼è¬¹æ…å’Œç‚ºäº†ç¢ºä¿ Flutter æ‡‰ç”¨ç¨‹å¼å¯ä»¥åœ¨ç›¡å¯èƒ½å»£æ³›çš„è¨­å‚™ä¸Šé‹è¡Œï¼Œæˆ‘å€‘å°‡æ¨é²å°‡ Impeller ä½œç‚ºé è¨­æ¸²æŸ“å™¨ï¼Œç›´åˆ°ä»Šå¹´æ™šäº›æ™‚å€™çš„ç©©å®šç‰ˆæœ¬ç™¼ä½ˆã€‚</p>
<p>éš¨è‘— Android ä¸Šçš„ Impeller é è¦½ç¹¼çºŒåœ¨ 3.24 ç©©å®šç‰ˆæœ¬é€±æœŸä¸­é€²è¡Œï¼Œæˆ‘å€‘è«‹æ±‚ Flutter é–‹ç™¼äººå“¡å‡ç´šåˆ°æœ€æ–°çš„ç©©å®šç‰ˆæœ¬ï¼Œä¸¦åœ¨å•Ÿç”¨ Impeller æ™‚æäº¤æœ‰é—œä»»ä½•ç™¼ç¾çš„ä¸è¶³çš„éŒ¯èª¤ã€‚åœ¨æ­¤éšæ®µçš„å›é¥‹å°ç¢ºä¿ Impeller åœ¨ Android ä¸Šå–å¾—æˆåŠŸä»¥åŠæˆ‘å€‘èƒ½å¤ åœ¨ä»Šå¹´æ™šäº›æ™‚å€™çš„ç‰ˆæœ¬ä¸­è‡ªä¿¡åœ°å°‡å…¶è¨­ç‚ºé è¨­æ¸²æŸ“å™¨è‡³é—œé‡è¦ã€‚Android ç¡¬é«”ç”Ÿæ…‹ç³»çµ±æ¯” iOS ç”Ÿæ…‹ç³»çµ±æ›´åŠ å¤šå…ƒã€‚å› æ­¤ï¼Œé—œæ–¼ Impeller æœ€æœ‰ç”¨çš„å›é¥‹æ‡‰åŒ…æ‹¬æœ‰é—œç™¼ç”Ÿå•é¡Œçš„ç‰¹å®šè¨­å‚™å’Œ Android ç‰ˆæœ¬çš„è©³ç´°è³‡è¨Šã€‚</p>
<p>æ”¹é€²ç¸®æ”¾åœ–ç‰‡çš„é è¨­å€¼</p>
<p>åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œåœ–ç‰‡çš„é è¨­ FilterQuality å·²å¾ FilterQuality.low è®Šæ›´ç‚º FilterQuality.mediumã€‚ç•¶ä¸€å€‹å¤§å‹åœ–ç‰‡æ¯”å…¶ç›®æ¨™çŸ©å½¢å¤§å¾ˆå¤šæ™‚ï¼ˆé€™æ˜¯ä¸€å€‹å¸¸è¦‹çš„æƒ…æ³ï¼‰ï¼ŒFilterQuality.low æœƒå°è‡´åœ–ç‰‡çœ‹èµ·ä¾†æ›´åŠ ã€Œåƒç´ åŒ–ã€ï¼Œä¸¦ä¸”æ¸²æŸ“é€Ÿåº¦æ¯” FilterQuality.medium æ…¢ã€‚æœªä¾†ï¼Œåœ˜éšŠé‚„å°‡æ¢ç´¢æ›´é©åˆå„ç¨® FilterQuality ç´šåˆ¥çš„æ–°åç¨±ã€‚</p>
<p>Flutter GPU é è¦½</p>
<p>Flutter æ¨å‡ºäº†å°æ¸²æŸ“åŠŸèƒ½çš„é‡å¤§æ›´æ–°ï¼Œå³ Flutter GPUï¼Œå¯åœ¨ä¸»é »é“ä¸Šä½¿ç”¨ã€‚æ­¤ä½éšåœ–å½¢ API å…è¨±é–‹ç™¼äººå“¡ä½¿ç”¨ Dart ç¨‹å¼ç¢¼å’Œ GLSL è‘—è‰²å™¨å»ºç«‹è‡ªè¨‚æ¸²æŸ“å™¨ï¼Œè€Œç„¡éœ€ä»»ä½•åŸç”Ÿå¹³å°ç¨‹å¼ç¢¼ã€‚</p>
<p>Flutter GPU æ“´å±•äº†æ‚¨å¯ä»¥åœ¨ Flutter ä¸­ç›´æ¥æ¸²æŸ“çš„å…§å®¹ï¼Œå•Ÿç”¨é€²éšåœ–å½¢å’Œ 3D å ´æ™¯ã€‚å®ƒéœ€è¦ Impeller æ¸²æŸ“å¾Œç«¯ï¼Œç›®å‰åœ¨ iOSã€macOS å’Œ Android ä¸Šå—æ”¯æŒã€‚å„˜ç®¡è™•æ–¼æ—©æœŸé è¦½éšæ®µï¼Œä½† Flutter GPU çš„ç›®æ¨™æ˜¯æœ€çµ‚æ”¯æ´æ‰€æœ‰ Flutter å¹³å°ã€‚</p>
<p>API å…è¨±å®Œå…¨æ§åˆ¶æ¸²æŸ“å‚³éé™„ä»¶ã€é ‚é»éšæ®µå’Œæ•¸æ“šä¸Šå‚³åˆ° GPUã€‚é€™ç¨®éˆæ´»æ€§å°æ–¼å»ºç«‹è¤‡é›œçš„æ¸²æŸ“è§£æ±ºæ–¹æ¡ˆè‡³é—œé‡è¦ï¼Œå¾ 2D è§’è‰²å‹•ç•«åˆ°è¤‡é›œçš„ 3D å ´æ™¯ã€‚</p>
<p>é–‹ç™¼äººå“¡å¯ä»¥é€éåˆ‡æ›åˆ°ä¸»é »é“ä¸¦å°‡ flutter_gpu å¥—ä»¶æ·»åŠ åˆ°ä»–å€‘çš„å°ˆæ¡ˆä¸­ä¾†é–‹å§‹ä½¿ç”¨ Flutter GPUã€‚æ¥ä¸‹ä¾†çš„å¹¾å€‹æœˆå°‡çœ‹åˆ°æ›´å¤šåŠŸèƒ½å’Œç©©å®šæ€§æ–¹é¢çš„æ”¹é€²ï¼Œæ›´é«˜éšçš„æ¸²æŸ“åº«ï¼ˆå¦‚ flutter_sceneï¼‰å°‡ç°¡åŒ–é€™äº›é€²éšåŠŸèƒ½çš„ä½¿ç”¨ã€‚</p>
<p>è‹¥è¦æ·±å…¥äº†è§£ Flutter GPUï¼Œä¸¦äº†è§£å¦‚ä½•åœ¨æ‚¨çš„å°ˆæ¡ˆä¸­åˆ©ç”¨å®ƒï¼Œè«‹æŸ¥çœ‹è©³ç´°çš„ Flutter GPU éƒ¨è½æ ¼æ–‡ç« ã€‚ç„¡è«–æ‚¨æ˜¯å»ºç«‹éŠæˆ²é‚„æ˜¯è¤‡é›œçš„åœ–å½¢ï¼ŒFlutter çš„å…¨æ–° GPU åŠŸèƒ½éƒ½è®“å®ƒæˆç‚ºç”¢å“çš„å¼·å¤§é¸æ“‡ã€‚</p>
<p>ç¶²é <br>å¤šè¦–åœ–åµŒå…¥</p>
<p>Flutter ç¶²é æ‡‰ç”¨ç¨‹å¼ç¾åœ¨å¯ä»¥åˆ©ç”¨å¤šè¦–åœ–åµŒå…¥ï¼Œè®“é–‹ç™¼äººå“¡å¯ä»¥å°‡å…§å®¹åŒæ™‚æ¸²æŸ“åˆ°å¤šå€‹ HTML å…ƒç´ ä¸­ã€‚æ­¤åŠŸèƒ½ç¨±ç‚ºã€ŒåµŒå…¥æ¨¡å¼ã€æˆ–ã€Œå¤šè¦–åœ–ã€ï¼Œç‚ºå°‡ Flutter è¦–åœ–æ•´åˆåˆ°ç¾æœ‰çš„ Web æ‡‰ç”¨ç¨‹å¼ä¸­æä¾›äº†éˆæ´»æ€§ã€‚</p>
<p>åœ¨å¤šè¦–åœ–æ¨¡å¼ä¸‹ï¼ŒFlutter ç¶²é æ‡‰ç”¨ç¨‹å¼ä¸æœƒåœ¨å•Ÿå‹•æ™‚ç«‹å³æ¸²æŸ“ã€‚ç›¸åï¼Œå®ƒæœƒç­‰åˆ°ä¸»æ©Ÿæ‡‰ç”¨ç¨‹å¼ä½¿ç”¨ addView æ–¹æ³•æ·»åŠ ç¬¬ä¸€å€‹ã€Œè¦–åœ–ã€ã€‚ä¸»æ©Ÿæ‡‰ç”¨ç¨‹å¼å¯ä»¥å‹•æ…‹æ·»åŠ æˆ–ç§»é™¤é€™äº›è¦–åœ–ï¼ŒFlutter æœƒæ ¹æ“šéœ€è¦èª¿æ•´å…¶å°éƒ¨ä»¶ã€‚</p>
<p>è‹¥è¦å•Ÿç”¨å¤šè¦–åœ–æ¨¡å¼ï¼Œè«‹åœ¨ flutter_bootstrap.js æª”æ¡ˆä¸­çš„ initializeEngine æ–¹æ³•ä¸­è¨­å®š multiViewEnabled: trueã€‚ç„¶å¾Œï¼Œå¯ä»¥å¾ JavaScript ç®¡ç†è¦–åœ–ï¼Œå°‡å®ƒå€‘æ·»åŠ åˆ°æŒ‡å®šçš„ HTML å…ƒç´ ä¸­ï¼Œä¸¦æ ¹æ“šéœ€è¦ç§»é™¤å®ƒå€‘ã€‚æ¯æ¬¡æ·»åŠ å’Œç§»é™¤è¦–åœ–éƒ½æœƒè§¸ç™¼ Flutter ä¸­çš„æ›´æ–°ï¼Œå…è¨±å‹•æ…‹å…§å®¹æ¸²æŸ“ã€‚</p>
<p>æ­¤åŠŸèƒ½å°æ–¼å°‡ Flutter æ•´åˆåˆ°éœ€è¦å¤šå€‹ç¨ç«‹ Flutter è¦–åœ–çš„è¤‡é›œ Web æ‡‰ç”¨ç¨‹å¼ä¸­ç‰¹åˆ¥æœ‰ç”¨ã€‚å®ƒé‚„æ”¯æ´æ¯å€‹è¦–åœ–çš„è‡ªè¨‚åˆå§‹åŒ–æ•¸æ“šï¼Œå•Ÿç”¨å€‹äººåŒ–çš„è¨­å®šå’Œäº’å‹•å¼é«”é©—ã€‚</p>
<p>è‹¥è¦æ·±å…¥äº†è§£å¦‚ä½•åœ¨ Flutter ç¶²é æ‡‰ç”¨ç¨‹å¼ä¸­å¯¦ä½œå¤šè¦–åœ–åµŒå…¥ï¼Œè«‹æŸ¥çœ‹ è©³ç´°çš„æ–‡ä»¶ã€‚</p>
<p>è®Šç¾<br>å½±ç‰‡å»£å‘Šè®Šç¾æ”¯æ´</p>
<p>æˆ‘å€‘æ¨å‡ºäº†ä¸€å€‹æ–°çš„ äº’å‹•å¼åª’é«”å»£å‘Š (IMA) å¤–æ›ï¼Œä»¥æ”¯æ´ Flutter è¡Œå‹•æ‡‰ç”¨ç¨‹å¼ä¸­çš„ä¸²æµå½±ç‰‡å»£å‘Šè®Šç¾ã€‚æ–°çš„ IMA å¤–æ›ç‚º Flutter æ‡‰ç”¨ç¨‹å¼æä¾›äº†æ–°çš„å»£å‘Šè®Šç¾æ©Ÿæœƒï¼Œé€™äº›æ©Ÿæœƒå»ºç«‹åœ¨ç¾æœ‰çš„ Google è¡Œå‹•å»£å‘Š (GMA) å¤–æ› ä¹‹ä¸Šï¼Œè©²å¤–æ›ä¸»è¦æ”¯æ´å±•ç¤ºå»£å‘Šæ ¼å¼ã€‚</p>
<p>ä¸²æµå½±ç‰‡å»£å‘Šé€šå¸¸åœ¨å½±ç‰‡å…§å®¹æ’­æ”¾ä¹‹å‰ï¼ˆé–‹é ­å»£å‘Šï¼‰ã€æœŸé–“ï¼ˆä¸­é–“å»£å‘Šï¼‰æˆ–ä¹‹å¾Œï¼ˆçµå°¾å»£å‘Šï¼‰é¡¯ç¤ºçµ¦ä½¿ç”¨è€…ã€‚ä¸€äº›ä¸²æµå½±ç‰‡å»£å‘Šä¹Ÿå¯ä»¥è·³éã€‚</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/836/0*_c0s8KMdLNyfxOMQ" />
</figure>


<p>Flutter IMA çš„å„ªé»ï¼š</p>
<p>åœ¨ Flutter æ‡‰ç”¨ç¨‹å¼ä¸­ç„¡ç¸«è®Šç¾å½±ç‰‡æ’­æ”¾å™¨å…§å®¹ã€‚ä¾‹å¦‚ï¼Œç•¶æ‡‰ç”¨ç¨‹å¼ä½¿ç”¨è€…é»æ“Šå½±ç‰‡å…§å®¹ä¸Šçš„æ’­æ”¾æ™‚ï¼Œæ‚¨ç¾åœ¨å¯ä»¥å¯¦ä½œ Flutter IMA å¤–æ›ä»¥é¦–å…ˆå‘ä½¿ç”¨è€…é¡¯ç¤ºä¸€å€‹ 15 ç§’çš„å»£å‘Šï¼Œç„¶å¾Œå†é–‹å§‹æ’­æ”¾å½±ç‰‡å…§å®¹ã€‚</p>
<p>åˆ©ç”¨åŸç”Ÿ IMA SDK çš„ç›¸åŒå„ªé»ï¼ŒåŒ…æ‹¬è¨ªå• Google å„ªè³ªå»£å‘Šéœ€æ±‚å’Œè¡Œæ¥­æ¨™æº–åˆè¦æ€§ï¼ˆä¾‹å¦‚ IAB VASTï¼‰ã€‚</p>
<p>åˆå§‹ç™¼ä½ˆç‰ˆæœ¬ç›®å‰æ”¯æ´ Android å’Œ iOS å¹³å°ä¸Šçš„é–‹é ­å½±ç‰‡å»£å‘Šã€‚ä¸­é–“å»£å‘Šæ”¯æ´å°‡å¾ˆå¿«æä¾›ã€‚æˆ‘å€‘é¼“å‹µæ‚¨é–‹å§‹åœ¨ Flutter æ‡‰ç”¨ç¨‹å¼å½±ç‰‡å…§å®¹ä¸­æ¢ç´¢æ–°çš„ IMA å¤–æ›ã€‚å¦‚æœæ‚¨åœ¨ GitHub ä¸Šé‡åˆ°ä»»ä½•å•é¡Œæˆ–ç–‘æ…®ï¼Œè«‹å‘ŠçŸ¥æˆ‘å€‘ã€‚</p>
<p>è³‡æºï¼šå¤–æ›æŒ‡å—ï¼Œæ¨£æœ¬æ‡‰ç”¨ç¨‹å¼ï¼ŒGit å„²å­˜åº«</p>
<p>iOS<br>Swift å¥—ä»¶ç®¡ç†å™¨åˆå§‹æ”¯æ´</p>
<p>ä»Šå¤©ï¼ŒFlutter ä½¿ç”¨ CocoaPods ä¾†ç®¡ç†åŸç”Ÿ iOS æˆ– macOS ä¾è³´é …ã€‚</p>
<p>Flutter 3.24 æ·»åŠ äº†å° Swift å¥—ä»¶ç®¡ç†å™¨çš„æ—©æœŸæ”¯æ´ã€‚é€™å¸¶ä¾†äº†è¨±å¤šå„ªé»ï¼ŒåŒ…æ‹¬ï¼š</p>
<p>è¨ªå• Swift å¥—ä»¶ç”Ÿæ…‹ç³»çµ±ã€‚Flutter å¤–æ›å°‡èƒ½å¤ åˆ©ç”¨ä¸æ–·ç™¼å±•çš„ Swift å¥—ä»¶ ç”Ÿæ…‹ç³»çµ±ï¼<br>2. ç°¡åŒ– Flutter å®‰è£ã€‚Swift å¥—ä»¶ç®¡ç†å™¨èˆ‡ Xcode æ†ç¶åœ¨ä¸€èµ·ã€‚æœªä¾†ï¼Œæ‚¨å°‡ä¸å†éœ€è¦å®‰è£ Ruby å’Œ CocoaPods ä¾†ç‚º Apple å¹³å°ä½¿ç”¨ Flutterã€‚</p>
<p>æˆ‘å€‘é¼“å‹µå¤–æ›ä½œè€… å˜—è©¦å°‡ Swift å¥—ä»¶ç®¡ç†å™¨æ”¯æ´æ·»åŠ åˆ°æ‚¨çš„å¤–æ›ä¸­ï¼Œä¸¦æä¾›æ‚¨é«”é©—çš„å›é¥‹ã€‚</p>
<p>å¦‚æœæ‚¨å° Flutter å° Swift å¥—ä»¶ç®¡ç†å™¨çš„æ”¯æ´æœ‰ä»»ä½•å›é¥‹ï¼Œè«‹ æäº¤éŒ¯èª¤ã€‚</p>
<p>ç”Ÿæ…‹ç³»çµ±<br>å…±äº«åå¥½è¨­å®šå¤–æ›æ›´æ–°</p>
<p>æˆ‘å€‘å·²åœ¨ shared_preferences å¤–æ›ä¸­æ·»åŠ äº†å…©å€‹æ–°çš„ APIï¼ŒSharedPreferencesAsync å’Œ SharedPreferencesWithCacheã€‚æœ€é‡å¤§çš„è®ŠåŒ–æ˜¯ Android å¯¦ä½œä½¿ç”¨ Preferences DataStore è€Œä¸æ˜¯ Shared Preferencesã€‚</p>
<p>SharedPreferencesAsync å…è¨±ä½¿ç”¨è€…ç›´æ¥èª¿ç”¨å¹³å°ä»¥ç²å–è¨­å‚™ä¸Šä¿å­˜çš„æœ€æ–°åå¥½è¨­å®šï¼Œä»£åƒ¹æ˜¯ç•°æ­¥å’Œæ¯”ä½¿ç”¨å¿«å–ç‰ˆæœ¬ç¨å¾®æ…¢ä¸€äº›ã€‚é€™å°æ–¼å¯ä»¥ç”±å…¶ä»–ç³»çµ±æˆ–éš”é›¢å€æ›´æ–°çš„åå¥½è¨­å®šå¾ˆæœ‰ç”¨ï¼Œé€™äº›åå¥½è¨­å®šæœƒä½¿å¿«å–éæ™‚ã€‚</p>
<p>SharedPreferencesWithCache å»ºç«‹åœ¨ SharedPreferencesAsync ä¹‹ä¸Šï¼Œå…è¨±ä½¿ç”¨è€…åŒæ­¥è¨ªå•åå¥½è¨­å®šçš„æœ¬åœ°å¿«å–å‰¯æœ¬ã€‚é€™èˆ‡èˆŠçš„ API ç›¸ä¼¼ï¼Œä½†ç¾åœ¨å¯ä»¥é€éä¸åŒçš„åƒæ•¸å¤šæ¬¡å¯¦ä¾‹åŒ–ã€‚</p>
<p>é€™äº›æ–°çš„ API æ—¨åœ¨å°‡ä¾†æ›¿æ›ç›®å‰çš„ SharedPreferences APIã€‚ä½†æ˜¯ï¼Œé€™æ˜¯ç”Ÿæ…‹ç³»çµ±ä¸­æœ€å¸¸ç”¨çš„å¤–æ›ä¹‹ä¸€ï¼Œæˆ‘å€‘çŸ¥é“ç”Ÿæ…‹ç³»çµ±éœ€è¦æ™‚é–“æ‰èƒ½è½‰æ›åˆ°æ–°çš„ APIã€‚</p>
<p>Flutter å’Œ Dart å¥—ä»¶ç”Ÿæ…‹ç³»çµ±å³°æœƒæ­æ´² 2024</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*fWo9ieYzQcJjwQBi" />
</figure>


<p>ä½œç‚º Fluttercon æ­æ´² 2024 çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘å€‘èˆ‰è¾¦äº†é¦–å±†é¢å°é¢ Flutter å’Œ Dart å¥—ä»¶ç”Ÿæ…‹ç³»çµ±å³°æœƒã€‚é€™æ˜¯ç¹¼æˆ‘å€‘æ–¼ 2023 å¹´ 8 æœˆèˆ‰è¾¦çš„ç¬¬ä¸€å±†è™›æ“¬å³°æœƒä¹‹å¾Œã€‚åœ¨æ­¤æŸ¥çœ‹è¨è«–æœƒçš„é‡é»æ‘˜è¦ã€‚</p>
<p>æˆ‘å€‘å¾ˆé«˜èˆˆåœ°å®£å¸ƒï¼Œä¸‹ä¸€å±†å³°æœƒå°‡æ–¼ 2024 å¹´ 9 æœˆ 20 æ—¥åœ¨ç´ç´„å¸‚èˆ‰è¡Œçš„ Fluttercon USA èˆ‰è¡Œï¼å¦‚æœæ‚¨æ˜¯å¥—ä»¶ä½œè€…æˆ–è²¢ç»è€…ï¼Œä¸¦ä¸”å°‡åƒåŠ  Fluttercon USA 2024ï¼Œè«‹ è¨»å†Š ä»¥ä¿ç•™æ‚¨çš„å³°æœƒå¸­ä½ã€‚</p>
<p>å³°æœƒåŒ¯é›†äº†å¥—ä»¶ä½œè€…å’Œç¶­è­·è€…ï¼Œé€²è¡Œäº†ä»¥ä¸‹ä¸»é¡Œçš„éæ­£å¼æœƒè­°ï¼š</p>
<p>æœƒè­° 1 - åŸç”Ÿäº’æ“ä½œçš„éå»ã€ç¾åœ¨å’Œæœªä¾†</p>
<p>æœƒè­° 2 - å¯æŒçºŒçš„å¥—ä»¶ç¶­è­·æ¨¡å‹</p>
<p>æœƒè­° 3 - è§£æ±ºå¥—ä»¶ç”Ÿæ…‹ç³»çµ±ç¢ç‰‡åŒ–å•é¡Œ</p>
<p>æˆ‘å€‘ç›¸ä¿¡å³°æœƒï¼Œç‰¹åˆ¥æ˜¯åœ¨æ›´é€šç”¨çš„ Flutter å’Œ Dart æ´»å‹•çš„ä¸€éƒ¨åˆ†æ™‚ï¼Œæ˜¯ç¤¾ç¾¤ä¹‹é–“å…¬é–‹è¨è«–çš„æœ‰åƒ¹å€¼çš„å¹³å°ï¼Œç”¨æ–¼æ‰¾å‡ºé—œéµæŒ‘æˆ°å’Œé›†æ€å»£ç›Šè§£æ±ºæ–¹æ¡ˆã€‚æˆ‘å€‘æœŸå¾…èˆ‡ç¤¾ç¾¤åˆä½œï¼Œåœ¨æœªä¾†èˆ‰è¾¦æ›´å¤šæ­¤é¡å³°æœƒã€‚</p>
<p>DevTools å’Œ IDE</p>
<p>æ­¤ç‰ˆæœ¬åŒ…å«ä¸€äº›å° Flutter DevTools å·¥å…·å¥—ä»¶çš„ä»¤äººèˆˆå¥®çš„æ”¹é€²ã€‚</p>
<p>å¦‚æœæ‚¨æ›¾ç¶“æƒ³çŸ¥é“æ‚¨çš„ Flutter æ‡‰ç”¨ç¨‹å¼æ˜¯å¦å»ºç«‹äº†æ¯”é æœŸæ›´å¤šçš„ Widgetï¼Œé‚£éº¼ DevTools æ€§èƒ½ å·¥å…·ä¸­çš„ä¸€å€‹æ–°åŠŸèƒ½å¯ä»¥å¹«åŠ©æ‚¨ã€‚ä½¿ç”¨æ–°çš„ é‡æ–°å»ºç«‹çµ±è¨ˆæ•¸æ“š åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥æ•ç²æœ‰é—œæ‡‰ç”¨ç¨‹å¼ä¸­æˆ–ç”šè‡³ç‰¹å®š Flutter ç•«é¢ä¸­ Widget å»ºç«‹æ¬¡æ•¸çš„è³‡è¨Šã€‚</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/749/0*7LXjXlFR9w-VR6xk" />
</figure>


<p>DevTools æ€§èƒ½å·¥å…·çš„è¢å¹•æˆªåœ–ï¼Œè·Ÿè¸ªé‡æ–°å»ºç«‹çµ±è¨ˆæ•¸æ“šã€‚</p>
<p>æˆ‘å€‘å·²ç‚º ç¶²è·¯æ•ˆèƒ½åˆ†æå™¨ å’Œ Flutter æ·±å±¤é€£çµå·¥å…· ç­‰å·¥å…·æ·»åŠ äº†æ½¤è‰²å’Œé—œéµéŒ¯èª¤ä¿®å¾©ï¼Œä¸¦ä¸”é€²è¡Œäº†ä¸€äº›ä¸€èˆ¬æ€§æ”¹é€²ï¼Œä»¥åœ¨æ‚¨å¾ IDE ä¸­ä½¿ç”¨ DevTools æ™‚ç‚ºæ‚¨æä¾›æ›´å¥½çš„é«”é©—ã€‚èªªåˆ° IDEï¼Œæ‚¨çŸ¥é“æ‚¨å¯ä»¥åœ¨ IDE ä¸­ç›´æ¥ä½¿ç”¨æ¯å€‹ DevTools å·¥å…·å—ï¼Ÿ</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*tdpToIuTd-mBq-_R" />
</figure>


<p>DevTools è¢å¹•åœ¨ VS Code è¦–çª—ä¸­æ‰“é–‹ã€‚</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/1024/0*QvoXCNqqfsrMn1oC" />
</figure>


<p>DevTools è¢å¹•åœ¨ Android Studio å·¥å…·è¦–çª—ä¸­æ‰“é–‹ã€‚</p>
<p>æ­¤ç‰ˆæœ¬åŒ…å«å° VS Code ä¸­çš„ Flutter å´é‚Šæ¬„çš„æ”¹é€²ï¼Œè®“æ‚¨æ›´å®¹æ˜“è¨ªå•æ‚¨æ­£åœ¨å°‹æ‰¾çš„å·¥å…·ã€‚å‡ç´šåˆ°æœ€æ–°ç‰ˆæœ¬çš„ VS Code å’Œ Flutter å’Œ Dart æ“´å±•ï¼Œä»¥è¨ªå•æ”¹é€²çš„å´é‚Šæ¬„ã€‚</p>
<figure>
<img alt="" src="https://cdn-images-1.medium.com/max/318/0*BzEybhMlV-SnSZZl" />
</figure>


<p>Flutter å´é‚Šæ¬„æ˜¯è‡ªé©æ‡‰çš„ï¼Œå¯ä»¥èª¿æ•´å¤§å°ä»¥é©åˆæ‚¨çš„å·¥ä½œå€</p>
<p>æ­¤ç‰ˆæœ¬é‚„åŒ…å«å° DevTools æ“´å±• æ¡†æ¶çš„ä¸€äº›é‡å¤§æ”¹é€²ã€‚æ‚¨ç¾åœ¨å¯ä»¥åœ¨èª¿è©¦ Dart æˆ– Flutter æ¸¬è©¦æ™‚ä½¿ç”¨ DevTools æ“´å±•ï¼ˆç”±æ‚¨çš„å¥—ä»¶ä¾è³´é …ä¹‹ä¸€æä¾›çš„å·¥å…·ï¼‰ï¼Œæˆ–è€…ç”šè‡³åœ¨æ‚¨æ²’æœ‰èª¿è©¦ä»»ä½•å…§å®¹æ™‚ï¼Œä½†åªæ˜¯åœ¨ IDE ä¸­æ’°å¯«ç¨‹å¼ç¢¼æ™‚ä½¿ç”¨ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨æƒ³åœ¨é€™äº›ä½¿ç”¨è€…æ—…ç¨‹ä¸­ä½¿ç”¨å·¥å…·ï¼ˆæˆ–å»ºç«‹å·¥å…·ï¼ï¼‰ï¼Œç¾åœ¨å·²ç¶“å¯ä»¥äº†ã€‚</p>
<p>è‹¥è¦é€²ä¸€æ­¥äº†è§£ Flutter 3.24 ä¸­åŒ…å«çš„æ‰€æœ‰æ›´æ–°ï¼Œè«‹æŸ¥çœ‹ DevTools çš„ç™¼ä½ˆèªªæ˜ 2.35.0ï¼Œ2.36.0 å’Œ 2.37.2ã€‚</p>
<p>é‡å¤§è®Šæ›´å’Œæ£„ç”¨</p>
<p>æ­¤ç‰ˆæœ¬ä¸­çš„é‡å¤§è®Šæ›´åŒ…æ‹¬å° Navigator çš„é é¢ APIã€PopScope ä¸­çš„æ³›å‹ã€Flutter ç¶²é çš„é è¨­æ¸²æŸ“å™¨ çš„è®Šæ›´ï¼Œä»¥åŠä¸€äº›æ–°çš„æ£„ç”¨ã€‚åœ¨ é‡å¤§è®Šæ›´é é¢ ä¸ŠæŸ¥çœ‹å®Œæ•´çš„é·ç§»æŒ‡å—ã€‚</p>
<p>èˆ‡å¾€å¸¸ä¸€æ¨£ï¼Œéå¸¸æ„Ÿè¬ç¤¾ç¾¤ç‚º è²¢ç»æ¸¬è©¦ - é€™äº›æ¸¬è©¦å¹«åŠ©æˆ‘å€‘è­˜åˆ¥å‡ºé€™äº›é‡å¤§è®Šæ›´ã€‚è‹¥è¦é€²ä¸€æ­¥äº†è§£ï¼Œè«‹æŸ¥çœ‹ Flutter çš„é‡å¤§è®Šæ›´æ”¿ç­–ã€‚</p>
<p>çµèª</p>
<p>Flutter æˆåŠŸèƒŒå¾Œçš„æ ¸å¿ƒæ˜¯æ‚¨ - æˆ‘å€‘éå‡¡çš„ç¤¾ç¾¤ã€‚æ²’æœ‰æ‚¨ç„¡æ•¸çš„è²¢ç»å’Œå …å®šçš„ç†±æƒ…ï¼Œé€™å€‹ç‰ˆæœ¬æ˜¯ä¸å¯èƒ½å¯¦ç¾çš„ã€‚æˆ‘å€‘è¡·å¿ƒæ„Ÿè¬æ‚¨ã€‚</p>
<p>è‹¥è¦æ·±å…¥äº†è§£æ­¤ç‰ˆæœ¬ä¸­æ‰€å–å¾—çš„æˆæœï¼Œæˆ‘å€‘é‚€è«‹æ‚¨æŸ¥çœ‹ ç™¼ä½ˆèªªæ˜ å’Œ è®Šæ›´æ—¥èªŒï¼Œä»¥ç²å– Flutter 3.24 ä¸­æ·»åŠ çš„å…§å®¹çš„å®Œæ•´åˆ—è¡¨ã€‚</p>
<p>Flutter 3.24 èˆ‡ Dart 3.5 ç¾åœ¨å·²åœ¨ç©©å®šç‰ˆæœ¬é€šé“ä¸Šæä¾›ã€‚é–‹å§‹ä½¿ç”¨ Flutter çš„æœ€æ–°æ—…ç¨‹å°±åƒé‹è¡Œ flutter upgrade ä¸€æ¨£ç°¡å–®ã€‚æˆ‘å€‘è¿«ä¸åŠå¾…æƒ³çœ‹çœ‹æ‚¨æœƒå»ºç«‹ä»€éº¼ï¼</p>
<p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=6c040f87d1e4" width="1" height="1" alt=""><hr><p><a href="https://medium.com/flutter/whats-new-in-flutter-3-24-6c040f87d1e4">Flutter 3.24 çš„æ–°åŠŸèƒ½</a> æœ€åˆç™¼ä½ˆåœ¨ <a href="https://medium.com/flutter">Flutter</a> ä¸Šçš„ Mediumï¼Œäººå€‘åœ¨é‚£è£¡é€éçªå‡ºé¡¯ç¤ºå’Œå›æ‡‰é€™å€‹æ•…äº‹ä¾†ç¹¼çºŒè¨è«–ã€‚</p></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.rainvisitor.me/archives/430aae7c.html" data-id="cm1kh4c1p0000gp17fag117fe" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-android-app-store-tutorial" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/4254a2e9.html" class="article-date">
  <time datetime="2020-10-25T11:51:40.000Z" itemprop="datePublished">2020-10-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Flutter/">Flutter</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/4254a2e9.html">Android app ä¸Šæ¶æµç¨‹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç´¹åœ¨2020å¹´ Goolge æ”¹ç‰ˆå¾Œçš„ Play Store Console å¦‚ä½•ä¸Šæ¶ Android App</p>
<p>é¦–å…ˆåˆ° <a href="https://play.google.com/console/u/0/developers/" target="_blank" rel="noopener">Play Store Console</a> å³é‚Šé»æ“Šæ–°å¢æ‡‰ç”¨ç¨‹å¼</p>
<p><img src="../images/android-app-deploy/img1.png" alt=""></p>
<p>å¡«å¯«ä»¥ä¸‹æ‡‰ç”¨ç¨‹å¼è©³ç´°è³‡è¨Š</p>
<ul>
<li>æ‡‰ç”¨ç¨‹å¼åç¨±ï¼šæœƒé¡¯ç¤ºåœ¨å•†åº—çš„Appåç¨±</li>
<li>é è¨­èªè¨€ï¼šé è¨­Appä½¿ç”¨çš„èªè¨€ï¼Œä½œç‚ºå•†åº—ä¸€é–‹å§‹æä¾›çš„é è¨­èªè¨€</li>
<li>æ‡‰ç”¨ç¨‹å¼é¡å‹ï¼šåˆ†é¡åªæœ‰éŠæˆ²èˆ‡æ‡‰ç”¨ç¨‹å¼ï¼Œç›®çš„æ˜¯è¦æŠŠéŠæˆ²å€åˆ†å‡ºä¾†ï¼Œæ—¥å¾Œå¯æ›´æ”¹</li>
<li>æ˜¯å¦æ”¶è²»ï¼šè¨­å®šAppæ˜¯å¦ä¸‹è¼‰æ™‚éœ€è¦è²»ç”¨ï¼Œå‹¾é¸æ”¶è²»å¾Œï¼Œéœ€è¦è‡³ <code>ä»˜è²»æ‡‰ç”¨ç¨‹å¼</code> ä¿®æ”¹è¨­å®š</li>
</ul>
<p>æœ€å¾ŒåŒæ„ <code>é–‹ç™¼äººå“¡è¨ˆç•«æ”¿ç­–</code> åŠ <code>ç¾åœ‹å‡ºå£æ³•å¾‹</code> å¾Œï¼Œå³å¯å®Œæˆåˆå§‹è¨­å®š</p>
<p><img src="../images/android-app-deploy/img2.png" alt=""></p>
<p><img src="../images/android-app-deploy/img3.png" alt=""></p>
<p>æ¥è‘—é€²å…¥åˆ° <code>è³‡è¨Šä¸»é </code></p>
<p><img src="../images/android-app-deploy/img4.png" alt=""></p>
<p>ç¬¬ä¸€æ¬¡è¨­å®šæ™‚æœƒå‡ºç¾ <code>åˆå§‹è¨­å®š</code> æç¤ºï¼Œå¯ä¾åºé»æ“Šè¨­å®šï¼Œè©²æ­¥é©Ÿéƒ½æ˜¯å¿…é ˆå®Œæˆçš„æ­¥é©Ÿï¼Œå¦å‰‡ç„¡æ³•å®Œæˆå¯©æŸ¥ä¸Šæ¶</p>
<p><img src="../images/android-app-deploy/img5.png" alt=""></p>
<h1 id="æ‡‰ç”¨ç¨‹å¼å­˜å–æ¬Š"><a href="#æ‡‰ç”¨ç¨‹å¼å­˜å–æ¬Š" class="headerlink" title="æ‡‰ç”¨ç¨‹å¼å­˜å–æ¬Š"></a>æ‡‰ç”¨ç¨‹å¼å­˜å–æ¬Š</h1><p>è¨­å®š App æ˜¯å¦é–‹æ”¾çµ¦å…¨éƒ¨ä½¿ç”¨è€…</p>
<p><img src="../images/android-app-deploy/img6.png" alt=""></p>
<p>æˆ–æ˜¯éƒ¨åˆ†åŠŸèƒ½æœ‰ä½¿ç”¨é™åˆ¶ï¼Œéœ€è¨­å®šï¼š</p>
<ul>
<li>åç¨±</li>
<li>ä½¿ç”¨è€…åç¨±/é›»è©±è™Ÿç¢¼</li>
<li>å¯†ç¢¼</li>
<li>ä»»ä½•æ“ä½œèªªæ˜</li>
</ul>
<p>é€éæ­¤å¯é™åˆ¶ä½¿ç”¨è€…ä¸‹è¼‰æ‡‰ç”¨ç¨‹å¼</p>
<p><img src="../images/android-app-deploy/img7.png" alt=""></p>
<p><img src="../images/android-app-deploy/img8.png" alt=""></p>
<h1 id="å»£å‘Š"><a href="#å»£å‘Š" class="headerlink" title="å»£å‘Š"></a>å»£å‘Š</h1><p>è¨­å®šAppä¸­æ˜¯å¦æœ‰å»£å‘Šï¼Œè‹¥æœ‰å‹¾é¸å»£å‘Šå‰‡æœƒåœ¨Playå•†åº—ä¸Šé¡¯ç¤º <code>å«å»£å‘Šå…§å®¹</code> çš„æ¨™ç±¤</p>
<p><img src="../images/android-app-deploy/img10.png" alt=""></p>
<h1 id="å…§å®¹åˆ†ç´š"><a href="#å…§å®¹åˆ†ç´š" class="headerlink" title="å…§å®¹åˆ†ç´š"></a>å…§å®¹åˆ†ç´š</h1><p>æ ¹æ“šåœ‹éš›å¹´é½¡åˆ†ç´šè¯ç›Ÿï¼ˆè‹±èªï¼šInternational Age Rating Coalitionï¼Œç¸®å¯«IARCï¼‰è¨­è¨ˆçš„ç°¡åŒ–å„åœ‹åˆ†ç´šçš„å…§å®¹åˆ†ç´šå•å·ï¼Œé™ä½ç”¢å“è©•æ¯”çš„éç¨‹ï¼Œ<a href="https://zh.wikipedia.org/wiki/%E5%9C%8B%E9%9A%9B%E5%B9%B4%E9%BD%A1%E5%88%86%E7%B4%9A%E8%81%AF%E7%9B%9F" target="_blank" rel="noopener">åƒè€ƒè³‡æ–™</a></p>
<p>å¡«å¯«å…§å®¹åˆ†ç´šå•å·ï¼Œè®“ä½¿ç”¨è€…äº†è§£Appçš„åˆ†é¡ï¼ŒåŠæ˜¯å¦æœƒæœ‰ä¸å®œå…’ç«¥çš„å…§å®¹</p>
<p><img src="../images/android-app-deploy/img11.png" alt=""></p>
<p>é¦–å…ˆå¡«å¯«é›»å­éƒµä»¶ï¼Œå•å·å®Œæˆæœƒå¯„é€ä¸€ä»½çµæœè‡³è©²ä¿¡ç®±</p>
<p><img src="../images/android-app-deploy/img13.png" alt=""></p>
<p>é¸æ“‡ App çš„é¡åˆ¥ï¼Œä»¥ <a href="https://play.google.com/store/apps/details?id=com.wtuc.ap" target="_blank" rel="noopener">æ–‡è—»æ ¡å‹™é€š</a> ç‚ºä¾‹ï¼Œé¸æ“‡ <code>åƒè€ƒè³‡è¨Šã€æ–°èæˆ–æ•™è‚²å…§å®¹</code></p>
<p><img src="../images/android-app-deploy/img12.png" alt=""></p>
<p>æ ¹æ“šé¸æ“‡çš„é¡å‹ï¼Œéœ€å¡«å¯«ç›¸é—œå…§å®¹æ˜¯å¦æœ‰æœªæˆå¹´æš´åŠ›è‰²æƒ…è¨Šæ¯</p>
<p><img src="../images/android-app-deploy/img14.png" alt=""></p>
<p>å®Œæˆå¾Œæœƒé¡¯ç¤ºåŸºæœ¬çš„å ±è¡¨ï¼Œé»æ“Šå³ä¸‹è§’æäº¤å®Œæˆå•å·</p>
<p><img src="../images/android-app-deploy/img15.png" alt=""></p>
<p>å®Œæˆå¾Œï¼Œè‹¥æ—¥å¾Œæƒ³åœ¨ä¿®æ”¹å•å·å…§å®¹ï¼Œéœ€è‡³å³ä¸Šè§’ é»æ“Š <code>Start new questionaire</code> é‡æ–°æäº¤å•å·</p>
<p><img src="../images/android-app-deploy/img16.png" alt=""></p>
<h1 id="ç›®æ¨™å°è±¡"><a href="#ç›®æ¨™å°è±¡" class="headerlink" title="ç›®æ¨™å°è±¡"></a>ç›®æ¨™å°è±¡</h1><p>å¡«å¯«è©³ç´°çš„Appç™¼å¸ƒç›®æ¨™å°è±¡</p>
<p>é¦–å…ˆé»é¸ <code>ç›®æ¨™å¹´é½¡å±¤</code>ï¼Œä¸»è¦æ˜¯ç¢ºèªç›®æ¨™å°è±¡æ˜¯ä¸æ˜¯å…’ç«¥ï¼Œè‹¥å°è±¡æœªæ»¿13æ­²å‰‡éœ€è¦æ–°å¢éš±ç§æ¬Šæ”¿ç­–</p>
<p><img src="../images/android-app-deploy/img18.png" alt=""></p>
<p>å‹¾é¸ <code>æ˜¯å¦æœƒå¼•èµ·å…’ç«¥èˆˆè¶£</code>ï¼Œè‹¥ä¸Šè€…é»æ“Š13æ­²ä»¥ä¸‹ï¼Œå¯å‹¾é¸ <code>æ˜¯</code> å®£ç¨±é©åˆå…’ç«¥</p>
<p><img src="../images/android-app-deploy/img19.png" alt=""></p>
<p>æœ€å¾Œé»æ“Š <code>å„²å­˜</code> å®Œæˆç›®æ¨™å°è±¡å’Œå…§å®¹</p>
<p><img src="../images/android-app-deploy/img20.png" alt=""></p>
<p>æ¥è‘—å°±å®Œæˆä¸€åŠäº†ï½ï½</p>
<p><img src="../images/android-app-deploy/img21.png" alt=""></p>
<h1 id="æ‡‰ç”¨ç¨‹å¼é¡åˆ¥åŠè©³ç´°è³‡æ–™"><a href="#æ‡‰ç”¨ç¨‹å¼é¡åˆ¥åŠè©³ç´°è³‡æ–™" class="headerlink" title="æ‡‰ç”¨ç¨‹å¼é¡åˆ¥åŠè©³ç´°è³‡æ–™"></a>æ‡‰ç”¨ç¨‹å¼é¡åˆ¥åŠè©³ç´°è³‡æ–™</h1><p>æ‡‰ç”¨ç¨‹å¼åˆ†é¡ï¼Œå€åˆ†æ‡‰ç”¨ç¨‹å¼æˆ–éŠæˆ²çš„é¡åˆ¥ï¼Œåœ¨Play å•†åº—ä¸­ï¼Œä¹Ÿæœƒæœ‰é¡åˆ¥æ’å</p>
<p><img src="../images/android-app-deploy/img22.png" alt=""></p>
<p>æ¥è‘—è¨­å®šå•†åº—çš„è¯çµ¡è©³ç´°è³‡è¨Šï¼Œåˆ†åˆ¥ç‚º</p>
<ul>
<li>é›»å­éƒµä»¶åœ°å€ (å¿…å¡«)</li>
<li>é›»è©±è™Ÿç¢¼</li>
<li>ç¶²ç«™</li>
</ul>
<p><strong>ä»¥ä¸Šè¨Šæ¯çš†æœƒåœ¨Playå•†åº—ä¸Šé¡¯ç¤º</strong></p>
<p><img src="../images/android-app-deploy/img23.png" alt=""></p>
<p>ä¸¦å‹¾é¸æ˜¯å¦è¦åœ¨Playå•†åº—å¤–è¡ŒéŠ·ï¼Œè®“å¤–éƒ¨ç¶²ç«™å¯æœå°‹åˆ°ä½ çš„App</p>
<p><img src="../images/android-app-deploy/img24.png" alt=""></p>
<p>å®Œæˆå¾Œå°±åªå‰©ä¸‹æœ€å¾Œä¸€å€‹æ­¥é©Ÿ</p>
<p><img src="../images/android-app-deploy/img25.png" alt=""></p>
<h1 id="å•†åº—è³‡è¨Š"><a href="#å•†åº—è³‡è¨Š" class="headerlink" title="å•†åº—è³‡è¨Š"></a>å•†åº—è³‡è¨Š</h1><p>é¦–å…ˆæœƒæ ¹æ“šä¸€é–‹å§‹è¨­å®šçš„<code>ä¸»è¦èªè¨€</code>ï¼Œè¨­å®š App åœ¨ Play å•†åº—çš„è³‡è¨Šï¼Œå¯æ ¹æ“šä¸åŒèªè¨€ï¼Œè¨­å®šä¸åŒçš„å•†åº—è³‡è¨Šï¼Œå¯é»æ“Š <code>ç®¡ç†å…¶ä»–èªè¨€ç‰ˆæœ¬çš„ç¿»è­¯å…§å®¹</code> ç®¡ç†å…¶ä»–èªè¨€çš„å…§å®¹</p>
<h2 id="æ‡‰ç”¨ç¨‹å¼è©³ç´°è³‡æ–™"><a href="#æ‡‰ç”¨ç¨‹å¼è©³ç´°è³‡æ–™" class="headerlink" title="æ‡‰ç”¨ç¨‹å¼è©³ç´°è³‡æ–™"></a>æ‡‰ç”¨ç¨‹å¼è©³ç´°è³‡æ–™</h2><p>é¦–å…ˆå¯è¨­å®š</p>
<ul>
<li>æ‡‰ç”¨ç¨‹å¼åç¨±ï¼šAppåç¨±ï¼Œä½œç‚ºå¯ä¾›æœå°‹çš„é—œéµå­—ï¼Œä¸Šé™50å­—</li>
<li>ç°¡çŸ­èªªæ˜ï¼šå¯åœ¨Appé é¢é¦–è¦çœ‹åˆ°ç°¡çŸ­èªªæ˜ï¼Œä¸Šé™80å­—</li>
<li>å®Œæ•´èªªæ˜ï¼šåœ¨é»æ“Š<code>é—œæ–¼é€™å€‹æ‡‰ç”¨ç¨‹å¼</code>å¾Œé¡¯ç¤ºçš„å®Œæ•´èªªæ˜</li>
</ul>
<p><img src="../images/android-app-deploy/img26.png" alt=""></p>
<p>å¯åƒç…§ Play å•†åº—å°æ‡‰ä½ç½®</p>
<p><img src="../images/android-app-deploy/img26-1.jpg" alt=""></p>
<p><img src="../images/android-app-deploy/img26-2.jpg" alt=""></p>
<p>æ¥è‘—è¨­å®š <code>æ‡‰ç”¨ç¨‹å¼åœ–ç¤º</code> æœƒé¡¯ç¤ºåœ¨ Play å•†åº—çš„åœ–ç¤ºï¼Œ<strong>é™å®šå°ºå¯¸ç‚º <code>512*512</code> çš„è§£æåº¦</strong>ï¼Œä¸Šå‚³å¾Œéƒ½æœƒä»¥æ©¢åœ“è£å‰ªé¡¯ç¤º</p>
<p><img src="../images/android-app-deploy/img27.png" alt=""></p>
<p>ä¸»è¦åœ–ç‰‡é¡¯ç¤ºæ–¼å•†åº—è³‡è¨Šçš„æœ€é ‚ç«¯ï¼Œå¯ç”¨æ–¼å®£å‚³æ‡‰ç”¨ç¨‹å¼ï¼Œ<strong>å¤§å°é™åˆ¶ <code>1024*500</code> è§£æåº¦çš„åœ–ç‰‡</strong></p>
<p><img src="../images/android-app-deploy/img29.png" alt=""></p>
<p>è¢å¹•æˆªåœ–ä¸»è¦åˆ†ç‚º</p>
<ul>
<li>æ‰‹æ©Ÿ</li>
<li>ä¸ƒå‹å¹³æ¿é›»è…¦</li>
<li>åå‹å¹³æ¿é›»è…¦</li>
</ul>
<p>åŸºæœ¬ä¸Šï¼Œå°æ‡‰é¡å‹çš„è£ç½®æˆªåœ–éƒ½é©ç”¨ï¼Œä¹Ÿå¯è‡ªè¡Œè£½ä½œç¬¦åˆè¦å®šçš„å°ºå¯¸çš„åœ–ç‰‡ï¼Œ<strong>çš†ç‚ºä½¿ç”¨ JPEG æˆ– 24 ä½å…ƒ PNG åœ–ç‰‡ï¼Œé•·å¯¬æ¯”å»ºè­°16:9</strong></p>
<p><img src="../images/android-app-deploy/img30.png" alt=""></p>
<p><img src="../images/android-app-deploy/img31.png" alt=""></p>
<p>åŠ å…¥å½±ç‰‡ä¹Ÿæœƒé¡¯ç¤ºæ–¼å•†åº—ä¸Š</p>
<p><img src="../images/android-app-deploy/img32.png" alt=""></p>
<p>å•†åº—è³‡è¨Šè¨­å®šå®Œæˆå¾Œï¼Œè‹¥æœªä¾†è¦ä¿®æ”¹éƒ½å¯ç›´æ¥ä¿®æ”¹ï¼Œä½†ä¿®æ”¹å¾Œéƒ½éœ€è¦ç­‰å•†åº—éƒ¨ç½²æ™‚é–“ï¼Œé€šå¸¸éƒ½æœƒç‚ºåŠå¤©å·¦å³æ™‚é–“</p>
<h1 id="ä¸Šå‚³Appè‡³å•†åº—"><a href="#ä¸Šå‚³Appè‡³å•†åº—" class="headerlink" title="ä¸Šå‚³Appè‡³å•†åº—"></a>ä¸Šå‚³Appè‡³å•†åº—</h1><p>åˆ° <code>ç™¼ä½ˆ</code> çš„ç›®éŒ„ä¸‹ï¼Œé¸æ“‡Appç›®å‰è¦ç™¼å¸ƒçš„æ–¹å¼ï¼Œæœ‰åˆ†æˆ</p>
<ul>
<li>æ­£å¼ç‰ˆï¼šæœƒç™¼å¸ƒçµ¦å•†åº—ä¸­æ‰€æœ‰è¨­ç½®çš„åœ°å€</li>
<li>å…¬é–‹æ¸¬è©¦ï¼šä»»ä½•ä½¿ç”¨è€…å¯è‡³ Play å•†åº—é»æ“Šæ¸¬è©¦è¨ˆç•«ï¼Œå³å¯ä½¿ç”¨æ­¤ç‰ˆæœ¬</li>
<li>å°é–‰æ¸¬è©¦ï¼šç”±é–‹ç™¼äººå“¡å»ºç«‹é›»å­éƒµä»¶æ¸…å–®ï¼Œæˆ–æ˜¯å¯é€éé€£çµåŠ å…¥æ¸¬è©¦è¨ˆç•« <a href="https://play.google.com/apps/testing/{app" target="_blank" rel="noopener">https://play.google.com/apps/testing/{app</a> id}</li>
<li>å…§éƒ¨æ¸¬è©¦ï¼šç”±é–‹ç™¼äººå“¡å»ºç«‹é›»å­éƒµä»¶æ¸…å–®ï¼Œæˆ–æ˜¯å¯é€éå…§éƒ¨é‚€è«‹æ¸¬è©¦é€£çµï¼š<a href="https://play.google.com/apps/internaltest/{test" target="_blank" rel="noopener">https://play.google.com/apps/internaltest/{test</a> group id} åŠ å…¥</li>
<li>æ¶å…ˆè¨»å†Šï¼šè‹¥é‚„æ²’ç™¼ä½ˆæ­£å¼ç‰ˆæ™‚ï¼Œå¯åˆ©ç”¨æ­¤åŠŸèƒ½ï¼Œåœ¨Playå•†åº—ä¸­é¡¯ç¤ºæ¶å…ˆé«”é©—çš„å­—æ¨£ï¼Œä¸¦æä¾›æ¸¬è©¦äººå“¡ç‰¹æ®Šçå‹µ</li>
</ul>
<p>ä¸ç®¡åˆ©ç”¨å“ªç¨®æ¸¬è©¦æ–¹å¼ï¼Œæ¥ä¸‹ä¾†ä¸Šå‚³Appçš„æ–¹å¼éƒ½æœƒç›¸åŒï¼Œä¾‹å¦‚é¸æ“‡ <code>æ­£å¼ç‰ˆ</code> ç™¼å¸ƒï¼Œä¸¦é»æ“Šå³ä¸Šæ–¹çš„ <code>å»ºç«‹æ–°ç‰ˆæœ¬</code></p>
<p><img src="../images/android-app-deploy/img33.png" alt=""></p>
<p>æ¥è‘—ç¬¬ä¸€æ¬¡ä¸Šæ¶æ™‚éœ€é»æ“Š åŒæ„ä½¿ç”¨ <code>Google Play æ‡‰ç”¨ç¨‹å¼ç°½ç½²</code>ï¼ŒGoogle æœƒç®¡ç†ä½ ç°½ç½²æ‰€ä½¿ç”¨çš„é‡‘é‘°ï¼Œä¸¦ä¸”è©²é‡‘é‘°åªèƒ½æä¾›çµ¦è©² App ä½¿ç”¨</p>
<p>è‹¥ä»Šå¤©é‡‘é‘°éºå¤±ï¼Œå¯è«‹å¸³æˆ¶æ“æœ‰è€…è¯çµ¡<a href="https://support.google.com/googleplay/android-developer/contact/otherbugs" target="_blank" rel="noopener">æ”¯æ´å°çµ„</a>é‡æ–°ä¸Šå‚³é‡‘é‘°</p>
<p>å°‡åˆ©ç”¨ <code>Android Studio</code> ç­‰ç­‰çš„ Android ç·¨è­¯å·¥å…·ï¼Œå°‡åŸç”ŸAndroid çš„ <code>Apk</code> æˆ–æ˜¯ <code>App Bundle</code> ä¸Šå‚³è‡³æ­¤é é¢</p>
<p><strong>æ¯æ¬¡æ–°ä¸Šå‚³çš„ <code>ç‰ˆæœ¬è™Ÿç¢¼(version code)</code> çš†éœ€å¤§æ–¼å…ˆå‰ä¸Šå‚³çš„</strong></p>
<p>é—œæ–¼é‡‘é‘°ä½¿ç”¨è©³ç´° <a href="https://support.google.com/googleplay/android-developer/answer/7384423" target="_blank" rel="noopener">å¯åƒè€ƒ</a></p>
<p><img src="../images/android-app-deploy/img35.png" alt=""></p>
<h2 id="ç‰ˆæœ¬è©³ç´°è³‡è¨Š"><a href="#ç‰ˆæœ¬è©³ç´°è³‡è¨Š" class="headerlink" title="ç‰ˆæœ¬è©³ç´°è³‡è¨Š"></a>ç‰ˆæœ¬è©³ç´°è³‡è¨Š</h2><p>ç‰ˆæœ¬åç¨±æœƒæ ¹æ“šä¸Šå‚³çš„ <code>Apk</code> æˆ– <code>App Bundle</code> å‘½å</p>
<p>ç‰ˆæœ¬è³‡è¨Šæœƒæ ¹æ“šå•†åº—å¯æä¾›çš„èªè¨€ï¼Œä»¥ <code>XML</code> æ ¼å¼æ’°å¯«ï¼Œå°‡é€™æ¬¡æ›´æ–°å…§å®¹å¯«è‡³ <code>èªè¨€ç¢¼(language code)</code> ä¸­</p>
<p><img src="../images/android-app-deploy/img36.png" alt=""></p>
<p>å®Œæˆå¾Œé»æ“Šå„²å­˜ï¼Œä¸¦é»æ“Šæª¢æŸ¥ç‰ˆæœ¬</p>
<p><img src="../images/android-app-deploy/img37.png" alt=""></p>
<p>æ¥è‘—æœƒç™¼ç¾æ²’æœ‰è¨­å®šæä¾›åœ°å€</p>
<p><img src="../images/android-app-deploy/img38.png" alt=""></p>
<p>è¿”å›è‡³ä¸Šä¸€é çš„æœ€ä¸Šæ–¹ï¼Œé¸æ“‡ <code>åœ‹å®¶èˆ‡åœ°å€</code> ç·¨è¼¯é‡å°æ­£å¼ç‰ˆçš„ç™¼å¸ƒåœ‹å®¶/åœ°å€</p>
<p><img src="../images/android-app-deploy/img39.png" alt=""></p>
<p>è‹¥æ²’å‹¾é¸ï¼ŒPlayå•†åº—å°±ä¸æœƒç™¼ä½ˆè‡³æ­¤åœ‹å®¶/åœ°å€</p>
<p><img src="../images/android-app-deploy/img40.png" alt=""></p>
<p>æ¥è‘—å›åˆ°å‰›å‰›ç·¨è¼¯çš„ç‰ˆæœ¬è³‡è¨Šï¼Œé»æ“Š <code>é–‹å§‹ç™¼å¸ƒ(æ­£å¼ç‰ˆ)</code></p>
<p><img src="../images/android-app-deploy/img41.png" alt=""></p>
<p>æœ€å¾Œæœƒè·³å›æ­£å¼ç‰ˆçš„é é¢ï¼Œä¸¦é¡¯ç¤ºå¯©æŸ¥ä¸­</p>
<p><img src="../images/android-app-deploy/img42.png" alt=""></p>
<p>è‡ª 2019 å¹´é–‹å§‹ï¼ŒPlay å•†åº—åœ¨ç¬¬ä¸€æ¬¡å¯©æŸ¥æ™‚ï¼Œæœ€ä¹…å¤§ç´„æœƒè‡³ä¸ƒå¤©ï¼Œçˆ¾å¾Œæäº¤å¤§ç´„éƒ½æ˜¯ä¸€ä¸‹å­å°±å®Œæˆå¯©æŸ¥ï¼Œä¸¦éƒ½æ˜¯åŠå¤©æœƒå®Œå…¨éƒ¨ç½²è‡³å•†åº—(æ‰€æœ‰ä½¿ç”¨è€…éƒ½å¯ä»¥çœ‹åˆ°æ›´æ–°)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.rainvisitor.me/archives/4254a2e9.html" data-id="ckrhj405y0000gxb30xskeeey" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flutter/" rel="tag">Flutter</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ios-app-store-tutorial" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/dc2c1f00.html" class="article-date">
  <time datetime="2020-10-24T12:27:58.000Z" itemprop="datePublished">2020-10-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Flutter/">Flutter</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/dc2c1f00.html">iOS app ä¸Šæ¶æµç¨‹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç´¹åœ¨2020å¹´ Apple æ”¹ç‰ˆå¾Œçš„ App Store Connect å¦‚ä½•ä¸Šæ¶ iOS App</p>
<h1 id="æ–°å¢-App"><a href="#æ–°å¢-App" class="headerlink" title="æ–°å¢ App"></a>æ–°å¢ App</h1><p>åˆ° <a href="https://appstoreconnect.apple.com/" target="_blank" rel="noopener">App Store Connect</a> é»æ“Š <code>æˆ‘çš„App</code></p>
<p><img src="../images/ios-app-deploy/img1.png" alt=""></p>
<p>é»æ“Š App æ—é‚Šé‚Šçš„ + é¸æ“‡ <code>æ–°çš„ App</code></p>
<p><img src="../images/ios-app-deploy/img2.png" alt=""></p>
<h1 id="è¨»å†ŠIdentifier"><a href="#è¨»å†ŠIdentifier" class="headerlink" title="è¨»å†ŠIdentifier"></a>è¨»å†ŠIdentifier</h1><p>åˆ° <a href="https://developer.apple.com/account/resources/identifiers/list" target="_blank" rel="noopener">æ†‘è­‰ã€è­˜åˆ¥ç¢¼åŠæè¿°æª”</a> è¨»å†ŠAppçš„ <code>Identifier</code></p>
<p><img src="../images/ios-app-deploy/img4-0.png" alt=""></p>
<p>é¸æ“‡ <code>App IDs</code></p>
<p><img src="../images/ios-app-deploy/img4-1.png" alt=""></p>
<p>é¸æ“‡ <code>App</code></p>
<p><img src="../images/ios-app-deploy/img4-2.png" alt=""></p>
<p><strong>Discription</strong> å¡«å¯«å¯ä»¥è­˜åˆ¥çš„åç¨±</p>
<p><strong>App ID Prefix</strong> é¸æ“‡ <code>Explicit</code> ä¸¦å¡«ä¸Šèˆ‡ Xcode ä¸­çš„ <code>Bundle Indentifier</code> ç›¸åŒçš„ ID</p>
<p><strong>App ID Prefix çš„ Bundle ID ä¸Šæ¶å¾Œå°±ä¸å¯ä¿®æ”¹</strong></p>
<p>æœ€å¾Œé»æ“Š <code>Continue</code> ç„¶å¾Œ <code>Register</code> å®Œæˆè¨»å†Š</p>
<p><img src="../images/ios-app-deploy/img4-3.png" alt=""></p>
<p>æˆ–æ˜¯</p>
<p>æ‡¶äººæ–¹æ³•</p>
<p>ä½¿ç”¨ <code>Xcode</code> åœ¨ <code>Target</code> ä¸­çš„ <code>Runner</code> é¸æ“‡ <code>Signing &amp; Capabilities</code></p>
<p>é¸æ“‡æƒ³è¦ä¸Šæ¶çš„Appleé–‹ç™¼è€…å¸³è™Ÿ</p>
<p><img src="../images/ios-app-deploy/img3.png" alt=""></p>
<p>ä¸¦é»æ“Š <code>+ Capability</code> éš¨æ„æ–°å¢ä¸€å€‹ Capability</p>
<p>æ­¤å‹•ä½œ <code>Xcode</code> æœƒè‡ªå‹•è¨»å†Š <code>Indentifier</code> è‡³ App Store Connect</p>
<p>å®Œæˆå¾Œå†å°‡å…¶å–æ¶ˆ </p>
<p>æ²’å–æ¶ˆçš„è©±å¯©æŸ¥æ™‚æœƒç´å…¥å¯©æŸ¥ç¯„åœ è¦ç‰¹åˆ¥æ³¨æ„</p>
<p><img src="../images/ios-app-deploy/img4-4.png" alt=""></p>
<p>æ¥è‘—å¡«å¯«AppåŸºæœ¬è³‡è¨Š</p>
<ul>
<li>å¹³å°ï¼šé¸æ“‡ä½ çš„Appæœƒåœ¨å“ªäº›å¹³å°æä¾›ï¼Œè‹¥æ²’å‹¾é¸å¯äº‹å¾Œæ–°å¢</li>
<li>åç¨±ï¼šåœ¨Apple Storeçš„åç¨±ï¼Œç„¡æ³•è·Ÿå·²ä¸Šæ¶Appç›¸åŒï¼Œå‘½åä¸Šéœ€è¦å…ˆæ¶å…ˆè´ï¼Œé™¤éå°æ–¹æŠŠAppåˆªé™¤æˆ–ä¿®æ”¹åç¨±ï¼Œä¹Ÿæ˜¯ä½¿ç”¨è€…æœå°‹æ™‚èƒ½æ‰¾åˆ°ä½ çš„Appçš„é¦–è¦é€”å¾‘</li>
<li>ä¸»è¦èªè¨€ï¼šé¦–å…ˆå¯åœ¨å•†åº—æä¾›çš„èªè¨€ï¼Œè‹¥æœ‰ç™¼ä½ˆä¸åŒåœ‹å®¶èªç³»ï¼Œå¯äº‹å¾Œæ–°å¢</li>
<li>å¥—ä»¶è­˜åˆ¥ç¢¼ï¼šé¸æ“‡å‰›æ‰æ–°å¢çš„ <code>Indentifier</code>ï¼Œé¸æ“‡å¾Œå°±ä¸èƒ½ä¿®æ”¹ï¼Œå°æ‡‰åˆ°åŸç”Ÿçš„ <code>Bundle Indentifier</code></li>
<li>SKUï¼šApp ID ç‚ºç¨ä¸€ç„¡äºŒï¼Œå¯ä»»æ„å‘½åï¼Œå¡«å¯«å¾Œä¸èƒ½ä¿®æ”¹ï¼Œä½†ä¸æœƒå…¬é–‹é¡¯ç¤º</li>
</ul>
<p><img src="../images/ios-app-deploy/img4-5.png" alt=""></p>
<h1 id="App-è³‡è¨Š"><a href="#App-è³‡è¨Š" class="headerlink" title="App è³‡è¨Š"></a>App è³‡è¨Š</h1><p>æ–°å¢ App å¾Œï¼Œå¯å…ˆä¾† ä¸€èˆ¬è³‡è¨Š -&gt; App è³‡è¨Šï¼Œå¡«å¯« App åŸºæœ¬è³‡è¨Šï¼Œé€™é‚Šæœƒåˆ†å…©å€‹å€å¡Šï¼Œä¸€å€‹æ˜¯å¯æœ¬åœ°åŒ–è³‡è¨ŠåŠä¸€èˆ¬è³‡è¨Š</p>
<h3 id="å¯æœ¬åœ°åŒ–è³‡è¨Š"><a href="#å¯æœ¬åœ°åŒ–è³‡è¨Š" class="headerlink" title="å¯æœ¬åœ°åŒ–è³‡è¨Š"></a>å¯æœ¬åœ°åŒ–è³‡è¨Š</h3><ul>
<li>åç¨±ï¼šå¿…å¡«ï¼Œç‚ºä¸€é–‹å§‹è¼¸å…¥çš„ App åç¨±</li>
<li>å‰¯æ¨™é¡Œï¼šå¿…å¡«ï¼Œå•†åº—ä¸­æœƒä½æ–¼ App åç¨±ä¸‹æ–¹ï¼Œå»ºè­°ä½¿ç”¨ç°¡çŸ­èªå¥èªªæ˜ App</li>
<li>éš±ç§æ¬Šæ”¿ç­–ï¼šå¿…å¡«ï¼Œè²æ˜ä½ çš„ App éš±ç§æ¬Šæ”¿ç­–çš„ç¶²å€ï¼Œä¸é™åˆ¶æ ¼å¼</li>
</ul>
<p><img src="../images/ios-app-deploy/img16.png" alt=""></p>
<h3 id="ä¸€èˆ¬è³‡è¨Š"><a href="#ä¸€èˆ¬è³‡è¨Š" class="headerlink" title="ä¸€èˆ¬è³‡è¨Š"></a>ä¸€èˆ¬è³‡è¨Š</h3><ul>
<li>Apple IDï¼šç”± Apple ç”¢ç”Ÿï¼Œä½œç‚ºç¶²é ä¸Šçš„ç·¨è™Ÿï¼Œå¯è‡³ <a href="https://apps.apple.com/tw/app/id`${ä½ çš„" target="_blank" rel="noopener">https://apps.apple.com/tw/app/id`${ä½ çš„</a> Apple ID}`ï¼Œæ‰¾åˆ°ä½ çš„App</li>
<li>å…§å®¹ç‰ˆæ¬Šï¼šè²æ˜ä½ çš„ App æ˜¯å¦æœ‰ç¬¬ä¸‰æ–¹å…§å®¹ï¼Œåƒæ˜¯ä»¥æ ¡å‹™é€šä¾†èªªï¼Œè³‡æ–™ä¾†æºæ–¼å­¸æ ¡ï¼Œå°±å¯ä»¥è¦–ç‚ºç¬¬ä¸‰æ–¹å…§å®¹ </li>
<li>å¹´é½¡åˆ†ç´šï¼šå¿…å¡«ï¼Œæ ¹æ“šå¡«å¯« <a href="#/å¹´é½¡åˆ†ç´šå•å·">å¹´é½¡åˆ†ç´šå•å·</a> çš„çµæœ</li>
<li>è¨±å¯å”è­°ï¼šå¿…å¡«ï¼Œé è¨­ä½¿ç”¨ <a href="https://www.apple.com/legal/internet-services/itunes/dev/stdeula/" target="_blank" rel="noopener">ã€ŠApple æ¨™æº–çµ‚ç«¯ä½¿ç”¨è€…è¨±å¯å”è­°ã€‹(EULA)</a>ï¼Œå¯é»æ“Šè‡ªè¨‚è¨±å¯å”è­°</li>
<li>é¡åˆ¥ï¼šå¿…å¡«ï¼Œåœ¨å•†åº—çš„åˆ†é¡ï¼Œå¯é¸æ“‡å…©å€‹ï¼Œä¹Ÿä½œç‚ºèˆ‡åŒé¡å‹Appæ’åçš„åˆ†é¡</li>
</ul>
<p><img src="../images/ios-app-deploy/img17.png" alt=""></p>
<h1 id="å®šåƒ¹èˆ‡ä¾›æ‡‰ç‹€æ³"><a href="#å®šåƒ¹èˆ‡ä¾›æ‡‰ç‹€æ³" class="headerlink" title="å®šåƒ¹èˆ‡ä¾›æ‡‰ç‹€æ³"></a>å®šåƒ¹èˆ‡ä¾›æ‡‰ç‹€æ³</h1><ul>
<li>åƒ¹æ ¼æ’ç¨‹ï¼šé¸æ“‡ä½ çš„Appå®šåƒ¹æ–¹å¼ï¼Œæœ€ä½å…è²»åˆ°æœ€é«˜ 32900å…ƒï¼Œä½¿ç”¨è€…ä»˜è²»è³¼è²·å¾Œ90å¤©å…§éƒ½å¯ä»¥åæ‚”</li>
<li>é å®šï¼šç¬¬ä¸€æ¬¡ä¸Šæ¶å‰æœƒé¡¯ç¤ºï¼Œè‡ªè¨‚æ—¥æœŸåœ¨AppæˆåŠŸç™¼å¸ƒå¾Œï¼Œæœƒé€šçŸ¥é å®šçš„ä½¿ç”¨è€…</li>
<li>ä¾›æ‡‰ç‹€æ³ï¼šéœ€å…ˆå¡«å¯«<code>ä¾›æ‡‰åœ‹å®¶èˆ‡åœ°å€</code>ï¼Œè‹¥é¸æ“‡åœæ­¢ä¾›æ‡‰ï¼Œæœƒå¾å•†åº—ä¸‹æ¶ï¼Œç›´åˆ°é‡æ–°ä¾›æ‡‰ç‚ºæ­¢</li>
<li>Mac ä¸Šçš„ iOS Appï¼šå¦‚æœä½ çš„iOS Appæœ‰ä½¿ç”¨åˆ° <a href="https://developer.apple.com/mac-catalyst/" target="_blank" rel="noopener">Mac Catalyst
</a>(Flutter ç›®å‰ä¸æ”¯æ´)ï¼Œæœƒå°‡ä½ çš„iOS Appç™¼ä½ˆè‡³ Mac App Storeï¼Œè‹¥æœ‰ç™¼ä½ˆmacOS Appï¼Œå‰‡å„ªå…ˆç™¼å¸ƒ macOS App</li>
<li>Appç™¼å¸ƒæ–¹å¼ï¼šæ ¹æ“šä½ çš„é–‹ç™¼è€…å¸³è™Ÿï¼Œè‹¥å€‹äººé–‹ç™¼è€…å¸³è™Ÿåªèƒ½é¸æ“‡å…¬é–‹åœ¨Apple Storeï¼Œè‹¥æ˜¯ä¼æ¥­é–‹ç™¼è€…å¸³è™Ÿï¼Œå‰‡å¯ä»¥ç™¼å¸ƒåˆ°ç§äººçš„å•†åº—ç™¼å¸ƒ</li>
</ul>
<p><img src="../images/ios-app-deploy/img18.png" alt=""></p>
<p><img src="../images/ios-app-deploy/img18-1.png" alt=""></p>
<p><img src="../images/ios-app-deploy/img26.png" alt=""></p>
<h1 id="Appç‰ˆæœ¬è³‡è¨Š"><a href="#Appç‰ˆæœ¬è³‡è¨Š" class="headerlink" title="Appç‰ˆæœ¬è³‡è¨Š"></a>Appç‰ˆæœ¬è³‡è¨Š</h1><p>é€²å…¥ App <code>ç‰ˆæœ¬è³‡è¨Š</code> å¾Œ</p>
<p>é¦–å…ˆè¨­å®š <code>Appé è¦½èˆ‡æˆªåœ–</code> å¯åƒè€ƒä»¥ä¸‹è¦æ ¼ <strong><code>æ¯å€‹è‡³å°‘ä¸‰å¼µ</code></strong></p>
<p>12.9 å‹ iPad Pro ç¬¬ä¸‰ä»£ åŠ ç¬¬äºŒä»£ å°ºå¯¸æ˜¯å¯ä»¥ç›¸å®¹çš„ æ•…æˆªåœ–ç¬¬ä¸‰ä»£ å¯ç›´æ¥ä¸Šå‚³åˆ°ç¬¬äºŒä»£</p>
<p>å»ºè­°ä½¿ç”¨æ¨¡æ“¬å™¨æˆªåœ– ä¸Šå‚³å®Œå¯ç”¨æ»‘é¼ æ‹–æ›³æ”¹è®Šé¡¯ç¤ºé †åº</p>
<table>
<thead>
<tr>
<th style="text-align:center">è¢å¹•å°ºå¯¸èªªæ˜</th>
<th style="text-align:center">å¹³å°</th>
<th style="text-align:center">æˆªåœ–å°ºå¯¸</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">iPhone 6.5 å‹</td>
<td style="text-align:center">iPhone 11 Pro Maxã€iPhone 11ã€iPhone X S Maxã€iPhone XR</td>
<td style="text-align:center">1242 x 2688 åƒç´ ï¼ˆç›´å‘ï¼‰ 2688 x 1242 åƒç´ ï¼ˆæ©«å‘ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">iPhone 5.5 å‹</td>
<td style="text-align:center">iPhone 8 Plusã€iPhone 7 Plusã€iPhone 6s Plus</td>
<td style="text-align:center">1242 x 2208 åƒç´ ï¼ˆç›´å‘ï¼‰ 2208 x 1242 åƒç´ ï¼ˆæ©«å‘ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">12.9 å‹ iPad Proï¼ˆç¬¬ä¸‰ä»£ï¼‰</td>
<td style="text-align:center">iPad Pro 2018ã€iPad Pro 2020</td>
<td style="text-align:center">2048 x 2732 åƒç´ ï¼ˆç›´å‘ï¼‰ 2732 x 2048 åƒç´ ï¼ˆæ©«å‘ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">12.9 å‹ iPad Proï¼ˆç¬¬äºŒä»£ï¼‰</td>
<td style="text-align:center">iPad Pro 2017</td>
<td style="text-align:center">2048 x 2732 åƒç´ ï¼ˆç›´å‘ï¼‰ 2732 x 2048 åƒç´ ï¼ˆæ©«å‘ï¼‰</td>
</tr>
</tbody>
</table>
<p>æ›´å¤šè©³ç´°è³‡è¨Š <a href="https://help.apple.com/app-store-connect/#/devd274dd925" target="_blank" rel="noopener">å¯åƒè€ƒ</a></p>
<p><img src="../images/ios-app-deploy/img5.png" alt=""></p>
<p>æ¥è‘—å¡«å¯«</p>
<ul>
<li>è¡ŒéŠ·å®£å‚³æ–‡å­—ï¼šä½œç‚º App è¡ŒéŠ·å®£å‚³æ¨™èªï¼Œå»ºè­°ç°¡çŸ­çš„æ–‡å­—ï¼Œä¹Ÿè¦ç¬¦åˆAppçš„æ€§è³ª</li>
<li>é—œéµå­—ï¼šåœ¨å•†åº—æœå°‹æ™‚ï¼Œé€éé—œéµå­—åŠ å¼·æ‰¾åˆ°Appï¼Œä¸¦ä½¿ç”¨é€—é»éš”é–‹</li>
<li>æè¿°ï¼šè©³ç´°ä»‹ç´¹Appçš„åŠŸèƒ½èˆ‡ç‰¹è‰²</li>
<li>æ”¯æ´URLï¼šå°æ‡‰å•†åº—é–‹ç™¼è€…ç¶²é </li>
<li>è¡ŒéŠ·URLï¼šå¾…è£œå……</li>
<li>ç‰ˆæœ¬ï¼šå¯åƒè€ƒ <a href="https://semver.org/lang/zh-TW/" target="_blank" rel="noopener">èªæ„åŒ–ç‰ˆæœ¬</a>ï¼Œä¸é™å®šå…©ç¢¼æˆ–ä¸‰ç¢¼ï¼Œä¸èƒ½èˆ‡å…ˆå‰å®šç¾©çš„ç›¸åŒ</li>
<li>ç‰ˆæ¬Šï¼šå®£å‘ŠAppç‰ˆæ¬Šçš„è¨»è§£</li>
<li>å¹´é½¡åˆ†ç´šï¼šæ ¹æ“šå¡«å¯« <a href="#/å¹´é½¡åˆ†ç´šå•å·">å¹´é½¡åˆ†ç´šå•å·</a> çš„çµæœï¼ˆéœ€é»æ“Šç·¨è¼¯å¡«å¯«ï¼‰</li>
</ul>
<p><img src="../images/ios-app-deploy/img6.png" alt=""></p>
<p><img src="../images/ios-app-deploy/img7.png" alt=""></p>
<p>å°æ‡‰åœ¨å•†åº—çš„ä½ç½®å¯åƒè€ƒ</p>
<p><img src="../images/ios-app-deploy/img6-1.png" alt=""></p>
<p><img src="../images/ios-app-deploy/img6-2.png" alt=""></p>
<h2 id="å¹´é½¡åˆ†ç´šå•å·"><a href="#å¹´é½¡åˆ†ç´šå•å·" class="headerlink" title="å¹´é½¡åˆ†ç´šå•å·"></a>å¹´é½¡åˆ†ç´šå•å·</h2><p>é‡å°Appçš„å…§å®¹å¡«å¯«æ˜¯å¦æœ‰å…’ç«¥ä¸å®œçš„</p>
<p><img src="../images/ios-app-deploy/img9.png" alt=""></p>
<p><img src="../images/ios-app-deploy/img10.png" alt=""></p>
<h2 id="Appå¯©æŸ¥è³‡è¨Š"><a href="#Appå¯©æŸ¥è³‡è¨Š" class="headerlink" title="Appå¯©æŸ¥è³‡è¨Š"></a>Appå¯©æŸ¥è³‡è¨Š</h2><p>è˜‹æœåœ¨å¯©æŸ¥æ™‚éƒ½æ˜¯æ¡ç”¨ <code>äººå·¥å¯©æŸ¥</code>ï¼Œå¯©æŸ¥éç¨‹éƒ½é ˆå¡«å¯«å®Œæ•´çš„è³‡æ–™</p>
<ul>
<li>ç™»å…¥è³‡è¨Šï¼šè‹¥ä½ çš„Appæœ‰è¨­è¨ˆç™»å…¥åŠŸèƒ½ï¼Œéœ€æä¾›æ¸¬è©¦å¸³è™Ÿçµ¦å¯©æŸ¥äººå“¡</li>
<li>è¯çµ¡äººè³‡è¨Šï¼šç•¶å¯©æŸ¥æœ‰å•é¡Œæ™‚çš„è¯çµ¡äººè³‡è¨Šï¼Œé›»è©±è™Ÿç¢¼éœ€è¦åŠ å…¥åœ‹éš›å† ç¢¼</li>
<li>å‚™è¨»ï¼šè³‡è¨Šå‰‡æä¾›å…¶ä»–è³‡è¨Šä¾›å¯©æŸ¥äººå“¡äº†è§£ä½ çš„Appï¼Œåƒæ˜¯ä¹‹å‰å°±è¢«å•éé€™å¹¾å€‹å•é¡Œï¼Œçˆ¾å¾Œæˆ‘éƒ½åœ¨æ–°çš„AppåŠ å…¥é€™äº›å›ç­”<ul>
<li>Who is the target audience?</li>
<li>How do users obtain an account?</li>
<li>Is this app meant for internal distribution in your own company, in the company of one target client, or in multiple target clientsâ€™ companies?</li>
<li>In which countries will this app primarily be distributed?</li>
<li>If this app is meant for internal distribution, will the app be accessible by both internal and external partners? Or will it be exclusive to in-house employees?<ul>
<li>é™„ä»¶ï¼šå¯é™„ä¸ŠAppæ“ä½œå½±ç‰‡ï¼Œè‹¥ä½ çš„Appç„¡æ³•æä¾›å¸³è™Ÿæ¸¬è©¦ï¼Œæˆ–æ˜¯æœ‰äº›åŠŸèƒ½éœ€è¦æä¾›ç¯„ä¾‹å½±ç‰‡æ“ä½œ(ex.ä½•æ™‚æœƒä½¿ç”¨åˆ°è®€å–wifié€£ç·šè³‡è¨Šçš„åŠŸèƒ½)ï¼Œéƒ½éœ€è¦é™„ä¸Šå½±ç‰‡</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="../images/ios-app-deploy/img8.png" alt=""></p>
<h3 id="å»ºåˆ¶ç‰ˆæœ¬"><a href="#å»ºåˆ¶ç‰ˆæœ¬" class="headerlink" title="å»ºåˆ¶ç‰ˆæœ¬"></a>å»ºåˆ¶ç‰ˆæœ¬</h3><p>æ¥è‘—é¸æ“‡è¦é€è‡³å¯©æŸ¥çš„Appç‰ˆæœ¬ï¼Œéœ€å…ˆé€éXcode <code>Archive</code> å¾Œä¸Šå‚³è‡³App Store Connectï¼Œé»æ“Šè—è‰²æŒ‰éˆ•</p>
<p><img src="../images/ios-app-deploy/img11.png" alt=""></p>
<p>é¸æ“‡å°æ‡‰æƒ³æäº¤çš„ç‰ˆæœ¬ï¼Œé€šå¸¸ä¸Šå‚³å®Œæœƒéœ€è¦ä¸€æ®µæ™‚é–“è™•ç†ï¼Œç•¶å®Œæˆè™•ç†éƒ½æœƒemailé€šçŸ¥</p>
<p><img src="../images/ios-app-deploy/img11-1.png" alt=""></p>
<p>å±†æ™‚æ‰æœƒå‡ºç¾åœ¨é€™é‚Š</p>
<p><img src="../images/ios-app-deploy/img12.png" alt=""></p>
<p>æ¥è‘—é¸æ“‡é€™æ¬¡æäº¤çš„å‡ºå£åˆè¦è³‡è¨Šï¼Œé»æ“Šæ˜¯å¦æœ‰ä½¿ç”¨åŠ å¯†åŠŸèƒ½ï¼Œè‹¥é»æ“Šæ˜¯çš„è©±ï¼Œéœ€è¦å¦å¤–å¡«å¯«å‡ºå£æ³•å¾‹è³‡è¨Š</p>
<p><img src="../images/ios-app-deploy/img13.png" alt=""></p>
<h3 id="å»£å‘Šè­˜åˆ¥ç¢¼"><a href="#å»£å‘Šè­˜åˆ¥ç¢¼" class="headerlink" title="å»£å‘Šè­˜åˆ¥ç¢¼"></a>å»£å‘Šè­˜åˆ¥ç¢¼</h3><p>æœ€å¾Œæ˜¯å¡«å¯«æ˜¯å¦æœ‰ä½¿ç”¨åˆ° <code>å»£å‘Šè­˜åˆ¥ç¢¼</code>ï¼Œåƒæ˜¯ Firebase Analytics æˆ–æ˜¯ Ad Mod ç­‰ç¬¬ä¸‰æ–¹çš„å»£å‘Šæˆ–åˆ†æå·¥å…·ï¼Œå°±éœ€è¦è²æ˜æœ‰ä½¿ç”¨åˆ°ï¼Œè‹¥å¯©æŸ¥å¾Œç™¼ç¾éŒ¯èª¤ï¼Œå‰‡éœ€è¦é‡æ–°ä¸Šå‚³æ–°çš„Appç‰ˆæœ¬</p>
<p><img src="../images/ios-app-deploy/img14.png" alt=""></p>
<p><strong>æœ€å¾Œå›åˆ°æœ€ä¸Šæ–¹é»æ“Šå®Œæˆï¼Œä¸¦é»æ“Šå¯©æŸ¥ï¼Œçµè‘—å°±æœƒé€²å…¥æ­£åœ¨ç­‰å¾…å¯©æŸ¥</strong></p>
<p><img src="../images/ios-app-deploy/img20.png" alt=""></p>
<p>é€šå¸¸å¯©æŸ¥æ™‚é–“å·²å°ç£éƒ½æ˜¯æ™šä¸Šé–‹å§‹åˆ°åŠå¤œï¼Œå°æ‡‰åˆ°ç¾åœ‹çš„ç™½å¤©æ™‚é–“ï¼Œç¬¬ä¸€æ¬¡å¯©æŸ¥éƒ½æœƒæ¯”è¼ƒä¹…ï¼Œå¤§ç´„2~3å¤©ï¼Œè¦è€å¿ƒç­‰å¾…</p>
<p>ä½†æœ‰æ™‚å€™æœƒå¯©æŸ¥å¤±æ•—ï¼Œä¹Ÿæœƒå¯„é€ email é€šçŸ¥ï¼Œå¯è‡³é€£çµæŸ¥è©¢å•é¡Œï¼Œä¸¦å›è¦†å¯©æŸ¥äººå“¡</p>
<p>iOS Resolve Center : <a href="">https://appstoreconnect.apple.com/apps/<code>{apple id}</code>/appstore/platform/ios/resolutioncenter?m=</a></p>
<p>macOS Resolve Center : <a href="">https://appstoreconnect.apple.com/apps/<code>{apple id}</code>/appstore/platform/osx/resolutioncenter?m=</a></p>
<p><img src="../images/ios-app-deploy/img21.png" alt=""></p>
<p><img src="../images/ios-app-deploy/img21-1.png" alt=""></p>
<p>è‹¥å¯©æŸ¥æˆåŠŸï¼Œå‰‡æœƒé€šçŸ¥ <code>Ready for Sale</code>ï¼Œå®Œæˆé€™æ¬¡ç‰ˆæœ¬å¯©æŸ¥</p>
<p><img src="../images/ios-app-deploy/img22.png" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.rainvisitor.me/archives/dc2c1f00.html" data-id="ckrhj40630001gxb3dhr7cdg2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flutter/" rel="tag">Flutter</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-window-10-å®‰è£-docker-ç„¡æ³•é–‹å•Ÿ-å•é¡Œ" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/b0c060c4.html" class="article-date">
  <time datetime="2018-08-27T08:21:28.000Z" itemprop="datePublished">2018-08-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/b0c060c4.html">window 10 å®‰è£ docker ç„¡æ³•é–‹å•Ÿ å•é¡Œ</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>è‹¥é–‹å•Ÿdockerå¾Œï¼Œvmwareç„¡æ³•åŸ·è¡Œé ˆé—œé–‰dockerä½¿ç”¨çš„hyper-vå…©è€…æœƒç›¸è¡ï¼Œåªèƒ½åŒæ™‚é–‹å…¶ä¸€<br><a href="https://stackoverflow.com/questions/48066994/docker-no-matching-manifest-for-windows-amd64-in-the-manifest-list-entries" target="_blank" rel="noopener">https://stackoverflow.com/questions/48066994/docker-no-matching-manifest-for-windows-amd64-in-the-manifest-list-entries</a></p>
<p>é—œé–‰ç³»çµ±hyper-v<br><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bcdedit /<span class="built_in">set</span> hypervisorlaunchtype off</span><br></pre></td></tr></table></figure></p>
<p>é‡æ–°æ‰“é–‹<br><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bcdedit /<span class="built_in">set</span> hypervisorlaunchtype auto</span><br></pre></td></tr></table></figure></p>
<p>ä¸Šè¿°å…©æŒ‡ä»¤ åŸ·è¡Œå®Œéƒ½é ˆé‡æ–°é–‹æ©Ÿ</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.rainvisitor.me/archives/b0c060c4.html" data-id="ckrhj406a0004gxb35iri385y" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/">Flutter</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flutter/" rel="tag">Flutter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/" rel="tag">GPU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Flutter/" style="font-size: 20px;">Flutter</a> <a href="/tags/GPU/" style="font-size: 10px;">GPU</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">ä¹æœˆ 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">åæœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">å…«æœˆ 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/archives/8ddf18fb.html">ã€æ–‡ç« ç¿»è­¯ã€‘ Getting started with Flutter GPU</a>
          </li>
        
          <li>
            <a href="/archives/430aae7c.html">flutter-3-24-news</a>
          </li>
        
          <li>
            <a href="/archives/4254a2e9.html">Android app ä¸Šæ¶æµç¨‹</a>
          </li>
        
          <li>
            <a href="/archives/dc2c1f00.html">iOS app ä¸Šæ¶æµç¨‹</a>
          </li>
        
          <li>
            <a href="/archives/b0c060c4.html">window 10 å®‰è£ docker ç„¡æ³•é–‹å•Ÿ å•é¡Œ</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2024 Rainvisitor<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FZZFH3T2TV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FZZFH3T2TV');
</script>
  </div>
</body>
</html>